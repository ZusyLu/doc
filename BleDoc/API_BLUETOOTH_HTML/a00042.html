<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Silicon Labs Bluetooth API: Scanner</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Silicon Labs Bluetooth API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00042.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Scanner</div>  </div>
</div><!--header-->
<div class="contents">

<p>Scanner.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:a00043"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00043.html">sl_bt_evt_scanner_scan_report</a></td></tr>
<tr class="memdesc:a00043"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports an advertising or scan response packet that is received by the device's radio while in scanning mode. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga3830ec233ae145d28d34258bbefc00f4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00042.html#ga3830ec233ae145d28d34258bbefc00f4">sl_bt_scanner_discover_mode_t</a> { <a class="el" href="a00042.html#gga3830ec233ae145d28d34258bbefc00f4a4d6ee89abb3c77ee093e5c62185c4270">sl_bt_scanner_discover_limited</a> = 0x0, 
<a class="el" href="a00042.html#gga3830ec233ae145d28d34258bbefc00f4a94cb7f575d29df9a18bf79b6359146c8">sl_bt_scanner_discover_generic</a> = 0x1, 
<a class="el" href="a00042.html#gga3830ec233ae145d28d34258bbefc00f4a8405c738e113754927319c2e905a59e6">sl_bt_scanner_discover_observation</a> = 0x2
 }<tr class="memdesc:ga3830ec233ae145d28d34258bbefc00f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">These values indicate which Bluetooth discovery mode to use when scanning for advertising devices.  <a href="a00042.html#ga3830ec233ae145d28d34258bbefc00f4">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ga3830ec233ae145d28d34258bbefc00f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4b5ff0db2df23db10632f11940b8351f"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00042.html#ga4b5ff0db2df23db10632f11940b8351f">sl_bt_scanner_set_timing</a> (uint8_t phys, uint16_t scan_interval, uint16_t scan_window)</td></tr>
<tr class="separator:ga4b5ff0db2df23db10632f11940b8351f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga149edf29b897d6bc55249ee7cdbe68a5"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00042.html#ga149edf29b897d6bc55249ee7cdbe68a5">sl_bt_scanner_set_mode</a> (uint8_t phys, uint8_t scan_mode)</td></tr>
<tr class="separator:ga149edf29b897d6bc55249ee7cdbe68a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac523df08a9e0ea5de94739609f27324f"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00042.html#gac523df08a9e0ea5de94739609f27324f">sl_bt_scanner_start</a> (uint8_t scanning_phy, uint8_t discover_mode)</td></tr>
<tr class="separator:gac523df08a9e0ea5de94739609f27324f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae85f6e0223de24f598843fb9684afbfd"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00042.html#gae85f6e0223de24f598843fb9684afbfd">sl_bt_scanner_stop</a> ()</td></tr>
<tr class="separator:gae85f6e0223de24f598843fb9684afbfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Scanner. </p>
<p>The commands and events in this class are related to scanning functionalities in GAP central and observer roles. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga3830ec233ae145d28d34258bbefc00f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3830ec233ae145d28d34258bbefc00f4">&#9670;&nbsp;</a></span>sl_bt_scanner_discover_mode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00042.html#ga3830ec233ae145d28d34258bbefc00f4">sl_bt_scanner_discover_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>These values indicate which Bluetooth discovery mode to use when scanning for advertising devices. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga3830ec233ae145d28d34258bbefc00f4a4d6ee89abb3c77ee093e5c62185c4270"></a>sl_bt_scanner_discover_limited&#160;</td><td class="fielddoc"><p>(0x0) Discover only limited discoverable devices. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3830ec233ae145d28d34258bbefc00f4a94cb7f575d29df9a18bf79b6359146c8"></a>sl_bt_scanner_discover_generic&#160;</td><td class="fielddoc"><p>(0x1) Discover limited and generic discoverable devices. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3830ec233ae145d28d34258bbefc00f4a8405c738e113754927319c2e905a59e6"></a>sl_bt_scanner_discover_observation&#160;</td><td class="fielddoc"><p>(0x2) Discover all devices. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4b5ff0db2df23db10632f11940b8351f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b5ff0db2df23db10632f11940b8351f">&#9670;&nbsp;</a></span>sl_bt_scanner_set_timing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_scanner_set_timing </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>scan_interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>scan_window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the scanning timing parameters on the specified PHYs. If the device is currently scanning for advertising devices on PHYs, new parameters will take effect when scanning is restarted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">phys</td><td>PHYs for which the parameters are set.<ul>
<li><b>1:</b> 1M PHY</li>
<li><b>4:</b> Coded PHY</li>
<li><b>5:</b> 1M PHY and Coded PHY </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scan_interval</td><td><p class="starttd">Scan interval is defined as the time interval when the device starts its last scan until it begins the subsequent scan. In other words, how often to scan</p><ul>
<li>Time = Value x 0.625 ms</li>
<li>Range: 0x0004 to 0xFFFF</li>
<li>Time Range: 2.5 ms to 40.96 s</li>
</ul>
<p>Default value: 10 ms</p>
<p>A variable delay occurs when switching channels at the end of each scanning interval, which is included in the scanning interval time. During the switch time, advertising packets are not received by the device. The switch time variation is use case-dependent. For example, if scanning while keeping active connections, the channel switch time might be longer than when scanning without any active connections. Increasing the scanning interval reduces the amount of time in which the device can't receive advertising packets because it switches channels less often.</p>
<p class="endtd">After every scan interval, the scanner changes the frequency at which it operates. It cycles through all three advertising channels in a round robin fashion. According to the specification, all three channels must be used by a scanner. </p>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scan_window</td><td><p class="starttd">Scan window defines the duration of the scan which must be less than or equal to the <code>scan_interval</code> </p><ul>
<li>Time = Value x 0.625 ms</li>
<li>Range: 0x0004 to 0xFFFF</li>
<li>Time Range: 2.5 ms to 40.96 s</li>
</ul>
<p class="endtd">Default value: 10 ms Note that the packet reception is aborted if it's started just before the scan window ends. </p>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
<a id="ga149edf29b897d6bc55249ee7cdbe68a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga149edf29b897d6bc55249ee7cdbe68a5">&#9670;&nbsp;</a></span>sl_bt_scanner_set_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_scanner_set_mode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>scan_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the scan mode on the specified PHYs. If the device is currently scanning for advertising devices on PHYs, new parameters will take effect when scanning is restarted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">phys</td><td>PHYs for which the parameters are set.<ul>
<li><b>1:</b> 1M PHY</li>
<li><b>4:</b> Coded PHY</li>
<li><b>5:</b> 1M PHY and Coded PHY </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scan_mode</td><td><p class="starttd">Scan mode. Values:</p><ul>
<li><b>0:</b> Passive scanning</li>
<li><b>1:</b> Active scanning</li>
<li>In passive scanning mode, the device only listens to advertising packets and does not transmit packets.</li>
<li>In active scanning mode, the device sends out a scan request packet upon receiving an advertising packet from a remote device. Then, it listens to the scan response packet from the remote device.</li>
</ul>
<p class="endtd">Default value: 0 </p>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
<a id="gac523df08a9e0ea5de94739609f27324f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac523df08a9e0ea5de94739609f27324f">&#9670;&nbsp;</a></span>sl_bt_scanner_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_scanner_start </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>scanning_phy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>discover_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start the GAP discovery procedure to scan for advertising devices on the specified scanning PHYs. To cancel an ongoing discovery procedure, use the <a class="el" href="a00042.html#gae85f6e0223de24f598843fb9684afbfd">sl_bt_scanner_stop</a> command.</p>
<p>The invalid parameter error will be returned if the value of scanning PHYs is invalid or the device does not support a PHY.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scanning_phy</td><td><p class="starttd">The scanning PHYs.</p>
<p>In simultaneous scanning, the stack alternates the scanning on two PHYs by switching the PHY at every scan interval. When a timing parameter is set differently on 1M and Coded PHY, the stack chooses the most relaxed value for both PHYs during simultaneous scanning, i.e., the largest scan interval or the smallest scan window. If one PHY is set to passive scanning and the other to active scanning, passive scanning is chosen for simultaneous scanning.</p>
<ul>
<li><b>1:</b> 1M PHY</li>
<li><b>4:</b> Coded PHY</li>
<li><b>5:</b> 1M PHY and Coded PHY. The stack performs simultaneous scanning on both PHYs. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">discover_mode</td><td>Enum <a class="el" href="a00042.html#ga3830ec233ae145d28d34258bbefc00f4">sl_bt_scanner_discover_mode_t</a>. Bluetooth discovery Mode. Values:<ul>
<li><b>sl_bt_scanner_discover_limited (0x0):</b> Discover only limited discoverable devices.</li>
<li><b>sl_bt_scanner_discover_generic (0x1):</b> Discover limited and generic discoverable devices.</li>
<li><b>sl_bt_scanner_discover_observation (0x2):</b> Discover all devices.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise.</dd></dl>
<p><b>Events</b> </p><ul>
<li><a class="el" href="a00043.html">sl_bt_evt_scanner_scan_report</a> - This event is triggered each time an advertising packet is received. Packets are not filtered in any way, so multiple events will be received for every advertising device in range. </li>
</ul>

</div>
</div>
<a id="gae85f6e0223de24f598843fb9684afbfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae85f6e0223de24f598843fb9684afbfd">&#9670;&nbsp;</a></span>sl_bt_scanner_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_scanner_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop scanning for advertising devices. For more information about the discovery, see the <a class="el" href="a00042.html#gac523df08a9e0ea5de94739609f27324f">sl_bt_scanner_start</a> command.</p>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
