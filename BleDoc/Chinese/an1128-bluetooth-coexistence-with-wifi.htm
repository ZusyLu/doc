<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AN1128: Bluetooth® Coexistence with Wi-Fi®</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s4 { color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 .s5 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .a { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s7 { color: #538DD3; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s8 { color: #538DD3; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s9 { color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 18pt; }
 .h4, h4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s10 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 .s11 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s12 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s13 { color: #7E0054; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s14 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s15 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s16 { color: #7E0054; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s17 { color: #7E0054; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s18 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s19 { color: #3E5FBE; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s21 { color: #005031; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s23 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s24 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s25 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s27 { color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 9pt; }
 .s28 { color: #538DD3; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 h2 { color: #FFF; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 20pt; }
 .s29 { color: #FFF; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s30 { color: #D91E2A; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s31 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s32 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s33 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s34 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s35 { color: #D91E2A; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt;counter-reset: d2 1; }
 #l3> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l4 {padding-left: 0pt;counter-reset: d2 1; }
 #l4> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 li {display: block; }
 #l5 {padding-left: 0pt; }
 #l5> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l6 {padding-left: 0pt;counter-reset: f1 1; }
 #l6> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l8 {padding-left: 0pt;counter-reset: g1 2; }
 #l8> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l9 {padding-left: 0pt;counter-reset: g2 1; }
 #l9> li>*:first-child:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l9> li:first-child>*:first-child:before {counter-increment: g2 0;  }
 #l10 {padding-left: 0pt;counter-reset: h1 1; }
 #l10> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l10> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 #l11 {padding-left: 0pt;counter-reset: h2 1; }
 #l11> li>*:first-child:before {counter-increment: h2; content: counter(h2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l11> li:first-child>*:first-child:before {counter-increment: h2 0;  }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l13 {padding-left: 0pt; }
 #l13> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l14 {padding-left: 0pt; }
 #l14> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l15 {padding-left: 0pt;counter-reset: k1 1; }
 #l15> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l15> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 #l16 {padding-left: 0pt; }
 #l16> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l17 {padding-left: 0pt; }
 #l17> li>*:first-child:before {content: "o "; color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l18 {padding-left: 0pt;counter-reset: g1 2; }
 #l18> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l18> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l19 {padding-left: 0pt;counter-reset: g2 4; }
 #l19> li>*:first-child:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l19> li:first-child>*:first-child:before {counter-increment: g2 0;  }
 #l20 {padding-left: 0pt; }
 #l20> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l21 {padding-left: 0pt; }
 #l21> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l22 {padding-left: 0pt; }
 #l22> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l23 {padding-left: 0pt; }
 #l23> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l24 {padding-left: 0pt;counter-reset: o1 1; }
 #l24> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l24> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 #l25 {padding-left: 0pt;counter-reset: p1 1; }
 #l25> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l25> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 #l26 {padding-left: 0pt;counter-reset: q1 3; }
 #l26> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l26> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 #l27 {padding-left: 0pt;counter-reset: q2 1; }
 #l27> li>*:first-child:before {counter-increment: q2; content: counter(q1, decimal)"."counter(q2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l27> li:first-child>*:first-child:before {counter-increment: q2 0;  }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="127" height="62" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="37" height="37" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_002.png"/></span></p><h1 style="padding-top: 11pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">AN1128: <i>Bluetooth</i>® Coexistence with Wi-Fi®</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="728" height="1" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="206" height="1" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-top: 4pt;padding-bottom: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 11pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="208" height="1" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_005.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s3" style="padding-left: 22pt;text-indent: -9pt;text-align: left;">Configure PTA support for Bluetooth.</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Use application code existence exten- sions.</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">	<span class="s3">Order the Coexistence Backplane Eval- uation Board.</span></p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This application note describes methods to improve coexistence of 2.4 GHz IEEE 802.11b/g/n Wi-Fi and Bluetooth® radios. These techniques are applicable to the EFR32MGx family and EFR32BGx family. This application note assumes you have a</p><p class="s5" style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">basic understanding of how Wi-Fi coexistence is implemented on EFR32 devices. For more information, see <i>UG103.17: Wi-Fi® Coexistence Fundamentals.</i></p><p class="s8" style="padding-top: 9pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark22" class="s25">This application note describes EFR32 Bluetooth coexistence support for Silicon Labs Bluetooth SDK version 3.0.1.0 and Bluetooth Mesh SDK version 1.7.2.0. See </a><a href="#bookmark22" class="a">5 </a><a href="#bookmark22" class="s7">Doc- </a>ument Revision History <span style=" color: #000;">for a summary of key changes in previous revisions of this application note.</span></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Additional details about the implementation of managed coexistence are included in <i>AN1243: Timing and Test Data for EFR32 Coexistence with Wi-Fi, </i>available under non-disclosure from Silicon Labs Sales.</p><h3 style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a name="bookmark0">Contents</a></h3><ol id="l2"><li><p style="padding-top: 12pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark2" class="h4">Introduction </a><h4 href="#bookmark2">2</h4></p></li><li><p style="padding-top: 8pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark8" class="h4">PTA Support Software Setup </a><h4 href="#bookmark8">3</h4></p><ol id="l3"><li><p style="padding-top: 8pt;padding-left: 99pt;text-indent: -54pt;text-align: left;"><a href="#bookmark9" class="s10">Compile Time PTA Setup and Defaults 3</a></p></li><li><p style="padding-top: 8pt;padding-left: 99pt;text-indent: -54pt;text-align: left;"><a href="#bookmark10" class="s10">Run-Time PTA Re-configuration 11</a></p></li><li><p style="padding-top: 8pt;padding-left: 99pt;text-indent: -54pt;text-align: left;"><a href="#bookmark11" class="s10">Run-Time PTA Debug Counters 12</a></p></li><li><p style="padding-top: 8pt;padding-left: 99pt;text-indent: -54pt;text-align: left;"><a href="#bookmark12" class="s10">Coexistence Configuration Setup Examples for Different Wi-Fi/PTA Applications 13</a></p></li></ol></li><li><p style="padding-top: 8pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark17" class="h4">Application Code Coexistence Extensions </a><h4 href="#bookmark17">18</h4></p><ol id="l4"><li><p style="padding-top: 8pt;padding-left: 99pt;text-indent: -54pt;text-align: left;"><a href="#bookmark18" class="s10">Example TX_ACTIVE/RX_ACTIVE 18</a></p></li></ol></li><li><p style="padding-top: 8pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark20" class="h4">Coexistence Backplane Evaluation Board (EVB) </a><h4 href="#bookmark20">19</h4></p></li><li><p style="padding-top: 8pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark22" class="h4">Document Revision History </a><h4 href="#bookmark22">20</h4></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><a name="bookmark1">1. Introduction</a><a name="bookmark2">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">This application note includes the following sections:</p><ul id="l5"><li><p style="padding-top: 8pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark8" class="a">2 PTA Support </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Software Setup </span>describes how to configure the Silicon Labs Packet Traffic Arbitration (PTA) for Bluetooth.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark17" class="a">3 </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Application Code Coexistence Extensions </span>describes how to use the application code existence extensions.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark20" class="a">4 Coexistence Backplane Evaluation Board (EVB)</a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span>explains how to order the EVB for evaluating the Silicon Labs EFR32 software coexistence solution.</p><p class="s12" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Notes:</p><ol id="l6"><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: justify;">Not all coexistence support features are present in SDK versions earlier than Bluetooth 3.0.1.0 and Bluetooth Mesh 1.7.2.0. Users of Bluetooth SDK 2.13.7 or earlier and Bluetooth Mesh SDK 1.7.1 or earlier may see different features from those documented in this application note.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: justify;">Throughput this application note “Bluetooth Low Energy” is referenced as “Bluetooth”.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: justify;">This application note addresses Bluetooth coexistence applications using EFR32 devices as per Bluetooth Core Specification v5.0 Vol 6 “Low Energy Controller” (point-to-point) and as per Bluetooth Specification Mesh Profile v1.0 (mesh network). These two ap- plications have different coexistence considerations and, where necessary, this application note differentiates using the following terms:</p><ul id="l7"><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: justify;">“Bluetooth device” to reference Bluetooth Core Specification v5.0 Vol 6 “Low Energy Controller” (point-to-point) operation</p></li><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: justify;">“Bluetooth mesh device” or “Bluetooth mesh node” to reference Bluetooth Specification Mesh Profile v1.0 (mesh network) oper- ation</p></li></ul></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l8"><li><p class="s11" style="padding-top: 4pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark3">PTA Support Software Setup</a><a name="bookmark8">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 60pt;text-indent: -36pt;text-align: justify;">Note: <span class="p">GPIO interrupt numbers are based on the GPIO pin numbers and not the port. This can cause conflicts if the same pin is selected for different ports—for example, PD15 will conflict with PB15. Silicon Labs recommends avoiding these conflicts. If the conflict exists in hardware, manual macros can be added with the assistance of Silicon Labs Support.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l9"><li><p class="s12" style="padding-top: 8pt;padding-left: 59pt;text-indent: -36pt;text-align: left;"><a name="bookmark4">Compile Time PTA Setup and Defaults</a><a name="bookmark9">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To enable PTA coexistence support, the following steps are required.</p><ol id="l10"><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Create Bluetooth or Bluetooth Mesh project in Simplicity Studio.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Add the PRS component to your project. Double-click the slcp file of your project to open the Project Configurator, and go to the SOFTWARE COMPONENTS tab. Search for PRS, select it, and click <b>Install.</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span><img width="545" height="310" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_006.jpg"/></span></p></li><li><p style="padding-top: 4pt;padding-bottom: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Add the RAIL Utility, Co-existence component to your project. Search for COEX, select <b>RAIL Utility. Co-existence</b>, and click <b>In- stall</b>.</p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span><img width="534" height="307" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_007.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">The coexistence directory under gecko_sdk_3.x/platform/radio/rail_lib/plugin gets populated with the coexistence sources:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span><img width="671" height="328" alt="Graphical user interface, application  Description automatically generated " title="Graphical user interface, application  Description automatically generated " src="an1128-bluetooth-coexistence-with-wifi/Image_008.jpg"/></span></p></li><li><p style="padding-top: 6pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Edit project includes to include additional paths to files added to project:</p><ol id="l11"><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -18pt;text-align: left;">Right-click the project and select <b>Properties</b>.</p></li><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -18pt;text-align: left;">Expand <b>C/C++ General </b>and select <b>Paths and Symbols</b>.</p></li><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Select the <b>Includes </b>tab.</p></li><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">In languages, select the desired C compiler (for example, <b>GNU C</b>).</p></li><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Press <b>add</b>, check <b>Is a workspace path</b>, and enter each of the following paths:</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">/${ProjName}/platform/radio/rail_lib/plugin</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">/${ProjName}/platform/radio/rail_lib/plugin/coexistence/hal/efr32</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;line-height: 181%;text-align: left;">/${ProjName}/platform/radio/rail_lib/plugin/coexistence/protocol/ble For example:</p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;"><span><img width="352" height="213" alt="Enter workspace paths " title="Enter workspace paths " src="an1128-bluetooth-coexistence-with-wifi/Image_009.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;"><span><img width="397" height="37" alt="Workspace paths " title="Workspace paths " src="an1128-bluetooth-coexistence-with-wifi/Image_010.gif"/></span></p></li><li><p style="padding-top: 7pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Click <b>OK </b>and <b>Yes </b>to rebuild index now</p></li></ol></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Add the following #defines to coexistence-hal-config.h:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:39.4909pt" cellspacing="0"><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_OVERRIDE_GPIO_INPUT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_ENABLE</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_DP_TIMER</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(HAL_TIMER_TIMER1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PWM_PRIORITY</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_RETRYRX_ENABLE</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_MAC_FAIL_THRESHOLD</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_REQ_WINDOW</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(500U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PWM_DEFAULT_ENABLED</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_TX_ABORT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_RHO_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_REQ_SHARED</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_DP_PULSE_WIDTH_US</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(20U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PRI_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_TX_HIPRI</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_REQ_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_RX_HIPRI</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_GNT_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_CCA_THRESHOLD</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(4U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PWM_REQ_DUTYCYCLE</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(20U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_RETRYRX_HIPRI</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_RETRYRX_TIMEOUT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(16U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_REQ_BACKOFF</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(15U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PRI_SHARED</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_DP_ENABLED</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PRIORITY_ESCALATION_ENABLE</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_ACKHOLDOFF</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PWM_REQ_PERIOD</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(78U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PHY_ENABLED</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PWM_REQ_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">HAL_COEX_RUNTIME_PHY_SELECT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(1)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s13" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_RX_ACTIVE_PIN</p></td><td style="width:127pt"><p class="s14" style="padding-top: 5pt;padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(14U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_RX_ACTIVE_PORT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortD)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_RX_ACTIVE_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_RX_ACTIVE_CHANNEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(5)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">BSP_COEX_RX_ACTIVE_LOC</p></td><td style="width:127pt"><p class="s14" style="padding-left: 27pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(4)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s13" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PHY_SELECT_PIN</p></td><td style="width:127pt"><p class="s14" style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(14U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PHY_SELECT_PORT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PHY_SELECT_ASSERT_LEVEL</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s13" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:219pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_DEFAULT_PHY_SELECT_TIMEOUT</p></td><td style="width:127pt"><p class="s14" style="padding-left: 26pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(10U)</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="461" height="27" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_011.png"/></span></p><p class="s15" style="text-indent: 0pt;text-align: left;">(gpioPortC)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_GNT_PORT</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;text-align: left;">(9U)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_GNT_PIN</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="461" height="27" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_012.png"/></span></p><p class="s15" style="text-indent: 0pt;text-align: left;">(13U)</p><p class="s15" style="text-indent: 0pt;text-align: left;">(gpioPortD)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_PRI_PIN</span></p><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_PRI_PORT</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="461" height="41" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_013.png"/></span></p><p class="s15" style="text-indent: 0pt;text-align: left;">(11U)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_LOC</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;text-align: left;">(gpioPortD)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_PORT</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;text-align: left;">(12U)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_PIN</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 42pt;text-indent: 0pt;text-align: left;"><span class="s17" style=" background-color: #DFDFDF;">#ifdef </span><span class="s18" style=" background-color: #DFDFDF;">_SILICON_LABS_32B_SERIES_1</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="461" height="27" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_014.png"/></span></p><p class="s15" style="text-indent: 0pt;line-height: 10pt;text-align: left;">(10U)</p><p class="s15" style="text-indent: 0pt;line-height: 10pt;text-align: left;">(gpioPortC)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_REQ_PIN</span></p><p class="s16" style="text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_REQ_PORT</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="461" height="55" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_015.png"/></span></p><p class="s15" style="text-indent: 0pt;text-align: left;">(gpioPortC)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_CC0_PORT</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;text-align: left;">(10U)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_CC0_PIN</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;text-align: left;">(4)</p><p class="s15" style="text-indent: 0pt;text-align: left;">(3)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_REQUEST_INV_CHANNEL</span></p><p class="s16" style="text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_CHANNEL</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;line-height: 10pt;text-align: right;">(15U)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s15" style="text-indent: 0pt;line-height: 10pt;text-align: left;">BSP_COEX_DP_CC0_LOC</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;line-height: 10pt;text-align: left;">#define</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-top: 5pt;padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#else <span class="s19">//!_SILICON_LABS_32B_SERIES_1</span></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_GNT_PIN (3U)</span></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_GNT_PORT (gpioPortC)</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-top: 5pt;padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_PRI_PIN (8U)</span></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_PRI_PORT (gpioPortD)</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_REQ_PIN (10U)</span></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_REQ_PORT (gpioPortC)</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_PIN (11U)</span></p><p class="s16" style="padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_PORT (gpioPortD)</span></p><p class="s16" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">#define <span class="s15">BSP_COEX_DP_CHANNEL (3)</span></p></li><li><p style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Enable and edit new #defines to enable/configure PTA coexistence.</p><ul id="l12"><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Enable the PTA feature.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #define is required:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_ENABLE (1)</p></li><li><p style="padding-top: 7pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">REQUEST pin settings: Enable/disable, polarity, port, and pin</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #defines example enables active-high REQUEST on PC10:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_REQ_PIN (10)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_REQ_PORT (gpioPortC)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_REQ_ASSERT_LEVEL (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 59pt;text-indent: 0pt;line-height: 107%;text-align: left;">Note: <span class="p">In 1-Wire PTA configurations based on GRANT-only, REQUEST is not implemented. If REQUEST is not needed, remove the BSP_COEX_REQ_PORT and BSP_COEX_REQ_PIN #defines from coexistence-hal-config.h.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 56pt;text-indent: -14pt;text-align: left;">REQUEST Window</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: justify;">REQUEST Window adjusts the lead time for REQUEST assertion before first Bluetooth TX or RX operation after REQUEST asserted. A TX operation will proceed if GRANT is asserted at the end of the REQUEST Window. An RX operation will attempt to proceed regardless of GRANT asserted or deasserted as Bluetooth RX does not impact other co-located radios. This feature’s setting needs to at least exceed the maximum time for Wi-Fi/PTA to provide GRANT asserted or deasserted after REQUEST asserted.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #define example sets the REQUEST Window to 500µs:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_REQ_WINDOW (500)</p></li><li><p style="padding-top: 7pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">REQUEST signal is shared.</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #define example disables Shared REQUEST for single-EFR operation.:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;line-height: 185%;text-align: center;">#define HAL_COEX_REQ_SHARED                (0) <span class="p">The following #define example enables Shared REQUEST. </span>#define HAL_COEX_REQ_SHARED               (1)</p></li><li><p style="padding-left: 56pt;text-indent: -14pt;line-height: 10pt;text-align: left;">REQUEST signal max backoff mask</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: justify;">REQUEST signal max backoff determines the random REQUEST delay mask (only valid if REQUEST signal is shared). The random delay (in µs) is computed by masking the internal random variable against the entered mask. The mask should be set to a value of 2n-1 to ensure a continuous random delay range.</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #define sets backoff to recommended value:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_REQ_BACKOFF (15)</p></li><li><p style="padding-top: 7pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">GRANT pin settings: Enable/disable, polarity, port, and pin</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #defines example enables active-low GRANT on PC3:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_GNT_PIN (3)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-top: 5pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_GNT_PORT (gpioPortC)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_GNT_ASSERT_LEVEL (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">Notes:</p><ul id="l13"><li><p style="padding-top: 6pt;padding-left: 78pt;text-indent: -18pt;text-align: left;">Many Wi-Fi/PTA devices use the term WLAN_DENY or BT_DENY and describe as <u>active-high</u>. These active-high deny signals correlate with EFR32 active-low GRANT.</p></li><li><p style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">In 1-Wire PTA configurations based on REQUEST-only, GRANT is not implemented. If GRANT is not needed, remove the BSP_COEX_GNT_PORT and BSP_COEX_GNT_PIN #defines from coexistence-hal-config.h.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Abort transmission mid packet if GRANT is lost.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">If enabled, losing GRANT (or RHO asserted) during a Bluetooth TX will abort the Bluetooth TX. If not enabled, losing GRANT (or RHO asserted) after the start of a Bluetooth TX will not abort the Bluetooth TX.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example disables <i>Abort transmission mid packet if GRANT is lost</i>:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_TX_ABORT (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #defines example enables <i>Abort transmission mid packet if GRANT is lost</i>:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_TX_ABORT (1)</p></li><li><p style="padding-top: 7pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">PRIORITY pin settings: Enable/disable, polarity, port, and pin</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example enables active-high PRIORITY on PD12:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_PRI_PIN (8)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_PRI_PORT (gpioPortD)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_PRI_ASSERT_LEVEL (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 60pt;text-indent: 0pt;line-height: 107%;text-align: left;">Note: <span class="p">In 1-Wire or 2-Wire PTA configurations, PRIORITY is not implemented. If PRIORITY is not needed, remove the BSP_COEX_PRI_PORT and BSP_COEX_PRI_PIN #defines from coexistence-hal-config.h.</span></p></li><li><p style="padding-top: 5pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">PRIORITY Assert Enable</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #define example defaults PRIORITY to always deasserted:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PRIORITY_DEFAULT (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #define example defaults PRIORITY to asserted or deasserted based on link layer priority and <i>threshold_coex_pri</i></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">as described below:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PRIORITY_DEFAULT (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 6pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">PRIORITY signal is shared</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #define example disables Shared PRIORITY for single-EFR operation.</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;line-height: 186%;text-align: center;">#define HAL_COEX_PRI_SHARED                (0) <span class="p">The following #define example enables Shared PRIORITY. </span>#define HAL_COEX_PRI_SHARED               (1)</p></li><li><p style="padding-left: 56pt;text-indent: -14pt;line-height: 10pt;text-align: left;">RHO pin settings: enable/disable, polarity, port and pin</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">Radio hold-off (RHO) is effectively a second GRANT signal. However, when RHO is asserted, Bluetooth TX operations are blocked.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example enables active-low RHO on PC11:</p><p class="s15" style="padding-top: 8pt;padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_RHO_PIN (11)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_RHO_PORT (gpioPortC)</p><p class="s15" style="padding-left: 52pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_RHO_ASSERT_LEVEL (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 59pt;text-indent: 0pt;line-height: 107%;text-align: left;">Note: <span class="p">In most EFR32BG coexistence applications, RHO is not needed. If RHO is not needed, remove the BSP_COEX_RHO_PORT and BSP_COEX_RHO_PIN #defines from coexistence-hal-config.h.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 5pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">PWM enabled at reset, period, duty-cycle, priority, polarity, port and pin.</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: justify;">PWM asserts REQUEST and optionally PRIORITY at a regular period and duty-cycle. PWM can be employed to create idle Wi- Fi TX windows to improve 100% Passive SCAN performance and is essential for Bluetooth mesh using ADV-Bearer to allow sufficient idle Wi-Fi TX time windows.</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #defines example disables PWM at reset:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PWM_DEFAULT_ENABLED (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #defines example enables PWM at reset:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PWM_DEFAULT_ENABLED (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 59pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">An issue where enabling PWM at reset or later at run-time prevent TX operations, as a result </span>PWM should not be used in that case<span class="p">. This issue will be fixed in a future release.</span></p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example sets PWM period (ms) and PWM duty-cycle (%) at reset:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PWM_REQ_PERIOD (39U)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PWM_REQ_DUTYCYCLE (20U)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 59pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Note<span class="p">: PWM period should not be an integer sub-multiple of Wi-Fi beacon (typically 102.4 ms). This is required to prevent Wi- Fi from losing many beacons and disassociating. Also, the lowest duty-cycle providing sufficient BT performance is recom- mended as higher PWM duty-cycles reduce RF time available to Wi-Fi with associated reduction in Wi-Fi throughput.</span></p><p style="padding-top: 7pt;padding-left: 59pt;text-indent: 0pt;text-align: justify;">However, for Bluetooth mesh using ADV-Bearer method, a period of 39 ms and duty-cycle greater than 44% may be required to receive 99% of ADV-bearer messages (exact PWM requirement depends on Bluetooth mesh retry settings). If possible, Bluetooth mesh should use GATT-bearer method from the co-located Bluetooth mesh radio to relay node.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example deasserts PRIORITY during PWM REQUEST asserted:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PWM_PRIORITY (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">The following #defines example deasserts PRIORITY during PWM REQUEST asserted:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_PWM_PRIORITY (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: justify;">If HAL_COEX_PWM_PRIORITY is set to 1, then REQUEST is “Shared REQUEST” between multiple EFR32 radios and is used to arbitrate which EFR32 controls PTA interface to Wi-Fi. Operating PWM on Shared REQUEST is incompatible with arbitration. As such, the PWM_REQUEST pin becomes necessary. Shared REQUEST interconnects all EFR32 radios for arbitration and PWM_REQUEST is connected to all EFR32 radios, but drives the REQUEST signal to Wi-Fi/PTA.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: justify;">If HAL_COEX_PWM_PRIORITY is set to 0, then REQUEST is not shared and is used to drive all PTA request to Wi-Fi, both from radio states requests and from PWM.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example enables active-high PWM_REQUEST on PC6:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_PWM_REQ_PIN (6U)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_PWM_REQ_PORT (gpioPortC) #define BSP_COEX_PWM_REQ_ASSERT_LEVEL (1)</p><p class="s12" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Note: <span class="p">If PWM_REQUEST is not needed (no Shared REQUEST), then remove the BSP_COEX_PWM_REQ_PIN, BSP_COEX_PWM_REQ_PPORT, and BSP_ BSP_COEX_PWM_REQ_ASSERT_LEVEL #defines from coexistence-hal-con- fig.h.</span></p></li><li><p style="padding-top: 5pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Directional PRIORITY compiled into image, enabled at reset, pulse width, TIMER, and PRS resources:</p></li></ul><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: justify;">PRIORITY can be “static” where it is asserted or deasserted for the entire TX/RX/… or RX/TX/… event. Directional Priority can be used to provide priority information and radio state (TX or RX). The EFR32 implementation of Directional PRIORITY is ac- complished using static PRIORITY, REQUEST (or PWM_REQUEST if multi-EFR32 using Shared REQUEST), a TIMER, and up to 6 PRS channels. Because on-chip hardware resources are used with this feature, it is very important to understand which are used and ensure no conflicts. Directional PRIORITY is only supported for PTA implementations where REQUEST (PWM_REQUEST) and PRIORITY are active high.</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: justify;">If enabled, Directional PRIORITY drives a programmable pulse-width (1µs to 255µs) to indicate the priority of TX/RX/… or the priority of RX/TX/… event. Following pulse, Directional PRIORITY signal is low for radio in RX state and high for radio in TX</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: justify;">state. The Wi-Fi/PTA device can monitor the Directional PRIORITY signals to understand priority of TX/RX/… or RX/TX/… event and the current radio state. In this manner, simultaneous TX/TX and RX/RX can be allowed and conflicting TX/RX and RX/TX events can be prioritized by PTA mechanism.</p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The following #defines example prevents compiling Directional PRIORITY into application:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_DP_ENABLE (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 107%;text-align: justify;">The following #defines example compiles Directional PRIORITY into application and initializes hardware resources as specified by subsequent #defines:</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_DP_ENABLE (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 60pt;text-indent: -36pt;text-align: left;">Note: <span class="p">REQUEST will assert on valid BLE preamble/sync. REQUEST will also stay asserted through any follow-up TX/RX/... required for this RX packet.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: justify;">The following #defines example sets Directional PRIORITY pulse-width to 20 µs. If set to 0, Directional PRIORITY reverts to Static PRIORITY.</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_DP_PULSE_WIDTH_US (20U)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: justify;">The following #defines example selects the TIMER used by to generate Directional PRIORITY pulse. HAL_TIMER_TIMER0 is reserved for SDK operation and is unavailable. HAL_TIMER_TIMER1 is typically available on all EFR32 devices. HAL_TIMER_TIMER0 and HAL_TIMER_WTIMER1 are available on some EFR32 devices. See the datasheet and reference manual on EFR32 design for details.</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_DP_TIMER (HAL_TIMER_TIMER1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: justify;">The following #defines example selects the base PRS channel, REQUEST invert PRS channel, and RACPAEN invert channel used to create Directional PRIORITY. By default RAIL reserves PRS channel 7 for clock synchronization, but this PRS channel reservation can be configured through the <span class="s15">RAILCb_ConfigSleepTimerSync() </span>callback API.</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_DP_CHANNEL (3)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_DP_REQUEST_INV_CHANNEL (4)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_DP_RACPAEN_INV_CHANNEL (8)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 59pt;text-indent: 0pt;text-align: justify;">The following #defines example selects the pin and port used to drive Directional PRIORITY and the LOC value for PRS channel to drive that pin. Consult the selected EFR32 datasheet and reference manual for the LOC required for PRS channel and GPIO pin. Not all GPIOs can be driven by any PRS channel. The PRS base channel must be selected as a channel capable of driving the desired GPIO.</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_DP_PIN (11U)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_DP_PORT (gpioPortD)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 59pt;text-indent: 0pt;text-align: justify;">#define BSP_COEX_DP_LOC (11U)The following #defines example selects the pin and port used to drive Directional PRIORITY TIMER to start pulse. In Shared REQUEST, this pin and port must match PWM_REQUEST pin and port. In REQUEST not shared, this pin and port must match REQUEST pin and port. Consult the selected EFR32 datasheet and refer- ence manual for the LOC required for the GPIO to drive the selected TIMER’s CC0 input (valid for Series 1 only):</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_DP_CC0_PIN (6U)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_DP_CC0_PORT (gpioPortC)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_DP_CC0_LOC (11U)</p></li><li><p style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Add code to initialize and configure coexistence:</p></li></ol><ul id="l14"><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Add include file to app.c:</p><p class="s15" style="padding-top: 7pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">#include &quot;coexistence-ble.h&quot;</p></li><li><p style="padding-top: 7pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Add one of following variable definition to app.c:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">uint8 myCoexConfig[] = { 255, 255, 39, 20 }; // for duty-cycled SCAN and no BT Mesh ADV-</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">Bearer</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">or</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">uint8 myCoexConfig[] = { 175, 175, 39, 20 }; // for 100% Passive SCAN or BT Mesh ADV-Bearer</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">which is based on the following definition:</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">typedef struct{</p><p class="s15" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">uint8_t threshold_coex_pri; /** Priority line is toggled if priority is below this*/ uint8_t threshold_coex_req; /** Coex request is toggled if priority is below this*/ uint8_t coex_pwm_period; /** PWM Period in ms, if 0 pwm is disabled*/</p><p class="s15" style="padding-left: 71pt;text-indent: 0pt;line-height: 10pt;text-align: left;">uint8_t coex_pwm_dutycycle; /** PWM dutycycle percentage, if 0 pwm is disabled, if &gt;= 100</p><p class="s15" style="padding-left: 254pt;text-indent: 0pt;line-height: 10pt;text-align: left;">pwm line is always enabled*/</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">}sl_bt_ll_coex_config;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">//Default coex configuration</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define SL_BT_COEX_DEFAULT_CONFIG { 175, 255, HAL_COEX_PWM_REQ_PERIOD, HAL_COEX_PWM_REQ_DUTYCYCLE</p></li><li><p style="padding-top: 7pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Add one of following variable definition to app.c:</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">// for duty-cycled SCAN and no BT Mesh ADV-Bearer and default link layer priorities uint8 myLinkLayerPriorities[] = { 191, 143, 175, 127, 135, 0, 55, 15, 16, 16, 0, 4, 4 }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">or</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">// for duty-cycled SCAN and no BT Mesh ADV-Bearer</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">uint8 myLinkLayerPriorities[] = { 223, 175, 174, 127, 135, 0, 55, 15, 16, 16, 0, 4, 4 };</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">which is based on following definition:</p><p class="s16" style="padding-top: 6pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">typedef struct <span class="s15">{</span></p><p class="s21" style="padding-left: 95pt;text-indent: 0pt;text-align: left;">uint8_t <span style=" color: #0000C0;">scan_min</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">scan_max</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">adv_min</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">adv_max</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">conn_min</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">conn_max</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">init_min</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">init_max</span><span style=" color: #000;">;</span></p><p class="s21" style="padding-left: 95pt;text-indent: 0pt;text-align: left;">uint8_t <span style=" color: #0000C0;">rail_mapping_offset</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">rail_mapping_range</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">afh_scan_interval</span><span style=" color: #000;">; </span>uint8_t <span style=" color: #0000C0;">adv_step</span><span style=" color: #000;">;</span></p><p class="s21" style="padding-left: 95pt;text-indent: 0pt;text-align: left;">uint8_t <span style=" color: #0000C0;">scan_step</span><span style=" color: #000;">;</span></p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}<span style=" color: #005031;">sl_bt_bluetooth_ll_priorities</span>;</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">//Default priority configuration</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define SL_BT_BLUETOOTH_PRIORITIES_DEFAULT { 191, 143, 175, 127, 135, 0, 55, 15, 16, 16, 0,</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">4, 4 }</p></li><li><p style="padding-top: 7pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Enable or disable Passive SCAN.</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define SCAN_PASSIVE (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;">or</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">#define SCAN_PASSIVE (1)</p></li><li><p style="padding-top: 7pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Add point to custom link layer table in config variable in sl_bluetooth.c (instead of the default stack definition SL_BT_CONFIG_DEFAULT):</p><p class="s15" style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">static const sl_bt_configuration_t config = {</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.config_flags = SL_BT_CONFIG_FLAGS, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.sleep.flags = SL_BT_SLEEP_FLAGS_DEEP_SLEEP_ENABLE, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.max_connections = SL_BT_CONFIG_MAX_CONNECTIONS, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.max_advertisers = SL_BT_CONFIG_MAX_ADVERTISERS, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.max_periodic_sync = SL_BT_CONFIG_MAX_PERIODIC_ADVERTISING_SYNC, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.mem_pool = sl_bt_default_mem_pool, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.mem_pool_size = <span class="s16">sizeof</span>(sl_bt_default_mem_pool), \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">.bluetooth.sleep_clock_accuracy = SL_BT_CONFIG_SLEEP_CLOCK_ACCURACY, \ <b>// use modified Link Layer Priorities</b></p><p class="s23" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">.bluetooth.linklayer_priorities = myLinkLayerPriorities, // default = NULL</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-top: 5pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.scheduler_callback = SL_BT_CONFIG_LL_CALLBACK, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.stack_schedule_callback = SL_BT_CONFIG_STACK_CALLBACK, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.gattdb = &amp;bg_gattdb_data, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.max_timers = SL_BT_CONFIG_MAX_SOFTWARE_TIMERS, \</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.rf.tx_gain = SL_BT_CONFIG_RF_PATH_GAIN_TX, \</p><p class="s24" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">.rf.rx_gain = SL_BT_CONFIG_RF_PATH_GAIN_RX,<span class="s15">};</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 8pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">Add the coexistence initialization function call and initialize threshold_coex_req and threshold_code_pri within main() in main.c.</p></li></ul><p class="s15" style="padding-top: 7pt;padding-left: 71pt;text-indent: 0pt;line-height: 10pt;text-align: left;">…</p><p class="s15" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">// Initialize stack sl_bt_init();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">// Initialize coexistence sl_bt_init_coex_hal();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 71pt;text-indent: 0pt;text-align: left;">// Initialize threshold_coex_req and threshold_code_pri sl_bt_coex_set_parameters(myCoexConfig[0],myCoexConfig[1],myCoexConfig[2],myCoexConfig[3]);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s12" style="padding-left: 59pt;text-indent: -36pt;text-align: left;"><a name="bookmark5">Run-Time PTA Re-configuration</a><a name="bookmark10">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The following PTA options can also be re-configured at runtime:</p><ol id="l15"><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Disable/Enable the PTA feature.</p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">At runtime, the following code disables the PTA feature:</p><p class="s15" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_bt_coex_set_options(SL_COEX_OPTION_ENABLE,0);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;">At runtime, the following code enables the PTA feature:</p><p class="s15" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_bt_coex_set_options(SL_BT_COEX_OPTION_ENABLE, 1);</p></li><li><p style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">REQUEST Window</p><p style="padding-top: 3pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">At runtime, the following code can be used to change the REQUEST_WINDOW:</p><p class="s15" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_bt_coex_set_options(SL_BT_COEX_OPTION_REQUEST_WINDOW_MASK, desired_request_window &lt;&lt; SL_BT_COEX_OPTION_REQUEST_WINDOW_SHIFT);</p><p style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">Where <span class="s15">desired_request_window </span>is the REQUEST_WINDOW in µs.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Abort transmission mid packet if GRANT is lost.</p><p style="padding-top: 3pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">At runtime, the following code disables Abort transmission mid packet if GRANT is lost:</p><p class="s15" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_bt_coex_set_options(SL_BT_COEX_OPTION_TX_ABORT, 0);</p><p style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">At runtime, the following code enables Abort transmission mid packet if GRANT is lost:</p><p class="s15" style="padding-top: 8pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_bt_coex_set_options(SL_BT_COEX_OPTION_TX_ABORT, 1);</p></li><li><p style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">PRIORITY Escalation capability</p><p style="padding-top: 3pt;padding-left: 38pt;text-indent: 3pt;line-height: 176%;text-align: left;">At runtime, the following code disables PRIORITY assertion: <span class="s15">sl_bt_coex_set_options(SL_BT_COEX_OPTION_HIGH_PRIORITY, 0); </span>At runtime, the following code enables PRIORITY assertion: <span class="s15">sl_bt_coex_set_options(SL_BT_COEX_OPTION_HIGH_PRIORITY, 1);</span></p></li><li><p style="padding-left: 42pt;text-indent: -18pt;line-height: 10pt;text-align: justify;">Channel Map Masking</p><p style="padding-top: 3pt;padding-left: 42pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark14" class="s25">If an EFR32BG device enters CONNECTION state as a master device, it controls which of the 37 data channels are used during the AFH. As a CONNECTION master, the EFR32BG can also update this channel map and communicate this update to a slave device. This feature can be used to make Bluetooth avoid being co-channel to Wi-Fi. See </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Figure 2-2 </span>for additional details.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">If EFR32 becomes the connection master, the Bluetooth channel map can be specified using this function call:</p><p class="s15" style="padding-top: 8pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_status sl_bt_gap_set_data_channel_classification(size_t channel_map_len, const uint8_t* channel_map)</p><p style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">This command can be used to specify a channel classification for data channels. This classification persists until overwritten with a subsequent command or until the system is reset.</p><p style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;"><span class="s15">channel_map </span>is 5 bytes and contains 37 1-bit fields. The <i>n</i>th such field (in the range 0 to 36) contains the value for the link layer channel index <i>n</i>:</p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">0: Channel <i>n </i>is bad.</p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">1: Channel <i>n </i>is unknown.</p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">The most significant bits are reserved and shall be set to 0 for future use. At least two channels shall be marked as unknown.</p></li><li><p class="s15" style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">threshold_coex_req, threshold_code_pri, pwm_period, and pwm_dutycycle</p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">It may be required during application execution to change the two coex thresholds and PWM period/duty-cycle. These settings can be changed at run time using this function call:</p><p class="s15" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_status sl_bt_coex_set_parameters(uint8_t priority, uint8_t request, uint8_t pwm_period, uint8_t pwm_dutycycle)</p></li><li><p style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Link layer Priority table.</p></li></ol><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">It may be required during application execution to change the link layer priority table. This table can be changed at run time using this functional call:</p><p class="s15" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">sl_status_t sl_bt_system_linklayer_configure (uint8 key,uint8 data_len, const uint8* data)</p><p style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">where <span class="s15">data </span>is an array containing:</p><p class="s23" style="padding-top: 3pt;padding-left: 53pt;text-indent: -11pt;line-height: 134%;text-align: left;">typedef struct <span class="s15">{ uint8_t scan_min; uint8_t scan_max; uint8_t adv_min; uint8_t adv_max; uint8_t conn_min; uint8_t conn_max; uint8_t init_min; uint8_t init_max;</span></p><p class="s15" style="padding-left: 53pt;text-indent: 0pt;line-height: 133%;text-align: left;">uint8_t rail_mapping_offset; uint8_t rail_mapping_range; uint8_t afh_scan_interval; uint8_t adv_step;</p><p class="s15" style="padding-left: 53pt;text-indent: 0pt;text-align: left;">uint8_t scan_step;</p><p class="s15" style="padding-top: 3pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">} sl_bt_bluetooth_ll_priorities;</p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 108%;text-align: left;">This full array is 17 bytes in length. However, if <span class="s15">data_len </span>is less than 17, only first <span class="s15">data_len </span>entries will be modified. For example, if <span class="s15">data_len</span>=2, only <span class="s15">scan_min </span>and <span class="s15">scan_max </span>are updated.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s12" style="padding-left: 59pt;text-indent: -36pt;text-align: left;"><a name="bookmark6">Run-Time PTA Debug Counters</a><a name="bookmark11">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">At runtime, PTA Debug Counters are also available and can be accessed and reset via the following function:</p><p class="s15" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">status_t sl_bt_system_get_counters(uint8_t reset, uint16_t *tx_packuint8_t key, size_t data_len, const uint8_t* dataets, uint16_t *rx_packets, uint16_t *crc_errors, uint16_t *failures);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">where:</p></li></ol></li></ol></li><li><p class="s15" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">reset = 0 <span class="p">leaves counters unchanged</span></p></li><li><p class="s15" style="padding-top: 3pt;padding-left: 60pt;text-indent: -36pt;line-height: 169%;text-align: left;">reset = 1 <span class="p">resets all counters to 0 (after reading current counter values) where, since startup or last reset:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l16"><li><p class="s15" style="padding-top: 4pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">result <span class="p">is success (== 0) or failure (!= 0) of </span>sl_bt_system_get_counters() <span class="p">command</span></p></li><li><p class="s15" style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">tx_packets <span class="p">is the number of successful packets transmitted.</span></p></li><li><p class="s15" style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">rx_packets <span class="p">is the number of successful packets received.</span></p></li><li><p class="s15" style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">crc_errors <span class="p">is the number of packets received with CRC failures.</span></p></li><li><p class="s15" style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">failures <span class="p">is the number of packets failures, which includes:</span></p><ul id="l17"><li><p style="padding-left: 95pt;text-indent: -18pt;line-height: 11pt;text-align: left;">TX/RX abort</p></li><li><p style="padding-left: 95pt;text-indent: -18pt;line-height: 11pt;text-align: left;">Scheduler failures</p></li><li><p style="padding-left: 95pt;text-indent: -18pt;line-height: 11pt;text-align: left;">Shared REQUEST busy, GRANT denial, or RHO asserted, including Abort TX</p></li><li><p style="padding-left: 95pt;text-indent: -18pt;line-height: 11pt;text-align: left;">RX buffer overflow</p></li><li><p style="padding-left: 95pt;text-indent: -18pt;line-height: 11pt;text-align: left;"><a name="bookmark7">TX buffer underflow</a><a name="bookmark12">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l18"><ol id="l19"><li><p class="s12" style="padding-left: 59pt;text-indent: -36pt;text-align: left;">Coexistence Configuration Setup Examples for Different Wi-Fi/PTA Applications</p></li></ol></ol><p class="s12" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Example 1: Configure EFR32 PTA support to operate as single EFR32 with typical 3-Wire Wi-Fi/PTA (for Series 1)</p></li></ul></li></ul></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Single EFR32 radio</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">REQUEST unshared, active high, PC10</p><ul id="l20"><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Compatible 3-Wire Wi-Fi/PTA devices sometimes refer to this signal as RF_ACTIVE or BT_ACTIVE (active high)</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">GRANT, active low, PF3</p><ul id="l21"><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Compatible 3-Wire Wi-Fi/PTA devices sometimes refer to this signal as WLAN_DENY (deny is active high, making grant active low)</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">PRIORITY, active high, PD12</p><ul id="l22"><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">Compatible 3-Wire Wi-Fi/PTA devices sometimes refer to this signal as RF_STATUS or BT_STATUS (active high)</p></li><li><p style="padding-top: 3pt;padding-left: 56pt;text-indent: -14pt;text-align: left;">PRIORITY is static, not directional. If operated with a 3-Wire Wi-Fi/PTA expecting directional:</p><ul id="l23"><li><p style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">Static high PRIORITY is interpreted as high PRIORITY and always in TX mode, regardless of actual TX or RX</p></li><li><p style="padding-top: 3pt;padding-left: 77pt;text-indent: -18pt;text-align: left;">Static low PRIORITY is interpreted as low PRIORITY and always in RX mode, regardless of actual TX or RX</p></li></ul></li></ul></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">REQUEST_WINDOW is 50 µs</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Disabled Abort transmission mid packet if GRANT is lost</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">PRIORITY is always high</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">RHO unused</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The required #defines in coexistence-hal-config.h are:</p><p class="s15" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">// $[COEX]</p><table style="border-collapse:collapse;margin-left:21.5pt" cellspacing="0"><tr style="height:31pt"><td style="width:43pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">HAL_COEX_ENABLE</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_REQ_PIN</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(10U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_REQ_PORT</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_REQ_ASSERT_LEVEL</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_REQ_WINDOW</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(50U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_REQ_SHARED</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 10pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">HAL_COEX_REQ_BACKOFF</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(15U)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s14" style="padding-top: 4pt;padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-top: 4pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_GNT_PIN</p></td><td style="width:116pt"><p class="s14" style="padding-top: 4pt;padding-left: 54pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(3U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_GNT_PORT</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortF)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_GNT_ASSERT_LEVEL</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 10pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">HAL_COEX_TX_ABORT</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(0)</p></td></tr><tr style="height:16pt"><td style="width:43pt"><p class="s14" style="padding-top: 4pt;padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-top: 4pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PRI_PIN</p></td><td style="width:116pt"><p class="s14" style="padding-top: 4pt;padding-left: 54pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(12U)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PRI_PORT</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortD)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PRI_ASSERT_LEVEL</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PRIORITY_DEFAULT</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:43pt"><p class="s14" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">#define</p></td><td style="width:192pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_PRI_SHARED</p></td><td style="width:116pt"><p class="s14" style="padding-left: 53pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">//#define BSP_COEX_RHO_PIN (11U)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">//#define BSP_COEX_RHO_PORT (gpioPortC)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">//#define BSP_COEX_RHO_ASSERT_LEVEL (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.5pt" cellspacing="0"><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: center;">#define HA</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">L_COEX_PWM_DEFAULT_ENABLED</p></td><td style="width:142pt"><p class="s14" style="padding-left: 32pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: center;">#define HA</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">L_COEX_PWM_REQ_PERIOD</p></td><td style="width:142pt"><p class="s14" style="padding-left: 32pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(39U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: center;">#define HA</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">L_COEX_PWM_REQ_DUTYCYCLE</p></td><td style="width:142pt"><p class="s14" style="padding-left: 32pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(20U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: center;">#define HA</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">L_COEX_PWM_PRIORITY</p></td><td style="width:142pt"><p class="s14" style="padding-left: 32pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PWM_REQ_PIN</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(6U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_PWM_REQ_PORT</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:16pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 10pt;text-align: left;">BSP_COEX_PWM_REQ_ASSERT_LEVEL</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(1)</p></td></tr><tr style="height:16pt"><td style="width:57pt"><p class="s14" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: center;">#define HA</p></td><td style="width:200pt"><p class="s14" style="padding-top: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">L_COEX_DP_ENABLED</p></td><td style="width:142pt"><p class="s14" style="padding-top: 5pt;padding-left: 32pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_DP_PULSE_WIDTH_US</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(20U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">HAL_COEX_DP_TIMER</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(HAL_TIMER_TIMER1)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_CHANNEL</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(3)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_REQUEST_INV_CHANNEL</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(4)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_RACPAEN_INV_CHANNEL</p></td><td style="width:142pt"><p class="s14" style="padding-left: 37pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(8)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_PIN</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(12U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_PORT</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortD)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_LOC</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(11U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_CC0_PIN</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(6U)</p></td></tr><tr style="height:11pt"><td style="width:57pt"><p class="s14" style="padding-left: 1pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">//#define</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;line-height: 9pt;text-align: left;">BSP_COEX_DP_CC0_PORT</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:21pt"><td style="width:57pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">//#define</p><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">// [COEX]$</p></td><td style="width:200pt"><p class="s14" style="text-indent: 0pt;text-align: left;">BSP_COEX_DP_CC0_LOC</p></td><td style="width:142pt"><p class="s14" style="padding-left: 43pt;text-indent: 0pt;text-align: left;">(11U)</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The logic analyzer capture in the following figure shows the PTA interface, Wi-Fi TX state, and EFR32 radio state for an EFR32 radio configured for typical 3-Wire Wi-Fi/PTA during a CONNECTION event (slave):</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;"><span><img width="629" height="309" alt="Example CONNECTION event (slave) for Single EFR32 typical 3-Wire Wi-Fi/PTA Logic Analyzer Capture " title="Example CONNECTION event (slave) for Single EFR32 typical 3-Wire Wi-Fi/PTA Logic Analyzer Capture " src="an1128-bluetooth-coexistence-with-wifi/Image_016.jpg"/></span></p><p class="s12" style="padding-top: 8pt;padding-left: 49pt;text-indent: 0pt;text-align: left;"><a name="bookmark13">Figure 2-1. Example CONNECTION event (slave) for Single EFR32 typical 3-Wire Wi-Fi/PTA Logic Analyzer Capture</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">where:</p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">REQUEST: <span class="p">active high, push-pull REQUEST output</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">nGRANT: <span class="p">active low GRANT input</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">PRIORITY: <span class="p">active high PRIORITY output</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx TX ACTIVE: <a href="#bookmark18" class="s25">EFR32 TX Active control signal (configured via sample code in section </a><a href="#bookmark18" class="a">3.1 Example </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">TX_ACTIVE/RX_ACTIVE</span><span class="p">)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx RX ACTIVE: <a href="#bookmark18" class="s25">EFR32 RX Active control signal (configured via sample code in section </a><a href="#bookmark18" class="a">3.1 Example </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">TX_ACTIVE/RX_ACTIVE</span><span class="p">)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx PTI FRAME: <span class="p">EFR32 Frame Control Data Frame signal (packet trace frame/synch)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx PTI DATA: <span class="p">EFR32 Frame Control Data Out signal (packet trace data)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">WiFi TX ACTIVE: <span class="p">Wi-Fi TX Active signal</span></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="#bookmark13" class="s25">The logic analyzer sequence in </a>Figure 2-1 shows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l24"><li><p style="padding-top: 4pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Wi-Fi is transmitting and EFR32BG asserts REQUEST, then high PRIORITY.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">GRANT is momentarily deasserted by Wi-Fi/PTA but is reasserted as Wi-Fi finished.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">EFR32 radio enables RX mode awaiting master TX.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">EFR32 radio receives the master TX.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">EFR32 radio exits receive mode.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">At start of 150µs IFS, EFR32 radio transmits back to master.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">After transmit, EFR32 reasserts PRIORITY and then REQUEST.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">Wi-Fi resumes transmission.</p></li></ol><p class="s12" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Example 2: Configure EFR32 PTA support to operate with multi-radio 2-Wire PTA with active-low REQUEST (for Series 1)</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Multiple EFR32 radios (external 1 kΩ ±5% pull-up required on REQUEST)</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">REQUEST shared, active low, PC10</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">GRANT, active low, PF3</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">PRIORITY unused</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">REQUEST_WINDOW is 50 µs</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Disabled Abort transmission mid packet if GRANT is lost</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">RHO unused</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The required #defines in coexistence-hal-config.h are:</p><p class="s15" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// $[COEX]</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define HAL_COEX_ENABLE (1)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_REQ_PIN (10U)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_REQ_PORT (gpioPortC)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_REQ_ASSERT_LEVEL (0)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define HAL_COEX_REQ_WINDOW (50U)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define HAL_COEX_REQ_SHARED (1)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define HAL_COEX_REQ_BACKOFF (15U)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">#define BSP_COEX_GNT_PIN (3U)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_GNT_PORT (gpioPortF)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define BSP_COEX_GNT_ASSERT_LEVEL (0)</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">#define HAL_COEX_TX_ABORT (0)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:21.5pt" cellspacing="0"><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_PRI_PIN</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(12U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_PRI_PORT</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortD)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_PRI_ASSERT_LEVEL</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define HAL_COEX_PRIORITY_DEFAULT</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(1)</p></td></tr><tr style="height:16pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">//#define HAL_COEX_PRI_SHARED</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">(0)</p></td></tr><tr style="height:16pt"><td style="width:254pt"><p class="s14" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_RHO_PIN</p></td><td style="width:134pt"><p class="s14" style="padding-top: 5pt;padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(11U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_RHO_PORT</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:16pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">//#define BSP_COEX_RHO_ASSERT_LEVEL</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">(1)</p></td></tr><tr style="height:16pt"><td style="width:254pt"><p class="s14" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define HAL_COEX_PWM_DEFAULT_ENABLED</p></td><td style="width:134pt"><p class="s14" style="padding-top: 5pt;padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define HAL_COEX_PWM_REQ_PERIOD</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(78U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define HAL_COEX_PWM_REQ_DUTYCYCLE</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(20U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define HAL_COEX_PWM_PRIORITY</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_PWM_REQ_PIN</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(6U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_PWM_REQ_PORT</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:16pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">//#define BSP_COEX_PWM_REQ_ASSERT_LEVEL</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">(1)</p></td></tr><tr style="height:16pt"><td style="width:254pt"><p class="s14" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">#define HAL_COEX_DP_ENABLED</p></td><td style="width:134pt"><p class="s14" style="padding-top: 5pt;padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(0)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define HAL_COEX_DP_PULSE_WIDTH_US</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(20U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define HAL_COEX_DP_TIMER</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(HAL_TIMER_TIMER1)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_CHANNEL</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(3)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_REQUEST_INV_CHANNEL</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(4)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_RACPAEN_INV_CHANNEL</p></td><td style="width:134pt"><p class="s14" style="padding-left: 29pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(8)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_PIN</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(12U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_PORT</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortD)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_LOC</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(11U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_CC0_PIN</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(6U)</p></td></tr><tr style="height:11pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">//#define BSP_COEX_DP_CC0_PORT</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(gpioPortC)</p></td></tr><tr style="height:21pt"><td style="width:254pt"><p class="s14" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">//#define BSP_COEX_DP_CC0_LOC</p><p class="s14" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">// [COEX]$</p></td><td style="width:134pt"><p class="s14" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">(11U)</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a href="#bookmark14" class="s25">The logic analyzer capture in </a>Figure 2-2 shows the PTA interface, Wi-Fi radio state, and EFR32 radio state for an EFR32 radio configured for multi-radio 2-Wire PTA with active-low REQUEST:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 84pt;text-indent: 0pt;text-align: left;"><span><img width="558" height="278" alt="Example CONNECTION event (master) for Multi-EFR32 2-Wire Wi-Fi/PTA Logic Analyzer Capture (first anchor point in CONNECTION, using active-low REQUEST) " title="Example CONNECTION event (master) for Multi-EFR32 2-Wire Wi-Fi/PTA Logic Analyzer Capture (first anchor point in CONNECTION, using active-low REQUEST) " src="an1128-bluetooth-coexistence-with-wifi/Image_017.jpg"/></span></p><p class="s12" style="padding-top: 6pt;padding-left: 156pt;text-indent: -92pt;text-align: left;"><a name="bookmark14">Figure 2-2. Example CONNECTION event (master) for Multi-EFR32 2-Wire Wi-Fi/PTA Logic Analyzer Capture (first anchor point in CONNECTION, using </a><u>active-low REQUEST</u>)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">where:</p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">REQUEST: <span class="p">active low, shared (open-drain) REQUEST input/output</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">GRANT: <span class="p">active low GRANT input</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx TX ACTIVE: <a href="#bookmark18" class="s25">EFR32 TX Active control signal (configured via sample code in section </a><a href="#bookmark18" class="a">3.1 Example </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">TX_ACTIVE/RX_ACTIVE</span><span class="p">)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx RX ACTIVE: <a href="#bookmark18" class="s25">EFR32 RX Active control signal (configured via sample code in section </a><a href="#bookmark18" class="a">3.1 Example </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">TX_ACTIVE/RX_ACTIVE</span><span class="p">)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx PTI FRAME: <span class="p">EFR32 Frame Control Data Frame signal (packet trace frame/synch)</span></p></li><li><p class="s12" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">CoEx PTI DATA: <span class="p">EFR32 Frame Control Data Out signal (packet trace data)</span></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="#bookmark14" class="s25">The logic analyzer sequence in </a>Figure 2-2 shows:</p><ol id="l25"><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">At REQUEST_WINDOW before the CONNECTION event, Shared REQUEST signal is tested and found not asserted by another EFR32 radio, so EFR32 radio asserts REQUEST.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Wi-Fi/PTA responds with GRANT asserted.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">At end of REQUEST_WINDOW (start of CONNECTION event), EFR32 tests GRANTS, which is asserted.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">With GRANT asserted at start of CONNECTION event, EFR32 executes transmit.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">After transmit is complete and before end if 150µs IFS, EFR32 enables receive to capture expected response from CONNECTION slave device.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">EFR32 device receives device and disables receive.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">EFR32 repeats transmit/receive for four additional cycles as part of this first anchor point.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">After last receive, EFR32 deasserts REQUEST.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Wi-Fi/PTA responds with GRANT deasserted.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l26"><li><p class="s11" style="padding-top: 4pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark15">Application Code Coexistence Extensions</a><a name="bookmark17">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l27"><li><p class="s12" style="padding-top: 10pt;padding-left: 59pt;text-indent: -36pt;text-align: left;"><a name="bookmark16">Example TX_ACTIVE/RX_ACTIVE</a><a name="bookmark18">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">It is helpful to access the EFR32 radio state during PTA coexistence debugging. The following code examples create the TX_ACTIVE and RX_ACTIVE signals seen in the previous logic analyzer captures. This EFR32MG1P232F256GM48 example pushes TX_ACTIVE out PD10 and RX_ACTIVE out PD11. Other GPIOs can be used with changes in #defines. Consult the design-specific EFR32xG datasheet and reference manual for details on changing #defines values to other EFR32 devices and to alternate GPIOs.</p><p class="s15" style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Enable TX_ACT signal through GPIO PD10</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define _PRS_CH_CTRL_SOURCESEL_RAC2 0x00000020UL</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define PRS_CH_CTRL_SOURCESEL_RAC2 (_PRS_CH_CTRL_SOURCESEL_RAC2 &lt;&lt; 8) #define _PRS_CH_CTRL_SIGSEL_RACPAEN 0x00000004UL</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define PRS_CH_CTRL_SIGSEL_RACPAEN (_PRS_CH_CTRL_SIGSEL_RACPAEN &lt;&lt; 0) #define TX_ACTIVE_PRS_SOURCE PRS_CH_CTRL_SOURCESEL_RAC2</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define TX_ACTIVE_PRS_SIGNAL PRS_CH_CTRL_SIGSEL_RACPAEN</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define TX_ACTIVE_PRS_CHANNEL 5</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define TX_ACTIVE_PRS_LOCATION 0 #define TX_ACTIVE_PRS_PORT gpioPortD #define TX_ACTIVE_PRS_PIN 10</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define TX_ACTIVE_PRS_ROUTELOC_REG ROUTELOC1 #define TX_ACTIVE_PRS_ROUTELOC_MASK (~0x00003F00UL)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define TX_ACTIVE_PRS_ROUTELOC_VALUE PRS_ROUTELOC1_CH5LOC_LOC0 // PD10 #define TX_ACTIVE_PRS_ROUTEPEN PRS_ROUTEPEN_CH5PEN</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Enable RX_ACT signal through GPIO PD11</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define _PRS_CH_CTRL_SOURCESEL_RAC2 0x00000020UL</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define PRS_CH_CTRL_SOURCESEL_RAC2 (_PRS_CH_CTRL_SOURCESEL_RAC2 &lt;&lt; 8) #define _PRS_CH_CTRL_SIGSEL_RACRX 0x00000002UL</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define PRS_CH_CTRL_SIGSEL_RACRX (_PRS_CH_CTRL_SIGSEL_RACRX &lt;&lt; 0) #define RX_ACTIVE_PRS_SOURCE PRS_CH_CTRL_SOURCESEL_RAC2</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define RX_ACTIVE_PRS_SIGNAL PRS_CH_CTRL_SIGSEL_RACRX</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define RX_ACTIVE_PRS_CHANNEL 6</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define RX_ACTIVE_PRS_LOCATION 13</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define RX_ACTIVE_PRS_PORT gpioPortD #define RX_ACTIVE_PRS_PIN 11</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define RX_ACTIVE_PRS_ROUTELOC_REG ROUTELOC1 #define RX_ACTIVE_PRS_ROUTELOC_MASK (~0x003F0000UL)</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">#define RX_ACTIVE_PRS_ROUTELOC_VALUE PRS_ROUTELOC1_CH6LOC_LOC13 // PD11 #define RX_ACTIVE_PRS_ROUTEPEN PRS_ROUTEPEN_CH6PEN</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">CMU_ClockEnable(cmuClock_PRS, true); // enable clock to PRS</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Setup PRS input as TX_ACTIVE signal</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">PRS_SourceAsyncSignalSet(TX_ACTIVE_PRS_CHANNEL, TX_ACTIVE_PRS_SOURCE, TX_ACTIVE_PRS_SIGNAL);</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">// enable TX_ACTIVE output pin with initial value of 0 GPIO_PinModeSet(TX_ACTIVE_PRS_PORT, TX_ACTIVE_PRS_PIN, gpioModePushPull, 0);</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Route PRS CH/LOC to TX Active GPIO output</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">PRS-&gt;TX_ACTIVE_PRS_ROUTELOC_REG = (PRS-&gt;TX_ACTIVE_PRS_ROUTELOC_REG &amp; TX_ACTIVE_PRS_ROUTELOC_MASK) | TX_ACTIVE_PRS_ROUTELOC_VALUE;</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">PRS-&gt;ROUTEPEN |= TX_ACTIVE_PRS_ROUTEPEN;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">// Setup PRS input as RX_ACTIVE signal</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">PRS_SourceAsyncSignalSet(RX_ACTIVE_PRS_CHANNEL, RX_ACTIVE_PRS_SOURCE, RX_ACTIVE_PRS_SIGNAL);</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">// enable RX_ACTIVE output pin with initial value of 0 GPIO_PinModeSet(RX_ACTIVE_PRS_PORT, RX_ACTIVE_PRS_PIN, gpioModePushPull, 0);</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Route PRS CH/LOC to RX Active GPIO output</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">PRS-&gt;RX_ACTIVE_PRS_ROUTELOC_REG = (PRS-&gt;RX_ACTIVE_PRS_ROUTELOC_REG &amp; RX_ACTIVE_PRS_ROUTELOC_MASK) | RX_ACTIVE_PRS_ROUTELOC_VALUE;</p><p class="s15" style="padding-left: 60pt;text-indent: 0pt;text-align: left;">PRS-&gt;ROUTEPEN |= RX_ACTIVE_PRS_ROUTEPEN;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s11" style="padding-top: 4pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark19">Coexistence Backplane Evaluation Board (EVB)</a><a name="bookmark20">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">For evaluating the Silicon Labs EFR32 software coexistence solution, order EFR32MG Wireless SoC Starter Kit (WSTK) #SLWSTK6000B and Coexistence Backplane EVB (#SLWSTK-COEXBP). Detailed instructions for using the Starter Kit and Backplane EVB are found in <i>UG350: Silicon Labs Coexistence Development Kit (SLWSTK-COEXBP)</i><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s25" target="_blank">. To see a demonstration of Wi-Fi coexistence and obtain links to additional coexistence documentation, visit the </a><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s27" target="_blank">Silicon Labs Wi-Fi Coexistence Learning Center</a><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s25" target="_blank">.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span><img width="546" height="337" alt="Coexistence Backplane EVB (#SLWSTK-COEXBP) " title="Coexistence Backplane EVB (#SLWSTK-COEXBP) " src="an1128-bluetooth-coexistence-with-wifi/Image_018.jpg"/></span></p><p class="s12" style="padding-top: 3pt;padding-left: 52pt;text-indent: 0pt;text-align: center;">Figure 4-1. Coexistence Backplane EVB (#SLWSTK-COEXBP)</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s11" style="padding-top: 4pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark21">Document Revision History</a><a name="bookmark22">&zwnj;</a></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Revision 1.7</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">January 2021</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Bluetooth SDK version: 3.1.0.0 Bluetooth Mesh SDK version: 2.0.0.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Update section 2.1 Compile Time PTA Setup and Defaults to stay consistent with gecko SDK v3.1</p><p class="s12" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 1.6</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">December 2020</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Bluetooth SDK version: 3.0.1.0 Bluetooth Mesh SDK version: 1.7.2.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Moved section 3 Unmanaged Coexistence, section 4 Managed Coexistence, and section 5 Conclusions from Revision 1.5 of this application note to <i>UG103.17: Wi-Fi® Coexistence Fundamentals</i>.</p><p class="s12" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 1.5</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">June 2020</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Bluetooth version: 2.13.5.0 Bluetooth Mesh version: 1.6.3.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Renamed section 4.1 to PTA Support Options; added heading level three to 1-Wire PTA, 2-Wire PTA, 3-Wire PTA, and 4-Wire PTA.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added section 4.2 Wi-Fi/PTA Considerations, section 4.3 PWM for High Duty Cycle Wi-Fi, and section 4.4 Directional PRIORITY from</p><p class="s9" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">AN1243: Timing and Test Data for EFR32 Coexistence with Wi-Fi<span class="p">.</span></p></li><li><p class="s8" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark12" class="s25">Updated section </a><a href="#bookmark12" class="s7">2.4 Coexistence Configuration Setup Examples for Different Wi-Fi/PTA Applications</a> <span style=" color: #000;">due to changes in the Bluetooth SDK 3.0.0.</span></p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Updated figures in section <span class="s28">Error! Reference source not found. Error! Reference source not found. </span>and section <span class="s28">Error! Reference source not found. Error! Reference source not found.</span>. They use the RACPAEN signal. RACLNAEN is no longer in use.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Corrected the Static PRIORITY signal assignment in section <span class="s28">Error! Reference source not found. Error! Reference source not found. </span>and section <span class="s28">Error! Reference source not found. Error! Reference source not found.</span>.</p><p class="s12" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 1.4</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">March 2020</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Bluetooth version: 2.13.3.0 Bluetooth Mesh version: 1.6.2.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Made minor text changes.</p><p class="s12" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 1.3</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">February 2020</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Bluetooth version: 2.13.2.0 Bluetooth Mesh version: 1.6.1.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Deleted all text dealing with the implementation of managed coexistence and moved it to <i>AN1243: Timing and Test Data for EFR32 Coexistence with Wi-Fi </i>available under non-disclosure from Silicon Labs technical support. In prior revisions, this content resided in <i>AN1128-NDA: Bluetooth® Coexistence with Wi-Fi </i>which has been deprecated.</p><p class="s12" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Revision 1.2</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">January 2020</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Bluetooth version: 2.13.1.0 Bluetooth Mesh version: 1.6.1.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Updated PTA REQUEST to PRIORITY timing.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Updated Directional PRIORITY PRS/TIMER implementation and added timing diagrams.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added Directional PRIORITY run-time configuration BGAPI command.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Removed PWM and Directional PRIORITY errata.</p><p class="s12" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Revision 1.1</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">December 2019</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Bluetooth version: 2.13.0.0 Bluetooth Mesh version: 1.6.1.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added SL Thread notice on first page.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added Link Layer PRIORITY support.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added 100% Passive SCAN and Bluetooth mesh ADV-Bearer support.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added PWM information (not functional in Bluetooth 2.13.0.0).</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Added Directional PRIORITY support.</p><p class="s12" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Revision 1.0</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">December 2018</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Bluetooth version: 2.11.0.0 Bluetooth Mesh version: 2.8.0.0</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Initial release</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 21pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">Simplicity Studio</h2><p class="s29" style="padding-top: 15pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">One-click access to MCU and wireless tools, documentation, software, source code libraries &amp; more. Available for Windows, Mac and Linux!</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="768" height="435" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_019.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_020.png"/></span></p><p class="s30" style="padding-left: 224pt;text-indent: 0pt;text-align: center;">IoT Portfolio</p><p style="padding-top: 1pt;padding-left: 228pt;text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/IoT" class="s31">www.silabs.com/IoT</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s30" style="padding-left: 6pt;text-indent: 0pt;line-height: 12pt;text-align: left;">SW/HW</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 37pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/simplicity" class="s32">www.silabs.com/simplicity</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_022.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s30" style="padding-left: 6pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Quality</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/quality" class="s31">www.silabs.com/quality</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s30" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">Support &amp; Community</p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_023.png"/></span></p><p style="padding-top: 1pt;padding-left: 33pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/community" class="s31">www.silabs.com/community</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s34" style="padding-top: 1pt;padding-bottom: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><span><img width="771" height="49" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_024.png"/></span></p><p class="s34" style="padding-top: 1pt;padding-bottom: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">of use of the information supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required, or Life Support Systems</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><span><img width="745" height="23" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_025.png"/></span></p><p class="s34" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">products shall under no circumstances be used in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Trademark Information</p><p class="s34" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">Silicon Laboratories Inc.®, Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, ClockBuilder®, CMEMS®, DSPLL®, EFM®, EFM32®, EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, “the world’s most energy friendly microcontrollers”, Ember®, EZLink®, EZRadio®, EZRadioPRO®, Gecko®, Gecko OS, Gecko OS Studio, ISOmodem®, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress®, Zentri, the Zentri logo and Zentri DMS, Z-Wave®, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="134" height="66" alt="image" src="an1128-bluetooth-coexistence-with-wifi/Image_026.png"/></span></p><p class="s34" style="padding-top: 6pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s34" style="padding-left: 134pt;text-indent: 0pt;line-height: 9pt;text-align: left;">USA</p><p style="padding-top: 4pt;padding-left: 134pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/" class="s35">http://www.silabs.com</a></p></body></html>
