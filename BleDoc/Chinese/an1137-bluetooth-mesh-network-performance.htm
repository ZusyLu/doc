<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>an1137-bluetooth-mesh-network-performance</title><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .a, a { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s4 { color: #007694; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s5 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s6 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 .s7 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 .s8 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s9 { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; vertical-align: 3pt; }
 .s10 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s11 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; }
 .s12 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s13 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s14 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; }
 .s15 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s16 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s17 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s18 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s19 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s20 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s21 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; }
 .s22 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3pt; }
 h4 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s23 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; }
 .s24 { color: #FFF; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s25 { color: #FFF; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s26 { color: #231F20; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s27 { color: #231F20; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 h2 { color: #D91F2A; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt;counter-reset: d2 1; }
 #l3> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 li {display: block; }
 #l4 {padding-left: 0pt;counter-reset: e1 1; }
 #l4> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l5 {padding-left: 0pt;counter-reset: f1 2; }
 #l5> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 #l6 {padding-left: 0pt; }
 #l6> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l7 {padding-left: 0pt;counter-reset: f2 1; }
 #l7> li>*:first-child:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l7> li:first-child>*:first-child:before {counter-increment: f2 0;  }
 #l8 {padding-left: 0pt;counter-reset: f2 1; }
 #l8> li>*:first-child:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: f2 0;  }
 #l9 {padding-left: 0pt; }
 #l9> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l10 {padding-left: 0pt;counter-reset: f2 1; }
 #l10> li>*:first-child:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l10> li:first-child>*:first-child:before {counter-increment: f2 0;  }
 #l11 {padding-left: 0pt;counter-reset: f3 1; }
 #l11> li>*:first-child:before {counter-increment: f3; content: counter(f3, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l11> li:first-child>*:first-child:before {counter-increment: f3 0;  }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l13 {padding-left: 0pt; }
 #l13> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l14 {padding-left: 0pt;counter-reset: i1 4; }
 #l14> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l14> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l15 {padding-left: 0pt;counter-reset: i2 1; }
 #l15> li>*:first-child:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l15> li:first-child>*:first-child:before {counter-increment: i2 0;  }
 #l16 {padding-left: 0pt;counter-reset: i3 1; }
 #l16> li>*:first-child:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l16> li:first-child>*:first-child:before {counter-increment: i3 0;  }
 #l17 {padding-left: 0pt; }
 #l17> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l18 {padding-left: 0pt; }
 #l18> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l19 {padding-left: 0pt; }
 #l19> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l20 {padding-left: 0pt; }
 #l20> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l21 {padding-left: 0pt;counter-reset: f2 1; }
 #l21> li>*:first-child:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l21> li:first-child>*:first-child:before {counter-increment: f2 0;  }
 #l22 {padding-left: 0pt;counter-reset: f3 1; }
 #l22> li>*:first-child:before {counter-increment: f3; content: counter(f3, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l22> li:first-child>*:first-child:before {counter-increment: f3 0;  }
 li {display: block; }
 #l23 {padding-left: 0pt; }
 #l23> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="126" height="62" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="37" height="37" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_002.png"/></span></p><h1 style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">AN1137: <i>Bluetooth</i>® Mesh Network Performance</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="209" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="210" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_005.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s3" style="padding-top: 4pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Wireless test network in Silicon Labs Research and Development (R&amp;D) office is described.</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Wireless conditions and environments are evaluated.</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Mesh network performance including throughput, latency, and large network scalability is presented.</p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This application note details methods for testing Bluetooth mesh network performance. With an increasing number of mesh networks available in today’s wireless market, it is important for designers to understand the different use cases among these networks and their expected performances. When selecting a network or device, designers need to know the network’s performance and behavior characteristics such as battery life, network throughput and latency, and the impact of network size on scalability and relia- bility.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This application note demonstrates how the Bluetooth mesh network differs in perform- ance and behavior from other mesh networks. Tests were conducted using Silicon Labs’ Bluetooth Mesh software stacks and the Wireless Gecko SoC platform capable of running Bluetooth Mesh and Proprietary protocols. The test environment was a com- mercial office building with active Wi-Fi and Zigbee networks in range. Wireless test clusters were deployed in hallways, meeting rooms, offices, and open areas. The meth- odology for performing the benchmarking tests is defined so that others may run the same tests. These results are intended to provide guidance on design practices and principles as well as expected field performance results.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="http://www.silabs.com/mesh-performance" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Additional performance benchmarking information for other technologies is available at </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">http://www.silabs.com/mesh-performance</span>.</p><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Introduction and Background</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_006.png"/></span></p><ol id="l2"><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark0">Introduction and Background</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Silicon Labs has provided performance testing results from embedded mesh networks as part of developer conferences and industry white papers. The basic performance data of throughput, latency, and impact of security can be used by system designers to define expected behavior. This testing has previously been presented for Zigbee and Thread networks as basic 15.4 mesh networking tech- nologies. These were presented because performance varies even though both systems use the same underlying physical layer de- fined by IEEE 802.15.4. With the advent of Bluetooth mesh networks, it is common for questions to arise concerning the expected per- formance differences between a Bluetooth mesh and these 15.4 mesh networks. Prior to discussing the testing and performance differ- ences, we need to review the underlying technologies of these networks as it helps to understand their performance differences.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l3"><li><p class="s5" style="padding-top: 5pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark1">Underlying Physical Layer and Packet Structure</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Network performance is based on payload sizing since the application usage does not account for the packet overhead.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Bluetooth low energy is based on the BT 4.x specification and has a 33-byte packet with an underlying data rate of 1 Mbps. The Blue- tooth mesh packet size is shown in the figure below and results in a 12 or 16-byte payload. For payloads above 12 bytes, there is a process of segmentation and reassembly.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Bluetooth mesh has a higher data rate but the packet payload is smaller; therefore, it takes more packets to send the same amount of data. Our data on performance is based on payload size as this is the design parameter of concern when building an application. The Bluetooth mesh has designed mesh profiles (application layer) to specifically minimize the packet payload and fit in a single packet where possible.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:46.8445pt" cellspacing="0"><tr style="height:15pt"><td style="width:23pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 1pt;padding-right: 3pt;text-indent: 0pt;line-height: 12pt;text-align: right;">1</p></td><td style="width:22pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:44pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 1pt;padding-right: 3pt;text-indent: 0pt;line-height: 12pt;text-align: right;">1</p></td><td style="width:78pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 1pt;padding-right: 3pt;text-indent: 0pt;line-height: 12pt;text-align: right;">3</p></td><td style="width:59pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 1pt;padding-right: 3pt;text-indent: 0pt;line-height: 12pt;text-align: right;">2</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 1pt;padding-right: 3pt;text-indent: 0pt;line-height: 12pt;text-align: right;">2</p></td><td style="width:85pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-left: 46pt;text-indent: 0pt;line-height: 12pt;text-align: left;">12 or 16</p></td><td style="width:55pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-left: 26pt;text-indent: 0pt;line-height: 12pt;text-align: left;">4 or 8</p></td></tr><tr style="height:29pt"><td style="width:23pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s8" style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">IVI</p></td><td style="width:65pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 1pt;padding-left: 4pt;padding-right: 23pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Network ID</p></td><td style="width:22pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s8" style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">CTL</p></td><td style="width:44pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 4pt;text-indent: 0pt;line-height: 12pt;text-align: left;">TTL</p></td><td style="width:78pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 1pt;padding-left: 5pt;padding-right: 32pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Sequence Number</p></td><td style="width:59pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 1pt;padding-left: 5pt;padding-right: 20pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Source Address</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 1pt;padding-left: 5pt;padding-right: 20pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Dest Address</p></td><td style="width:85pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Packet Payload</p></td><td style="width:55pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">NWK MIC</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 1.1.  Bluetooth Mesh Packet Format</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s5" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark2">Network Routing Differences</a></p></li></ol></li></ol><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Bluetooth mesh uses a managed flooding technique to relay messages instead of routing. This means that instead of building, main- taining, and using defined routes to send messages, Bluetooth mesh relays relay the messages they hear using the following two sim- ple rules:</p><ol id="l4"><li><p style="padding-top: 2pt;padding-left: 42pt;text-indent: -9pt;text-align: justify;">Every message has a unique sequence number.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -8pt;text-align: justify;">Relays keep track of the recently seen sequence numbers and do not relay the messages they have already seen or relayed be- fore.</p></li></ol><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">The messages also have a time-to-live counter (TTL) and every time a message is relayed, the counter is reduced by one until it rea- ches a value indicating that it should no longer be relayed.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">As there are no acknowledgements used at the network level, Bluetooth mesh relays can be configured to repeat the same message multiple times so that more reliability is achieved due to the air interface packet loss. Typically this value is set to 3, so each relay re- peats the same message three times. Also, a configurable delay between the repetitions is used to optimize between latency and net- work performance. The minimum delay between repetitions, called the retransmission interval = (Relay Retransmit Interval Steps + 1) * 10ms + 0-10ms random delay, is typically 15 ms per hop.</p><p class="s5" style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">This performance data is for the Silicon Labs implementation of these mesh networking stacks. As is shown in the test network and infrastructure provided for this testing, no tests were performed with other stacks or systems.</span></p><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Goals and Methods</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_007.png"/></span></p><ol id="l5"><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: justify;"><a name="bookmark3">Goals and Methods</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">This application note defines a set of tests performed to evaluate mesh network performance, scalability, and reliability. The test condi- tions and infrastructure are described, in addition to the message latency and reliability. This testing is conducted over actual wireless devices in test networks and not in simulation.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This testing is done to provide a relative comparison between the different mesh technologies to better understand and recommend their usage. Different network and system designs have different requirements for devices and networks. As such, no one network ful- fills all possible network requirements. However, the three mesh networking technologies we are comparing are all aimed at low power and battery-operated mesh networks used for control and monitoring in the home and commercial buildings.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Normally, when analyzing data on network performance, we then consider what improvements can be made in the network to improve performance. Because of the limited data available publicly on mesh network performance in large networks today, it is difficult to have industry discussions on possible improvements or changes. For example, in commercial buildings there is concern over:</p><ul id="l6"><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Other network traffic, since there may be many subnets that interfere with each other.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Wi-Fi interference from the normal building Wi-Fi infrastructure as these technologies are generally operating in the 2.4 GHz ISM band.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Network throughput and latency as well as large network multicast latency and reliability, since multicasts are commonly used for lighting controls in dense office environments and users of the system expect responsiveness in lighting controls.</p></li></ul><p class="s5" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">The test results here are limited to comparisons of system performance under normal operating conditions, or under stress as noted in particular tests. This application note does not specifically address system interference or other such effects that have been addressed in other published results. However, testing is done in our Silicon Labs R&amp;D facility where there are more than 100 Wi-Fi access points within RF range. The facility also has a 300-node Zigbee lighting network that is not part of this testing but is used for normal lighting control.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l7"><li><p class="s5" style="padding-left: 41pt;text-indent: -17pt;text-align: justify;"><a name="bookmark4">Review of Other Benchmarks</a><a name="bookmark5">&zwnj;</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">There are no specific, defined methods for evaluating and reporting large network reliability, scalability, or latency. Silicon Labs has published such papers in the past to compare network performance. This testing focused on device behavior and impact on battery life, and network throughput and latency. Large scale multicast testing also requires capturing accurate timing and reliability information from large distributed networks. All testing was conducted with Silicon Labs’ Wireless Gecko SoC platform capable of running Zigbee, Thread, Bluetooth mesh and Proprietary protocols to eliminate the device itself as a difference in the testing. Previously published re- sults showed differences between transceivers, network co-processors, and System-on-Chip designs. These tests all use System-on- chip designs.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="https://www.ericsson.com/en/publications/white-papers/bluetooth-mesh-networking" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">In the white paper written by Ericsson, “Bluetooth Mesh Networking”, July 22, 2017, Ericsson indicates that Bluetooth mesh performs satisfactorily in low traffic and sparse relay deployment conditions. However, their paper is based on simulation and not actual network testing, so it is not clear how the results would translate to the real world. For more information, refer to the results in the Ericsson white paper: </a><a href="https://www.ericsson.com/en/publications/white-papers/bluetooth-mesh-networking" target="_blank">https://www.ericsson.com/en/publications/white-papers/bluetooth-mesh-networking</a></p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark6">Test Network and Conditions</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">To minimize variability, device testing can also be performed in fixed topologies where the RF paths are wired together through splitters and attenuators to ensure the topology does not change over time and testing. This method is used for 7-hop testing to ensure network topology. MAC filtering can also be used to achieve the network topology.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">A typical wired test configuration is shown below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 117pt;text-indent: 0pt;text-align: left;"><span><img width="471" height="243" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_008.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 3.1.  Wired RF devices in drawer with splitter and coax cable connectivity</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">Large network testing is best conducted in an open-air environment where device behavior is based on the existing and varying RF conditions. The Silicon Labs R&amp;D facility is used for this open-air testing.</p><ol id="l8"><li><p class="s5" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark7">Facility and Test Network Conditions</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Silicon Labs R&amp;D facility consists of a central core with an elevator shaft, other services with an open floor plan on the west end of the building, and offices and conference rooms on the east end. The overall facility measures approximately 120 feet by 200 feet. The image below shows the facility layout. The darker lines represent hard walls and everything else is split up with cube partitions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 82pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="350" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_009.gif"/></span></p><p class="s5" style="padding-top: 5pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 3.2.  Silicon Labs facility layout used for wireless testing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The testing devices are installed at various locations around the facility. These devices all have Ethernet backchannel connectivity to allow:</p><ul id="l9"><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Firmware updates</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Command line interface</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Scripting</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Timing analysis</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Packet capture</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Energy measurements</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="176" height="350" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_010.jpg"/></span></p><p style="padding-top: 4pt;padding-left: 262pt;text-indent: 0pt;text-align: left;">Four EM35x Devices using PoE</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 262pt;text-indent: 0pt;line-height: 22pt;text-align: left;">Six EFR32MG (Mighty Gecko) Devices Multi-band support to allow testing both</p><p style="padding-left: 262pt;text-indent: 0pt;text-align: left;">2.4 GHz (PCB antenna) and proprietary sub-GHz protocols (external antenna)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 262pt;text-indent: 0pt;text-align: left;">USB power and Ethernet connectivity</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 4pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 3.3.  Typical Testing Cluster</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The testing clusters are spread throughout the facility in both high and low locations, open areas, and enclosed meeting rooms and offices.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 135pt;text-indent: 0pt;text-align: left;"><span><img width="437" height="482" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_011.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 4pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 3.4.  Testing Clusters in the Silicon Labs R&amp;D Facility</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">This test network has devices added or removed from it on a regular basis, but at the time of this testing it consisted of the following devices:</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/products/wireless/mesh-networking/em358x-em359x-zigbee-thread-soc" class="a" target="_blank">EM35xx</a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span>devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="http://www.silabs.com/mightygecko" class="a" target="_blank">EFR32 </a><a href="http://www.silabs.com/mightygecko" class="s9" target="_blank">TM </a><a href="http://www.silabs.com/mightygecko" class="a" target="_blank">Mighty Gecko</a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span>devices</p></li></ul><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">This network represented devices that were used for open-air testing by the networking and software quality assurance teams. All devi- ces are controlled from a central test server and infrastructure, which allows scripted regression testing or manual testing by engineers.</p></li><li><p class="s5" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark8">Wireless Conditions in the Facility</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Silicon Labs R&amp;D facility has a full Zigbee lighting control system including motion and lighting sensors and switches. This is not part of the test network and is used as a normal building control system independent of any testing being run.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Silicon Labs R&amp;D facility is also downtown and, in addition to our existing Wi-Fi infrastructure, there are over 100 Wi-Fi access points within RF distance of the facility. The following charts were taken as a snapshot of a normal work day Wi-Fi scan. This is consid- ered the normal Wi-Fi background traffic.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 29pt;text-indent: 0pt;text-align: left;"><span><img width="694" height="180" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_012.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 33pt;text-indent: 0pt;text-align: left;"><span><img width="694" height="180" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_013.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 27pt;text-indent: 0pt;text-align: left;"><span><img width="710" height="174" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_014.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 3.5.  Wi-Fi Scans on a Normal Day</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">These Wi-Fi scans were taken at the southeast corner office, the west side, and the north side in the main conference room, respective- ly. These locations showed 62, 104, and 83 Wi-Fi access points within RF range.</p></li><li><p class="s5" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark9">Typical Test Network</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Within the test network, a given test can be selected and used for a given set of devices. The network is established and devices joined using the Ethernet backchannel to send commands to devices. A typical network during testing is shown below. The black and grey lines show the node connectivity and strength.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 72pt;text-indent: 0pt;text-align: left;"><span><img width="588" height="399" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_015.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 3.6.  A Typical Network During Testing</p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark10">Testing and Results</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l10"><li><p class="s5" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark11">Throughput and Latency</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The throughput and latency is tested in a controlled network (wired configuration) to test each hop against different packet payloads.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The normal configuration is to test to 6 hops. Testing is done with one source node and a series of relay nodes to allow the number of hops to be varied.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_016.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_017.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_018.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_019.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_020.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_022.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_023.png"/></span></p><p class="s10" style="padding-left: 159pt;text-indent: -2pt;text-align: left;">Source Node</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 224pt;text-indent: 0pt;text-align: left;"><span><img width="313" height="21" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_024.png"/></span></p><p class="s10" style="padding-top: 8pt;padding-left: 322pt;text-indent: 0pt;text-align: center;">Destination Nodes</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">This testing is done using the following configuration:</p><ol id="l11"><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">The test application has been configured to use three (3) network level repetitions</p><ul id="l12"><li><p style="padding-top: 3pt;padding-left: 54pt;text-indent: -9pt;text-align: left;">The network level repetition interval used was 10 ms..</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">The test application has been configured to use three (3) relay repetitions.</p><ul id="l13"><li><p style="padding-top: 3pt;padding-left: 54pt;text-indent: -9pt;text-align: left;">The relay repetition interval used was 10 ms.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Application messaging sent with acknowledgment</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Packet payload from 8 bytes to up to 128 bytes for the latency test</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Testing is done with security on</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">From 1 to 6 hops</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Measuring round trip latency (source to destination to source) in milliseconds</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">With Bluetooth mesh at the transport layer we can only send unsegmented packets for 11 bytes or a smaller payload. Results above 11 bytes use segmented messages. The use of larger packet sizes is up to the application layer, but we provide comparison data here to indicate relative performance as fragmentation occurs.</p><ol id="l14"><ol id="l15"><ol id="l16"><li><p class="s5" style="padding-top: 8pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark12">Bluetooth Mesh Multi-hop Latency</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The timings shown in the graphs below are measured round trip times. Note that unsegmented messages can only be used for small payloads, whereas the segmented messages were tested out to 128 bytes of payload. These differences result in a different format for the graphs.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 109pt;text-indent: 0pt;text-align: left;"><span><img width="500" height="363" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_025.jpg"/></span></p><p class="s5" style="padding-top: 7pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.1.  Bluetooth Unsegmented</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 108pt;text-indent: 0pt;text-align: left;"><span><img width="500" height="363" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_026.jpg"/></span></p><p class="s5" style="padding-top: 7pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.2.  Bluetooth Mesh Latency – Segmented</p></li><li><p class="s5" style="padding-top: 8pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark13">Small Payload Comparison</a></p></li></ol></ol></ol><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Some differences exist between segmented and unsegmented messages in Bluetooth mesh. The graph below shows the difference in the small payload case where both message types can be run.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 109pt;text-indent: 0pt;text-align: left;"><span><img width="500" height="363" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_027.jpg"/></span></p><p class="s5" style="padding-top: 7pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.3.  Bluetooth Small Payload Comparison</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Several items are worth noting in this multi-hop latency test.</p><ul id="l17"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">For small payloads, there is not a large difference between unsegmented and segmented messages.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">To keep round trip latency below 200 milliseconds out to 6 hops, the payload must be maintained at 16 bytes or less.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s5" style="padding-top: 6pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark14">Network Tests versus Network Size</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Open-air large network testing is required to validate stack performance under less controlled conditions. These networks are config- ured within normal Silicon Labs office space with normal Wi-Fi interference, other network operations, and building control systems. No attempt is made to isolate these network RF conditions.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The networks to be tested for each stack include:</p><ul id="l18"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Small network: 24 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Medium network: 1 - 48 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Medium network: 2 - 96 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Large network: 1 - 144 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Large network: 2 - 192 devices</p></li></ul><p class="s5" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">For any of these tests, the specific number of devices is acceptable within +/- 10% of these test network targets for a given set of testing.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">These networks are all configured as mains powered devices unless there is specific testing for low power devices.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">For each of these networks, the testing will validate reliability and latency for a set of traffic conditions. Testing is intended to be done over 100 packets, but longer runs for reliability can also be done.</p><p class="s5" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a name="bookmark15">4.2.1 Bluetooth Mesh Large Network Testing Results</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">As the Bluetooth mesh is a flooding mesh, there has been some concern over the latency and scalability as the network size increases. The graphs below illustrate the latency for each of the network sizes with several packet payloads. Note the 8-byte payload fits within one packet but all other payloads require multiple packets.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The values in the charts below represent one way latency times.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="523" height="364" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_028.png"/></span></p><p class="s10" style="text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;line-height: 139%;text-align: left;">8byte 16byte</p><p class="s11" style="text-indent: 0pt;line-height: 8pt;text-align: left;">32byte</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">50.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">60.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="text-indent: 0pt;text-align: left;">Bluetooth Mesh Latency 24 Node Network</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">0</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">10</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">20</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">30</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">40</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">50</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">60</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">70</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">80</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">90</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">100</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">110</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">120</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">130</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">140</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">150</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">160</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">170</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">180</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">190</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">200</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">210</p><p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: right;">More</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 4pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.4.  Bluetooth Mesh Latency 24 Node Network</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="552" height="384" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_029.png"/></span></p><p class="s12" style="text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s13" style="text-indent: 0pt;text-align: left;">15.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">5.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s13" style="text-indent: 0pt;line-height: 136%;text-align: left;">8bytes 16bytes</p><p class="s13" style="text-indent: 0pt;line-height: 9pt;text-align: left;">32bytes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s13" style="text-indent: 0pt;text-align: left;">45.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">35.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">25.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="text-indent: 0pt;text-align: left;">Bluetooth Mesh Latency 96 Node Network</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.5.  Bluetooth Mesh Latency 96 Node Network</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="523" height="364" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_030.png"/></span></p><p class="s10" style="text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">5.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;line-height: 139%;text-align: left;">8bytes 16bytes</p><p class="s11" style="text-indent: 0pt;line-height: 8pt;text-align: left;">32bytes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">15.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">25.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="text-indent: 0pt;text-align: left;">35.00%</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="text-indent: 0pt;text-align: left;">Bluetooth Mesh Latency 192 Node Network</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">0</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">30</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">60</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">90</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">120</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">150</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">180</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">210</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">240</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">270</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">300</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">330</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">360</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">390</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">420</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">450</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">480</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">510</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">540</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">570</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">600</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">630</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">660</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">690</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">720</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">750</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">780</p><p class="s11" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">More</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 4pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.6.  Bluetooth Mesh Latency 192 Node Network</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">These tests reveal a few interesting points:</p><ul id="l19"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">As the network size increases, the average latency increases even for the 8-byte packet. For the 8-byte packet, the latency is gener- ally low even through the 192 node network but it does have a longer tail for some messages to be received.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">As the network size increases, the latency increases and spreads out. We increased the scale on latency as the network size in- creased to better display the data.</p></li><li><p style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">When increasing packet payload from 8 to 16 to 32 bytes, the latency increases quite a bit and spreads out.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 139pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="477" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_031.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 139pt;text-indent: 0pt;text-align: left;"><span><img width="470" height="209" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_032.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 143pt;text-indent: 0pt;text-align: left;"><span><img width="6" height="6" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_033.png"/></span><span class="s14"> </span><span><img width="9" height="9" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_034.png"/></span><span class="s15"> </span><span><img width="10" height="11" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_035.png"/></span><span class="s16"> </span><span><img width="10" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_036.png"/></span><span class="s16"> </span><span><img width="9" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_037.png"/></span><span class="s16"> </span><span><img width="10" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_038.png"/></span><span class="s16"> </span><span><img width="10" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_039.png"/></span><span class="s16"> </span><span><img width="10" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_040.png"/></span><span class="s16"> </span><span><img width="10" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_041.png"/></span><span class="s17"> </span><span><img width="10" height="10" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_042.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_043.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_044.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_045.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_046.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_047.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_048.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_049.png"/></span><span class="s19">	</span><span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_050.png"/></span> <span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_051.png"/></span><span class="s20"> </span><span><img width="13" height="14" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_052.png"/></span><span class="s20"> </span><span><img width="34" height="18" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_053.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 248pt;text-indent: 0pt;line-height: 4pt;text-align: left;"><span><img width="5" height="5" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_054.png"/></span>	<span><img width="4" height="5" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_055.png"/></span>	<span><img width="5" height="5" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_056.png"/></span>	<span><img width="4" height="5" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_057.png"/></span>	<span><img width="4" height="5" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_058.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="13" height="13" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_059.png"/></span></p><p class="s12" style="padding-top: 5pt;padding-left: 174pt;text-indent: -54pt;line-height: 90%;text-align: left;">Bluetooth Mesh - Latency vs. Network Size 8-byte Payload</p><p class="s13" style="padding-top: 3pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">60.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">50.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 158pt;text-indent: 0pt;text-align: center;">Latency (milliseconds)</p><p class="s13" style="padding-top: 3pt;padding-left: 162pt;text-indent: 0pt;text-align: center;">24       48       96       144       192</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 4pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.7.  Bluetooth Mesh – Latency vs Network Size, 8-byte Payload</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 139pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="477" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_060.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-left: 248pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="5" height="4" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_061.png"/></span>	<span><img width="4" height="4" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_062.png"/></span>	<span><img width="5" height="4" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_063.png"/></span>	<span><img width="4" height="4" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_064.png"/></span>	<span><img width="4" height="4" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_065.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="470" height="236" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_066.png"/></span></p><p class="s12" style="padding-top: 5pt;padding-left: 171pt;text-indent: -51pt;line-height: 90%;text-align: left;">Bluetooth Mesh - Latency vs Network Size 32 -byte Payload</p><p class="s13" style="padding-top: 3pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">18.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">16.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">14.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">12.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 19pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">8.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">6.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">4.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">2.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 164pt;text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p class="s13" style="padding-top: 2pt;padding-left: 163pt;text-indent: 0pt;text-align: left;">24 48 96 144 192</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s13" style="padding-top: 1pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">0</p><p class="s13" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">20</p><p class="s13" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">40</p><p class="s13" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">60</p><p class="s13" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">80</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">100</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">120</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">140</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">160</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">180</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">200</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">220</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">240</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">260</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">280</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">300</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">320</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">340</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">360</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">380</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">400</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">420</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">440</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">460</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">480</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">500</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">520</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">540</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">560</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">580</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">600</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">620</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">640</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">660</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">680</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">700</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">720</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">740</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">760</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">780</p><p class="s13" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">800</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 4pt;padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.8.  Bluetooth Mesh – Latency vs Network Size, 32-byte Payload</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">The graphs above show that for an 8-byte payload, there is an increase and spreading of latency as the network size increases. How- ever, the increase is much smaller than when a 32-byte payload is used.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">To better evaluate the impact of network size and the number of relays, a 240 node network was run with all relays or with 1 in 6 devi- ces being a relay. This testing was done with an 8-byte payload to keep it within a single packet. The results are as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 145pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="453" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_067.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 145pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="453" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_068.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 145pt;text-indent: 0pt;text-align: left;"><span><img width="451" height="234" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_069.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="443" height="17" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_070.png"/></span></p><p class="s10" style="padding-top: 4pt;padding-left: 85pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Bluetooth Mesh Latency 240 Node Network - All Relays</p><p class="s10" style="padding-left: 167pt;text-indent: 0pt;line-height: 10pt;text-align: left;">8-byte Payload</p><p class="s11" style="padding-top: 2pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">50.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">45.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">35.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">25.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">15.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">5.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.9.  Bluetooth Mesh Latency 240 Node Network – All Relays, 8-byte Payload</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 145pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="446" height="1" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_071.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 145pt;text-indent: 0pt;text-align: left;"><span><img width="451" height="258" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_072.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="443" height="17" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_073.png"/></span></p><p class="s10" style="padding-top: 4pt;padding-left: 85pt;text-indent: 0pt;text-align: center;">Bluetooth Mesh Latency 240 Node Network - 1 Relay per 6</p><p class="s11" style="padding-top: 2pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">70.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">60.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">50.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 6pt;padding-left: 85pt;text-indent: 0pt;text-align: center;">Latency (milliseconds)</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-left: 114pt;text-indent: 0pt;text-align: center;">Figure 4.10.  Bluetooth Mesh Latency 240 Node Network – 1 Relay per 6</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark5" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">These results show an impact similar to the Ericsson simulation noted in section </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">2.1 Review of Other Benchmarks</span>. Reducing the num- ber of relays decreases the network congestion and reduces the overall latency as well as the spreading out of the arrival time. Note that in the test with all devices as relays, 10.21% of messages are received after 200 milliseconds, whereas when relays are reduced to 1 of 6 devices, only 1.44% of messages are received after 200 milliseconds.</p><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Summary</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_074.png"/></span></p></li></ul></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark16">Summary</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Performance testing of Bluetooth mesh shows excellent latency when the payload is contained within a single packet. Throughput re- sults show latency can be maintained below 200 milliseconds, even out to 6 hops if the payload is less than 16 bytes.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">For larger networks, as the number of nodes in the network increase or the packet payload increases, the latency also increases. The network size has a smaller effect on latency than the payload size, which can result in a large increase. Reducing the number of relays in the network provides better results for these large networks.</p><p style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;line-height: 19pt;text-align: left;">The reliability of these networks when running these results is greater than 99%. To obtain low latency and high reliability in Bluetooth mesh applications:</p><ul id="l20"><li><p style="padding-top: 1pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Application payload should fit into a single packet.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Applications which require multicast messaging should not use segmented messages.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">When network size and number of hops increase, relay selection becomes critical for network performance.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l21"><li><p class="s5" style="padding-top: 5pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark17">Follow-up Testing Considerations</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The testing described in this application note requires follow-up tests to further define the device behavior and network operations. The following specific items are noted for follow-up testing:</p><ol id="l22"><li><p style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Failure testing can also be added by dropping nodes out of this network during these tests to evaluate recovery time and impact on reliability.</p></li><li><p style="padding-top: 2pt;padding-left: 42pt;text-indent: -8pt;text-align: left;">Testing should be performed with different device types running in System-on-Chip and Network Co-Processor (NCP) modes. Pre- vious testing has revealed some differences between these modes of operation, so this should be further characterized.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s5" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark18">Related Literature</a></p></li></ol></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">This application note has provided information on Bluetooth mesh networking. For information on Zigbee and Thread mesh networking, and a comparison of all three technologies, refer to the following application notes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l23"><li><p style="padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/login/application-notes/an1138-zigbee-mesh-network-performance.pdf" class="a" target="_blank">AN1138: Zigbee Mesh Network </a><a href="https://www.silabs.com/documents/login/application-notes/an1138-zigbee-mesh-network-performance.pdf" target="_blank">Performance</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/login/application-notes/an1141-thread-mesh-network-performance.pdf" class="a" target="_blank">AN1141: Thread Mesh Network </a><a href="https://www.silabs.com/documents/login/application-notes/an1141-thread-mesh-network-performance.pdf" target="_blank">Performance</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/login/application-notes/an1142-mesh-network-performance-comparison.pdf" class="a" target="_blank">AN1142: Mesh Network Performance </a><a href="https://www.silabs.com/documents/login/application-notes/an1142-mesh-network-performance-comparison.pdf" target="_blank">Comparison</a></p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Smart. Connected. Energy-Friendly.</h4><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s23" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Products</p><p style="text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/products" class="s24">www.silabs.com/products</a></p><p class="s23" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Quality</p><p style="text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/quality" class="s24">www.silabs.com/quality</a></p><p class="s23" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Support and Community</p><p class="s25" style="text-indent: 0pt;text-align: center;">community.silabs.com</p><p class="s19" style="padding-left: 64pt;text-indent: 0pt;text-align: left;">		</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="767" height="695" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_075.png"/></span></p><p class="s26" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each specific device, and &quot;Typical&quot; parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes without further notice and limitation to product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included information. Silicon Labs shall have no liability for the consequences of use of the information supplied herein. This document does not imply or express copyright licenses granted hereunder to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any Life Support System without the specific written consent of Silicon Labs. A &quot;Life Support System&quot; is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Trademark Information</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Silicon Laboratories Inc.® , Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, Clockbuilder®, CMEMS®, DSPLL®, EFM®, EFM32®, EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, &quot;the world’s most energy friendly microcontrollers&quot;, Ember®, EZLink®, EZRadio®, EZRadioPRO®, Gecko®, ISOmodem®, Micrium, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress®, Zentri, Z-Wave and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. All other products or brand names mentioned herein are trademarks of their respective holders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="169" height="83" alt="image" src="an1137-bluetooth-mesh-network-performance/Image_076.png"/></span></p><p class="s26" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s26" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">USA</p><p style="padding-top: 5pt;padding-left: 168pt;text-indent: 0pt;text-align: left;"><h2 href="http://www.silabs.com/">http://www.silabs.com</h2></p></body></html>
