<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AN1222: Production Programming of Series 2 Devices</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .a, a { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s5 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s6 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s7 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s8 { color: #A0B82D; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s9 { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s10 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s11 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s12 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 7pt; }
 .s13 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 h4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10.5pt; }
 .s14 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s15 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s16 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s18 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9.5pt; }
 .s19 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s20 { color: #F00; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7.5pt; }
 .s21 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 7.5pt; }
 .s22 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 7.5pt; vertical-align: 4pt; }
 .s23 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 7.5pt; }
 .s24 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s25 { color: #FFBF00; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s26 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s27 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s28 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; }
 .s29 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s30 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s31 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; }
 h2 { color: #FFF; font-family:"Trebuchet MS", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 20pt; }
 .s32 { color: #FFF; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s33 { color: #FB1725; font-family:"Trebuchet MS", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s34 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s35 { color: #4D4D4F; font-family:"Trebuchet MS", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s36 { color: #4D4D4F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s37 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s38 { color: #FB1725; font-family:"Trebuchet MS", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 #l2 {padding-left: 0pt; }
 #l2> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l3 {padding-left: 0pt;counter-reset: d1 1; }
 #l3> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l4 {padding-left: 0pt; }
 #l4> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l5 {padding-left: 0pt;counter-reset: d2 1; }
 #l5> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l5> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l6 {padding-left: 0pt; }
 #l6> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l8 {padding-left: 0pt;counter-reset: d2 1; }
 #l8> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l8> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 li {display: block; }
 #l9 {padding-left: 0pt;counter-reset: g1 3; }
 #l9> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l9> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l10 {padding-left: 0pt;counter-reset: g2 4; }
 #l10> li>*:first-child:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l10> li:first-child>*:first-child:before {counter-increment: g2 0;  }
 #l11 {padding-left: 0pt;counter-reset: g3 1; }
 #l11> li>*:first-child:before {counter-increment: g3; content: counter(g3, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l11> li:first-child>*:first-child:before {counter-increment: g3 0;  }
 li {display: block; }
 #l12 {padding-left: 0pt;counter-reset: h1 4; }
 #l12> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l12> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 #l13 {padding-left: 0pt;counter-reset: h2 1; }
 #l13> li>*:first-child:before {counter-increment: h2; content: counter(h2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l13> li:first-child>*:first-child:before {counter-increment: h2 0;  }
 li {display: block; }
 #l14 {padding-left: 0pt;counter-reset: i1 5; }
 #l14> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l14> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l15 {padding-left: 0pt;counter-reset: i2 1; }
 #l15> li>*:first-child:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l15> li:first-child>*:first-child:before {counter-increment: i2 0;  }
 #l16 {padding-left: 0pt; }
 #l16> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l17 {padding-left: 0pt; }
 #l17> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l18 {padding-left: 0pt;counter-reset: i3 1; }
 #l18> li>*:first-child:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l18> li:first-child>*:first-child:before {counter-increment: i3 0;  }
 #l19 {padding-left: 0pt;counter-reset: i4 1; }
 #l19> li>*:first-child:before {counter-increment: i4; content: counter(i4, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l19> li:first-child>*:first-child:before {counter-increment: i4 0;  }
 #l20 {padding-left: 0pt;counter-reset: l1 1; }
 #l20> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l20> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 #l21 {padding-left: 0pt;counter-reset: i3 1; }
 #l21> li>*:first-child:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l21> li:first-child>*:first-child:before {counter-increment: i3 0;  }
 li {display: block; }
 #l22 {padding-left: 0pt;counter-reset: l1 6; }
 #l22> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l22> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 #l23 {padding-left: 0pt;counter-reset: l2 1; }
 #l23> li>*:first-child:before {counter-increment: l2; content: counter(l1, decimal)"."counter(l2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l23> li:first-child>*:first-child:before {counter-increment: l2 0;  }
 #l24 {padding-left: 0pt; }
 #l24> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l25 {padding-left: 0pt; }
 #l25> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 li {display: block; }
 #l26 {padding-left: 0pt; }
 #l26> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="126" height="62" alt="image" src="an1222-efr32xg2x-production-programming/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="38" height="38" alt="image" src="an1222-efr32xg2x-production-programming/Image_002.png"/></span></p><h1 style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">AN1222: Production Programming of Series 2 Devices</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="1" alt="image" src="an1222-efr32xg2x-production-programming/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="212" height="1" alt="image" src="an1222-efr32xg2x-production-programming/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s1" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="213" height="1" alt="image" src="an1222-efr32xg2x-production-programming/Image_005.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s2" style="padding-top: 4pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">It is the customer&#39;s responsibility to ensure the Secure Element Firmware is up-to- date</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">The Secure Element Firmware can be upgraded via the Serial Wire Debug (SWD) interface</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Secure Element Firmware is protected from downgrade</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Secure Element&#39;s one-time-programmable memory (OTP) prevents re-writing of:</p><ul id="l2"><li><p class="s2" style="padding-top: 1pt;padding-left: 26pt;text-indent: -7pt;text-align: left;">GBL Decryption Key</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 26pt;text-indent: -7pt;text-align: left;">Public Sign Key</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 26pt;text-indent: -7pt;text-align: left;">Public Command Key</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 26pt;text-indent: -7pt;text-align: left;">Secure Boot Enable flag</p></li></ul></li></ul><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">This application note demonstrates how to properly program, pro- vision, and configure Series 2 devices in a production environ- ment.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Series 2 devices contain a Secure Element, which runs Secure Element Firmware. When a newer version of Secure Element Firmware is released, the firmware may be upgraded either in the production programming process for devices still in manufactur- ing or via a field update for devices already deployed in the field. Keys must be provi- sioned to the Secure Element&#39;s one-time-programmable memory to use the Secure Boot and Secure Debug features.</p><p class="s9" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="https://www.silabs.com/documents/public/application-notes/an1190-efr32-secure-debug.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">For more information about Secure Element, see section &quot;Secure Element Subsystem&quot; in application note </a>AN1190: Series 2 Secure Debug<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l3"><li><h3 style="padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark0">EFR32 Series 2 Device Security Features</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Protecting IoT devices against security threats is central to a quality product. Silicon Labs offers several security options to help devel- opers build secure devices, secure application software, and secure paths of communication to manage those devices. Silicon Labs’ security offerings were significantly enhanced by the introduction of the EFR32 Series 2 products that included a Secure Element. The Secure Element is a tamper-resistant component used to securely store sensitive data, keys and to execute cryptographic functions and secure services.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The Secure Element is the foundation of two core security functions:</p><ul id="l4"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Secure Boot: Process where the initial boot phase is executed from an immutable memory (such as ROM) and where code is au- thenticated before being authorized to be executed.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Secure Debug access control: The ability to lock access to the debug ports for operational security, and to securely unlock them when access is required by an authorized entity.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Some EFR32 Series 2 products offer additional security options through Secure Vault. Secure Vault is a dedicated security CPU that isolates cryptographic functions and data from the host processor core. Devices with Secure Vault offer the following security features:</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Secure Key Storage: Protects cryptographic keys by “wrapping” or encrypting the keys using a root key known only to the Secure Vault.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Anti-Tamper protection: A configurable module to protect the device against tamper attacks.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Device authentication: Functionality that uses a secure device identity certificate along with digital signatures to verify the source or target of device communications.</p></li></ul><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">A Secure Element Manager and other tools allow users to configure and control their devices both in house during testing and manu- facturing, and after the device is in the field.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l5"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark1">User Assistance</a><a name="bookmark3">&zwnj;</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In support of these products Silicon Labs offers whitepapers, webinars, and documentation. The following table summarizes the key security documents:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Document</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Summary</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Applicability</p></td></tr><tr style="height:40pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">AN1190: Series 2 Secure Debug</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 7pt;text-indent: 0pt;text-align: left;">How to lock and unlock EFR32 Series 2 debug access, including background infor- mation about the Secure Element</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32 Series 2</p></td></tr><tr style="height:40pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">AN1218: Series 2 Secure Boot with RTSL</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">Describes the secure boot process on EFR32 Series 2 devices using Secure Ele- ment</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32 Series 2</p></td></tr><tr style="height:30pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 9pt;text-indent: 0pt;text-align: left;">AN1247: Anti-Tamper Protection Configu- ration and Use</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 11pt;text-indent: 0pt;text-align: left;">How to program, provision, and configure the anti-tamper module</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32 Series 2 with Secure Vault</p></td></tr><tr style="height:40pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 6pt;text-indent: 0pt;text-align: left;">AN1268: Authenticating Silicon Labs Devi- ces using Device Certificates</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 6pt;text-indent: 0pt;text-align: left;">How to authenticate a device using secure device certificates and signatures, at any time during the life of the product</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32 Series 2 with Secure Vault</p></td></tr><tr style="height:30pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">AN1271: Secure Key Storage</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">How to securely “wrap” keys so they can be stored in non-volatile storage.</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32 Series 2 with Secure Vault</p></td></tr><tr style="height:40pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 17pt;text-indent: 0pt;text-align: left;">AN1222: Production Programming of Series 2 Devices <span class="s6">(this document)</span></p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 7pt;text-indent: 0pt;text-align: left;">How to program, provision, and config- ure security information using Secure Element during device production</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32 Series 2</p></td></tr></table><p class="s8" style="padding-bottom: 3pt;padding-left: 378pt;text-indent: 0pt;text-align: left;">EFR32 Series 2 Device Security Features</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_006.png"/></span></p></li><li><p class="s4" style="padding-top: 7pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark2">Key Reference</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Public/Private keypairs along with other keys are used throughout Silicon Labs security implementations. Because terminology can sometimes be confusing, the following table lists the key names, their applicability, and the documentation where they are used.</p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Key Name</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SE Manager ID</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Customer Programmed</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Purpose</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Used in</p></td></tr><tr style="height:51pt"><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 18pt;text-indent: 0pt;text-align: left;">Public Sign key (Sign Key Public)</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">SL_SE_KEY_SLOT_AP- PLICATION_SE- CURE_BOOT_KEY</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Yes</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 3pt;text-indent: 0pt;text-align: left;">Secure Boot binary au- thentication and/or OTA upgrade payload authen- tication</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 30pt;text-indent: 0pt;text-align: left;">AN1218 (primary), AN1222</p></td></tr><tr style="height:40pt"><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 11pt;text-indent: 0pt;text-align: left;">Public Command key (Command Key Public)</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">SL_SE_KEY_SLOT_AP- PLICATION_SE- CURE_DEBUG_KEY</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Yes</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">Secure Debug Unlock or Disable Tamper com- mand authentication</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 30pt;text-indent: 0pt;text-align: left;">AN1190 (primary), AN1222, AN1247</p></td></tr><tr style="height:40pt"><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 17pt;text-indent: 0pt;text-align: left;">OTA Decryption key (GBL Decryption key) aka AES-128 Key</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">SL_SE_KEY_SLOT_AP- PLICA- TION_AES_128_KEY</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Yes</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 1pt;text-indent: 0pt;text-align: left;">Decrypting GBL payloads used for firmware up- grades</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 30pt;text-indent: 0pt;text-align: left;">AN1222 (primary), UG266</p></td></tr><tr style="height:40pt"><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 11pt;text-indent: 0pt;text-align: left;">Attestation key aka Pri- vate Device Key</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">SL_SE_KEY_SLOT_AP- PLICATION_ATTESTA- TION_KEY</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">No</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Device authentication for secure identity</p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">AN1268</p></td></tr></table><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Device Compatibility</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_007.png"/></span></p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark4">Device Compatibility</a><a name="bookmark5">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 23pt;text-indent: 0pt;line-height: 19pt;text-align: left;">This application note supports Series 2 device families. Some functionality is different depending on the device. Wireless SoC Series 2 families consist of:</p><ul id="l6"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">EFR32BG21A/EFR32BG21B/EFR32BG22</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">EFR32FG22</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">EFR32MG21A/EFR32MG21B/EFR32MG22</p></li></ul></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark6">Overview</a><a name="bookmark9">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">On Series 2 devices, the security features are implemented by the Secure Element. The Secure Element may be hardware-based, or virtual (software). If hardware-based, the implementation may be either with or without Secure Vault. Throughout this document, the following conventions will be used.</p><ul id="l7"><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">SE - Hardware Secure Element, either with or without Secure Vault if not specified</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">VSE - Virtual Secure Element</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Secure Element - Either SE or VSE</p></li></ul><p class="s9" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">More steps are involved in the production programming process of Series 2 devices compared to Series 1 devices. The steps vary if the device is to have secure boot enabled or disabled. For more information about Secure Boot, see </a><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" class="a" target="_blank">AN1218: Series 2 Secure Boot with </a>RTSL<a href="https://www.silabs.com/documents/public/application-notes/an1190-efr32-secure-debug.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">. Enabling Secure Debug is an optional step in the process. For more information about Secure Debug, see </a><a href="https://www.silabs.com/documents/public/application-notes/an1190-efr32-secure-debug.pdf" class="a" target="_blank">AN1190: Series 2 </a>Secure Debug<span style=" color: #000;">.</span></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">A general overview of the production programming steps is described in the following sections. Although some steps can be performed using Simplicity Studio 5, this application note will focus more on using Simplicity Commander because it is more suitable for production environments.</p><ol id="l8"><li><p class="s4" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark7">Production Programming for Secure Boot-Disabled Device</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="388" height="23" alt="image" src="an1222-efr32xg2x-production-programming/Image_008.png"/></span></p><p class="s10" style="text-indent: 0pt;line-height: 10pt;text-align: left;">Required</p><p style="text-indent: 0pt;text-align: left;"/><p class="s10" style="text-indent: 0pt;line-height: 10pt;text-align: left;">Strongly Recommended</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="98" height="23" alt="image" src="an1222-efr32xg2x-production-programming/Image_009.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">Optional</p><p style="text-indent: 0pt;text-align: left;"/><p class="s9" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a href="#bookmark10" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">The production programming flow for Secure Boot-disabled devices is illustrated in </a><a href="#bookmark10" class="a">Figure 3.1 Series 2 High-Level Production Program- </a>ming Flowchart for Secure Boot-Disabled Devices on page 6<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 109pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-style: normal; font-weight: normal; text-decoration: none;">	</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="99" height="99" alt="image" src="an1222-efr32xg2x-production-programming/Image_010.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 23pt;text-indent: -11pt;line-height: 107%;text-align: left;">Update SE/VSE firmware</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="105" height="99" alt="image" src="an1222-efr32xg2x-production-programming/Image_011.png"/></span></p><p class="s11" style="padding-left: 186pt;text-indent: 0pt;text-align: center;"><a name="bookmark10">Download</a></p><p class="s12" style="padding-left: 182pt;text-indent: 0pt;text-align: center;">            <span class="s13">         </span><span class="s11">Bootloader and      </span>            </p><p class="s11" style="padding-left: 186pt;text-indent: 0pt;line-height: 107%;text-align: center;">Application firmware</p><p class="s11" style="padding-top: 5pt;padding-left: 202pt;text-indent: 0pt;text-align: center;">Provision keys</p><p style="text-indent: 0pt;text-align: left;"><span><img width="105" height="99" alt="image" src="an1222-efr32xg2x-production-programming/Image_012.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="105" height="99" alt="image" src="an1222-efr32xg2x-production-programming/Image_013.png"/></span></p><p class="s11" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">for GBL            <span class="s12">              </span></p><p class="s11" style="padding-left: 11pt;text-indent: 0pt;line-height: 107%;text-align: center;">Decryption, Secure Boot and Secure Debug Unlock</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 26pt;text-indent: -13pt;line-height: 107%;text-align: left;">Enable Secure Debug</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;text-indent: 0pt;text-align: center;">Figure 3.1.  Series 2 High-Level Production Programming Flowchart for Secure Boot-Disabled Devices</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Upgrading the Secure Element Firmware, and flashing the bootloader and application firmware are required steps in the production pro- gramming process. Provisioning the GBL Decryption Key for GBL payload decryption, Public Sign Key for Secure Boot, and Public Command Key for Secure Debug Unlock are strongly recommended. Enabling the Secure Debug feature is optional.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark11" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">A more detailed version of the Series 2 production programming flowchart for a Secure Boot-disabled device is illustrated in </a><a href="#bookmark11">Figure</a></p></li><li><p class="s9" style="padding-left: 39pt;text-indent: -15pt;text-align: left;"><a href="#bookmark11" class="a">Series 2 Step-by-Step Production Programming Flowchart for a Secure Boot-Disabled Device on page </a>6<span style=" color: #000;">.</span></p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 87pt;text-indent: -23pt;line-height: 107%;text-align: left;"><a name="bookmark11">SE/VSE Firmware Upgrade</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="95" alt="image" src="an1222-efr32xg2x-production-programming/Image_014.png"/></span></p><p class="s14" style="padding-top: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: center;">Flash Bootloader Firmware</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 3pt;padding-left: 14pt;text-indent: 0pt;text-align: center;">Flash Application Firmware</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 12pt;text-indent: 26pt;line-height: 107%;text-align: left;">Bootloader and Application Programming</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_015.png"/></span></p><h4 style="padding-left: 49pt;text-indent: -11pt;line-height: 107%;text-align: left;">Provision Keys</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="188" alt="image" src="an1222-efr32xg2x-production-programming/Image_016.png"/></span></p><p class="s14" style="padding-top: 5pt;padding-left: 23pt;text-indent: -16pt;text-align: left;">Enable Secure Debug</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 79pt;text-indent: -20pt;line-height: 107%;text-align: left;">Enable Secure Debug</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 96pt;text-indent: 0pt;text-align: left;"><span><img width="7" height="33" alt="image" src="an1222-efr32xg2x-production-programming/Image_017.png"/></span>	<span><img width="7" height="33" alt="image" src="an1222-efr32xg2x-production-programming/Image_018.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="43" alt="image" src="an1222-efr32xg2x-production-programming/Image_019.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="32" alt="image" src="an1222-efr32xg2x-production-programming/Image_020.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="33" alt="image" src="an1222-efr32xg2x-production-programming/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="346" alt="image" src="an1222-efr32xg2x-production-programming/Image_022.png"/></span></p><p class="s14" style="padding-top: 5pt;padding-left: 8pt;text-indent: 6pt;text-align: left;">Verify correct SE/VSE Version</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 3pt;padding-left: 13pt;text-indent: 0pt;text-align: center;">Run SE/VSE Firmware Application</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 3pt;padding-left: 13pt;text-indent: 0pt;text-align: center;">Flash SE/VSE Firmware Application</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 5pt;padding-left: 9pt;text-indent: 3pt;text-align: left;">Check Current SE/VSE Version</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;text-align: center;">Check Hardware Connections</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="174" height="23" alt="image" src="an1222-efr32xg2x-production-programming/Image_023.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 44pt;text-indent: 0pt;text-align: center;">Required</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_024.png"/></span></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:33pt"><td style="width:73pt" colspan="2" bgcolor="#A0B82D"><p class="s16" style="padding-top: 5pt;padding-left: 4pt;padding-right: 3pt;text-indent: 3pt;text-align: left;">Provision GBL Decryption Key1</p></td></tr><tr style="height:37pt"><td style="width:37pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:36pt;border-left-style:solid;border-left-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_025.png"/></span></p></td></tr><tr style="height:33pt"><td style="width:73pt" colspan="2" bgcolor="#A0B82D"><p class="s16" style="padding-top: 5pt;padding-left: 18pt;padding-right: 3pt;text-indent: -14pt;text-align: left;">Provision Public Sign Key</p></td></tr><tr style="height:37pt"><td style="width:37pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 33pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_026.png"/></span></p></td><td style="width:36pt;border-left-style:solid;border-left-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:33pt"><td style="width:73pt" colspan="2" bgcolor="#A0B82D"><p class="s16" style="padding-top: 4pt;padding-left: 6pt;padding-right: 3pt;text-indent: -2pt;text-align: left;">Provision Public Command Key</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s11" style="padding-left: 252pt;text-indent: 0pt;text-align: left;">1<b>The GBL Decryption Key can only be provisioned on SE devices.</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="174" height="23" alt="image" src="an1222-efr32xg2x-production-programming/Image_027.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">Strongly Recommended</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="174" height="23" alt="image" src="an1222-efr32xg2x-production-programming/Image_028.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 44pt;text-indent: 0pt;text-align: center;">Optional</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="text-indent: 0pt;text-align: center;">Figure 3.2.  Series 2 Step-by-Step Production Programming Flowchart for a Secure Boot-Disabled Device</p><p class="s4" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a name="bookmark8">3.2 Production Programming for Secure Boot-Enabled Devices</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="163" height="25" alt="image" src="an1222-efr32xg2x-production-programming/Image_029.png"/></span></p><p class="s18" style="padding-top: 3pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">Strongly Recommended</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="391" height="25" alt="image" src="an1222-efr32xg2x-production-programming/Image_030.png"/></span></p><p class="s18" style="padding-top: 3pt;padding-left: 123pt;text-indent: 0pt;text-align: center;">Required</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="107" height="25" alt="image" src="an1222-efr32xg2x-production-programming/Image_031.png"/></span></p><p class="s18" style="padding-top: 3pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">Optional</p><p style="text-indent: 0pt;text-align: left;"/><p class="s9" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="#bookmark12" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">The production programming flow for Secure Boot-enabled devices is illustrated in </a><a href="#bookmark12" class="a">Figure 3.3 Series 2 High-Level Production Program- </a>ming Flowchart for Secure Boot-Enabled Devices on page 7<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-style: normal; font-weight: normal; text-decoration: none;">		</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="108" height="108" alt="image" src="an1222-efr32xg2x-production-programming/Image_032.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s19" style="padding-left: 25pt;text-indent: -12pt;line-height: 109%;text-align: left;">Update SE/VSE firmware</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="108" alt="image" src="an1222-efr32xg2x-production-programming/Image_033.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="108" alt="image" src="an1222-efr32xg2x-production-programming/Image_034.png"/></span></p><p class="s19" style="padding-top: 5pt;padding-left: 170pt;text-indent: 0pt;text-align: left;"><a name="bookmark12">Download</a></p><p class="s20" style="padding-left: 172pt;text-indent: 0pt;text-align: left;">SIGNED            <span class="s21">            </span></p><p class="s22" style="padding-left: 121pt;text-indent: 0pt;text-align: left;"> <span class="s23">           </span><span class="s24">         </span><span class="s19">Bootloader and</span></p><p class="s19" style="padding-left: 172pt;text-indent: -4pt;line-height: 109%;text-align: left;">Application firmware</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s19" style="padding-left: 12pt;text-indent: 0pt;text-align: left;">Provision key for</p><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="108" alt="image" src="an1222-efr32xg2x-production-programming/Image_035.png"/></span></p><p class="s19" style="padding-left: 12pt;text-indent: 0pt;text-align: left;">Secure Boot and     <span class="s23">            </span></p><p class="s19" style="padding-left: 33pt;text-indent: -17pt;line-height: 109%;text-align: left;">Enable Secure Boot</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s19" style="padding-left: 202pt;text-indent: 0pt;text-align: center;">Provision keys</p><p style="text-indent: 0pt;text-align: left;"><span><img width="114" height="108" alt="image" src="an1222-efr32xg2x-production-programming/Image_036.png"/></span></p><p class="s19" style="padding-left: 27pt;text-indent: 0pt;text-align: left;">for GBL            <span class="s23">             </span></p><p class="s19" style="padding-left: 202pt;text-indent: 0pt;line-height: 109%;text-align: center;">Decryption and Secure Debug Unlock</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s19" style="padding-left: 29pt;text-indent: -14pt;line-height: 109%;text-align: left;">Enable Secure Debug</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;text-indent: 0pt;text-align: center;">Figure 3.3.  Series 2 High-Level Production Programming Flowchart for Secure Boot-Enabled Devices</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Upgrading the Secure Element Firmware, and flashing the <b>SIGNED </b>bootloader and application firmware are required steps in the pro- duction programming process. Provisioning the Public Sign Key and enabling Secure Boot are also required in the production program- ming process to enable the Secure Boot option. Provisioning the GBL Decryption Key for GBL payload decryption and the Public Com- mand Key for Secure Debug Unlock are strongly recommended. Enabling the Secure Debug feature is optional.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark13" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">A more detailed version of the Series 2 production programming flowchart for a Secure Boot-enabled device is illustrated in </a><a href="#bookmark13">Figure</a></p><ol id="l9"><ol id="l10"><li><p class="s9" style="padding-left: 39pt;text-indent: -15pt;text-align: left;"><a href="#bookmark13" class="a">Series 2 Step-by-Step Production Programming Flowchart for a Secure Boot-Enabled Device on page </a>7<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 70pt;text-indent: -22pt;line-height: 106%;text-align: left;"><a name="bookmark13">SE/VSE Firmware Upgrade</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_037.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_038.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_039.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_040.png"/></span></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:41pt"><td style="width:115pt" colspan="2" bgcolor="#D81E2A"><p class="s16" style="padding-top: 3pt;padding-left: 17pt;padding-right: 16pt;text-indent: 0pt;text-align: center;">Flash <span class="s25">SIGNED </span>Bootloader Firmware1</p></td></tr><tr style="height:24pt"><td style="width:57pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 54pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_041.png"/></span></p></td><td style="width:58pt;border-left-style:solid;border-left-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:41pt"><td style="width:115pt" colspan="2" bgcolor="#D81E2A"><p class="s16" style="padding-top: 3pt;padding-left: 17pt;padding-right: 17pt;text-indent: 0pt;text-align: center;">Flash <span class="s25">(UN)SIGNED</span></p><p class="s16" style="padding-left: 17pt;padding-right: 17pt;text-indent: 0pt;text-align: center;">Application Firmware2</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 17pt;text-indent: 26pt;line-height: 106%;text-align: left;">Bootloader and Application Programming</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="56" height="94" alt="image" src="an1222-efr32xg2x-production-programming/Image_042.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">Provision Public Command Key5</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 4pt;padding-left: 9pt;text-indent: 3pt;text-align: left;">Provision GBL Decryption Key4</p><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse" cellspacing="0"><tr style="height:21pt"><td style="width:83pt" rowspan="2" bgcolor="#D81E2A"><p class="s16" style="padding-top: 3pt;padding-left: 17pt;padding-right: 16pt;text-indent: 0pt;text-align: center;">Check Hardware Connections</p></td><td style="width:36pt" colspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:19pt"><td style="width:19pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:17pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:4pt" rowspan="9"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:24pt"><td style="width:41pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:61pt;border-left-style:solid;border-left-width:1pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_043.png"/></span></p></td></tr><tr style="height:32pt"><td style="width:83pt" bgcolor="#D81E2A"><p class="s16" style="padding-top: 4pt;padding-left: 9pt;text-indent: 3pt;text-align: left;">Check Current SE/VSE Version</p></td><td style="width:19pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:32pt"><td style="width:41pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:61pt;border-left-style:solid;border-left-width:1pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_044.png"/></span></p></td></tr><tr style="height:41pt"><td style="width:83pt" bgcolor="#D81E2A"><p class="s16" style="padding-top: 3pt;padding-left: 12pt;padding-right: 11pt;text-indent: 0pt;text-align: center;">Flash SE/VSE Firmware Application</p></td><td style="width:19pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:24pt"><td style="width:41pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:61pt;border-left-style:solid;border-left-width:1pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="6" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_045.png"/></span></p></td></tr><tr style="height:40pt"><td style="width:83pt" bgcolor="#D81E2A"><p class="s16" style="padding-top: 3pt;padding-left: 12pt;padding-right: 11pt;text-indent: 0pt;text-align: center;">Run SE/VSE Firmware Application</p></td><td style="width:19pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:24pt"><td style="width:41pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:61pt;border-left-style:solid;border-left-width:1pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_046.png"/></span></p></td></tr><tr style="height:16pt"><td style="width:83pt" rowspan="2" bgcolor="#D81E2A"><p class="s16" style="padding-top: 4pt;padding-left: 8pt;text-indent: 6pt;text-align: left;">Verify correct SE/VSE Version</p></td><td style="width:19pt;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:4pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:16pt"><td style="width:36pt" colspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 22pt;text-indent: 3pt;line-height: 106%;text-align: left;">Provision Key and Enable Secure Boot</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="48" alt="image" src="an1222-efr32xg2x-production-programming/Image_047.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="57" height="95" alt="image" src="an1222-efr32xg2x-production-programming/Image_048.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_049.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="48" alt="image" src="an1222-efr32xg2x-production-programming/Image_050.png"/></span></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:32pt"><td style="width:83pt" colspan="2" bgcolor="#D81E2A"><p class="s16" style="padding-top: 4pt;padding-left: 23pt;text-indent: -13pt;text-align: left;">Provision Public Sign Key</p></td></tr><tr style="height:36pt"><td style="width:41pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 38pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_051.png"/></span></p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:32pt"><td style="width:83pt" colspan="2" bgcolor="#D81E2A"><p class="s16" style="padding-top: 4pt;padding-left: 30pt;text-indent: -18pt;text-align: left;">Enable Secure Boot3</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><h4 style="padding-left: 15pt;text-indent: 5pt;line-height: 106%;text-align: left;">Provision Keys and Enable Secure Debug</h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_052.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="7" height="7" alt="image" src="an1222-efr32xg2x-production-programming/Image_053.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="172" height="22" alt="image" src="an1222-efr32xg2x-production-programming/Image_054.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">Strongly Recommended</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="172" height="22" alt="image" src="an1222-efr32xg2x-production-programming/Image_055.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 43pt;text-indent: 0pt;text-align: center;">Required</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="172" height="22" alt="image" src="an1222-efr32xg2x-production-programming/Image_056.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 43pt;text-indent: 0pt;text-align: center;">Optional</p><p style="text-indent: 0pt;text-align: left;"/><p class="s14" style="padding-top: 4pt;padding-left: 27pt;text-indent: -16pt;text-align: left;">Enable Secure Debug</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;text-indent: 0pt;text-align: center;">Figure 3.4.  Series 2 Step-by-Step Production Programming Flowchart for a Secure Boot-Enabled Device</p><p class="s4" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Note:</p><ol id="l11"><li><p class="s9" style="padding-top: 3pt;padding-left: 42pt;text-indent: -8pt;text-align: left;"><a href="#bookmark34" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">The device will enter the Secure Boot failed state if the bootloader firmware is either unsigned or incorrectly signed (see </a><a href="#bookmark34" class="a">7. Boot- loader </a>Firmware Programming<span style=" color: #000;">).</span></p></li><li><p class="s9" style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;"><a href="#bookmark36" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">If the Secure Boot option is enabled in the bootloader, the application firmware must be signed (see </a><a href="#bookmark36" class="a">8. Application Firmware Pro-</a> gramming<span style=" color: #000;">).</span></p></li><li><p class="s9" style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;"><a href="#bookmark44" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">On SE with Secure Vault devices, the anti-tamper protection configuration is provisioned with Secure Boot settings (see </a><a href="#bookmark44" class="a">10. Ena-</a> bling Secure Boot<span style=" color: #000;">).</span></p></li><li><p style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">The GBL Decryption Key can only be provisioned on SE devices.</p></li><li><p style="padding-top: 3pt;padding-left: 42pt;text-indent: -8pt;text-align: left;">The Public Command Key can also be used to temporarily disable anti-tamper protection on SE with Secure Vault devices (see<a href="https://www.silabs.com/documents/public/application-notes/an1247-efr32-secure-vault-tamper.pdf" class="a" target="_blank"> AN1247: Anti-Tamper Protection Configuration and </a><span style=" color: #049;">Use</span>).</p></li></ol></li></ol></ol><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Using Simplicity Commander</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_057.png"/></span></p><ol id="l12"><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark14">Using Simplicity Commander</a><a name="bookmark15">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l13"><li><p style="padding-left: 42pt;text-indent: -8pt;text-align: left;">Simplicity Commander&#39;s Command Line Interface (CLI) is invoked by <span class="s26">commander.exe </span>in the Simplicity Commander folder. The lo- cation in Windows is <span class="s26">C:\SiliconLabs\SimplicityStudio\&lt;version&gt;\developer\adapter_packs\commander</span>.</p></li><li><p style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Simplicity Commander Version 1.9.2 is used in this application note.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 39pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander --version                                                                                          </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Simplicity Commander 1v9p2b791</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">JLink DLL version: 6.70a</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Qt 5.5.1 Copyright (C) 2017 The Qt Company Ltd.</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">EMDLL Version: 0v17p12b535 mbed TLS version: 2.6.1</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 19pt;text-align: left;">Emulator found with SN=440068705 USBAddr=0 DONE</p><p style="padding-left: 39pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 4pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">The target Wireless Starter Kit (WSTK) must be specified using the <span class="s26">--serialno &lt;J-Link serial number&gt; </span>option if more than one WSTK is connected via USB.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">The target device must be specified using the <span class="s26">--device &lt;device name&gt; </span>option if the WSTK is in debug mode OUT.</p></li><li><p class="s9" style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;"><a href="https://www.silabs.com/documents/public/user-guides/ug162-simplicity-commander-reference-guide.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">For more information about Simplicity Commander, see </a><a href="https://www.silabs.com/documents/public/user-guides/ug162-simplicity-commander-reference-guide.pdf" class="a" target="_blank">UG162: Simplicity Commander Reference </a>Guide<span style=" color: #000;">.</span></p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark16">Secure Element Firmware Programming</a></h3></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l14"><ol id="l15"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark17">Overview</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Production programming of Series 2 devices is identical to production programming of Series 1 devices, with the addition of the Secure Element Firmware in the production programming process. Consistent with best practices for Internet of Things (IoT) security, the Se- cure Element Firmware provided with Series 2 devices supports secure firmware updates. Silicon Labs will periodically release new versions of the Secure Element Firmware to fix bugs and patch vulnerabilities, which may require updates to devices on the manufac- turing line or to devices already in the field.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Silicon Labs operates under a &quot;Security as a Shared Responsibility Model.&quot; This model provides flexibility to system integrators to man- age Secure Element Firmware security updates on their own timetable based on their product&#39;s use case, risk assessment, agility of their manufacturing flow, and the agility of their field firmware deployment flow.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Series 2 devices will rarely ship with the latest Secure Element Firmware installed, meaning system integrators must add Secure Ele- ment Firmware programming to their production programming flow.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In all cases, Silicon Labs recommends that system integrators:</p><ul id="l16"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Subscribe to security notifications by managing their notification settings in the Silicon Labs Support Portal. This is the easiest meth- od to be notified of Secure Element Firmware updates and discovered vulnerabilities.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Ensure they are installing the latest Secure Element Firmware release in their manufacturing line.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Be prepared to deploy security-related field updates to devices in the field.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-top: 5pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark18">How to Check the Secure Element Firmware Version on a Device</a><a name="bookmark28">&zwnj;</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The Secure Element Firmware version of the device can be found in two ways.</p><ul id="l17"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Simplicity Studio</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Simplicity Commander</p></li></ul><p class="s9" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark29" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">At the time of this writing, the latest Secure Element Firmware shipped with Series 2 devices and modules (if available) are listed in </a>Table 5.1 Latest Secure Element Firmware Version on Shipped Series 2 Devices and Modules on page 10<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 8pt;padding-left: 1pt;text-indent: 0pt;text-align: center;"><a name="bookmark29">Table 5.1.  Latest Secure Element Firmware Version on Shipped Series 2 Devices and Modules</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:30pt"><td style="width:135pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Wireless SoC Series 2</p></td><td style="width:152pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Secure Element</p></td><td style="width:253pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;padding-right: 12pt;text-indent: 0pt;text-align: left;">Shipped Secure Element Firmware Version (Device and Module)</p></td></tr><tr style="height:19pt"><td style="width:135pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32xG21A</p></td><td style="width:152pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SE without Secure Vault</p></td><td style="width:253pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Version 1.2.1</p></td></tr><tr style="height:19pt"><td style="width:135pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32xG21B</p></td><td style="width:152pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SE with Secure Vault</p></td><td style="width:253pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Version 1.2.1</p></td></tr><tr style="height:19pt"><td style="width:135pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EFR32xG22</p></td><td style="width:152pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">VSE</p></td><td style="width:253pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Version 1.2.1</p></td></tr></table><ol id="l18"><li><p class="s4" style="padding-top: 8pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark19">Check the Secure Element Firmware Version Using Simplicity Studio 5</a><a name="bookmark30">&zwnj;</a></p><ol id="l19"><li><p style="padding-top: 8pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Change the Wireless Starter Kit (WSTK) <b>Debug Mode: </b>to <b>OUT</b>.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Right-click the selected debug adapter <b>Custom Board (ID:J-Link serial number) </b>to display the context menu.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 160pt;text-indent: 0pt;text-align: left;"><span><img width="406" height="315" alt="image" src="an1222-efr32xg2x-production-programming/Image_058.jpg"/></span></p><p class="s4" style="padding-top: 7pt;padding-left: 214pt;text-indent: 0pt;text-align: left;">Figure 5.1. Context Menu of Debug Adapters</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 42pt;text-indent: -8pt;text-align: left;">Click <b>Device configuration... </b>to open the <b>Configuration of device: J-Link Silicon Labs (serial number) </b>dialog box. Click the</p><p class="s4" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">Device hardware <span class="p">tab to enter the part number in the </span>Target part: <span class="p">box.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 122pt;text-indent: 0pt;text-align: left;"><span><img width="506" height="411" alt="image" src="an1222-efr32xg2x-production-programming/Image_059.jpg"/></span></p><p class="s4" style="padding-top: 7pt;padding-left: 36pt;text-indent: 0pt;text-align: center;">Figure 5.2.  Configuration of Device</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 41pt;text-indent: -8pt;text-align: left;">Click [<b>OK</b>] to exit.</p></li><li><p style="padding-top: 8pt;padding-left: 41pt;text-indent: -42pt;text-align: right;">Connect the device to the WSTK. Select the device in the <b>Debug Adapters </b>view.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;"><span><img width="676" height="456" alt="image" src="an1222-efr32xg2x-production-programming/Image_060.jpg"/></span></p><p class="s4" style="padding-top: 7pt;padding-left: 171pt;text-indent: 0pt;text-align: left;">Figure 5.3. Secure Element Firmware Version in Simplicity Studio</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 42pt;text-indent: -8pt;text-align: left;">The Secure Element Firmware version will appear in the <b>Secure FW: </b>line. In this example, the SE firmware version on the EFR32MG21A is 1.2.1.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s4" style="padding-left: 49pt;text-indent: -49pt;text-align: right;"><a name="bookmark20">Check the Secure Element Firmware Version Using Simplicity Commander</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To check the Secure Element Firmware version on the device, you must issue the Simplicity Commander security command <span class="s26">security status</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security status --device EFR32MG22C224F512 --serialno 440068705                                       </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SE Firmware version : 1.2.1</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Serial number  : 000000000000000014b457fffed50d1e Debug lock : Disabled</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Device erase   : Enabled Secure debug unlock : Disabled Secure boot : Disabled</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Boot status     : 0x20 - OK DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">In this example, the VSE firmware version on the EFR32MG22 is 1.2.1.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s4" style="padding-top: 5pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark21">How to Find the Latest Secure Element Firmware</a></p><p class="s9" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a href="https://www.silabs.com/documents/public/user-guides/ug266-gecko-bootloader-user-guide.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Instructions on retrieving the latest version of the Secure Element Firmware can be found in section &quot;Gecko Bootloader Operation - Secure Element Upgrade&quot; in </a>UG266: Silicon Labs Gecko Bootloader User&#39;s Guide<span style=" color: #000;">.</span></p></li><li><p class="s4" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark22">Serial Wire Debug (SWD)</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="144" height="163" alt="image" src="an1222-efr32xg2x-production-programming/Image_061.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="168" height="271" alt="image" src="an1222-efr32xg2x-production-programming/Image_062.png"/></span></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Secure Element Firmware cannot be directly programmed to the Secure Element using the SWD interface. Instead, a loader appli- cation that contains and will install the Secure Element Firmware is flashed onto the host MCU. The Secure Element Firmware is en- crypted, versioned, and signed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:163.812pt" cellspacing="0"><tr style="height:31pt"><td style="width:122pt;border-top-style:solid;border-top-width:1pt;border-top-color:#797777;border-left-style:solid;border-left-width:1pt;border-left-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s29" style="padding-right: 42pt;text-indent: 0pt;text-align: right;">Device</p></td><td style="width:4pt;border-top-style:solid;border-top-width:1pt;border-top-color:#797777;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:1pt;border-right-color:#797777" rowspan="4" bgcolor="#F2F2F2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-bottom-style:solid;border-bottom-width:2pt;border-right-style:solid;border-right-width:1pt;border-right-color:#797777" rowspan="4"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:108pt;border-top-style:solid;border-top-width:1pt;border-top-color:#797777;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s29" style="padding-left: 25pt;padding-right: 25pt;text-indent: 0pt;text-align: center;">Computer</p></td></tr><tr style="height:18pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:108pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777"><p class="s30" style="padding-top: 6pt;padding-left: 25pt;padding-right: 25pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Loader</p></td></tr><tr style="height:13pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:108pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777"><p class="s30" style="padding-left: 25pt;padding-right: 25pt;text-indent: 0pt;line-height: 11pt;text-align: center;">Application</p></td></tr><tr style="height:6pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777" rowspan="2"><p class="s29" style="padding-top: 1pt;padding-left: 50pt;padding-right: 46pt;text-indent: 0pt;text-align: center;">Host</p></td><td style="width:108pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777" rowspan="2"><p class="s30" style="padding-top: 5pt;padding-left: 25pt;padding-right: 25pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Secure</p></td></tr><tr style="height:11pt"><td style="width:4pt;border-top-style:solid;border-top-width:2pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777" rowspan="5" bgcolor="#F2F2F2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:27pt;border-top-style:solid;border-top-width:2pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777" rowspan="3"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:11pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:108pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777"><p class="s30" style="padding-left: 25pt;padding-right: 25pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Element</p></td></tr><tr style="height:25pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:108pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#797777;border-right-style:solid;border-right-width:1pt;border-right-color:#797777"><p class="s30" style="padding-left: 25pt;padding-right: 25pt;text-indent: 0pt;line-height: 11pt;text-align: center;">Firmware</p></td></tr><tr style="height:46pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s29" style="padding-top: 8pt;padding-right: 42pt;text-indent: 0pt;line-height: 10pt;text-align: right;">Secure</p></td><td style="width:135pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777" colspan="2" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:34pt"><td style="width:122pt;border-left-style:solid;border-left-width:1pt;border-left-color:#797777;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#797777"><p class="s29" style="padding-right: 39pt;text-indent: 0pt;line-height: 11pt;text-align: right;">Element</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;text-indent: 0pt;text-align: center;">Figure 5.4.  SWD Secure Element Firmware Upgrade Block Diagram</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Using the SWD interface, the user flashes the loader application onto the host. The host then runs the loader application, which checks the signature and version of the Secure Element Firmware. If the signature check passes and the upgrade&#39;s version number is higher than the device&#39;s Secure Element Firmware version, the firmware is applied to the Secure Element. The upgrade will not be applied if the signature check fails or if the upgrade&#39;s version number is less than or equal to the device&#39;s Secure Element Firmware version. Trying to apply a lower Secure Element Firmware version to the device does no harm, but the upgrade will be ignored. This also means the device&#39;s Secure Element Firmware cannot be downgraded. After the Secure Element Firmware has been upgraded, the loader ap- plication can be deleted and the application firmware can be flashed via the SWD interface.</p><p class="s9" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark11" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">As detailed in </a>Figure 3.2 Series 2 Step-by-Step Production Programming Flowchart for a Secure Boot-Disabled Device on page 6 <a href="#bookmark13" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">or </a>Figure 3.4 Series 2 Step-by-Step Production Programming Flowchart for a Secure Boot-Enabled Device on page 7<span style=" color: #000;">, the steps to up- grade the Secure Element Firmware are:</span></p><ol id="l20"><li><p style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Connect Hardware: Connect the device&#39;s SWD interface with the WSTK and ensure proper connections</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Check Version: Check the Secure Element Firmware version already on the device</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Flash Secure Element Firmware: Flash the loader application onto the host processor.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Run: Allow the loader application to run and install the Secure Element Firmware.</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Re-Check Version: Ensure the update succeeded</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Each of these steps is described in more detail in the next sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l21"><li><p class="s4" style="padding-top: 5pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark23">Connect Hardware</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">After connecting the device&#39;s SWD interface to the WSTK, try to read the device information using Simplicity Commander, to verify that proper connections were established to the device.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander device info --device EFR32MG21A010F1024 --serialno 440068705                                          </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Part Number : EFR32MG21A010F1024</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Die Revision : A1 Production Ver : 0</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Flash Size : 1024 kB</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">SRAM Size : 96 kB</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Unique ID  : 000d6ffffead3d94 DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/></li><li><p class="s4" style="padding-top: 8pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark24">Check Version</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To check the Secure Element Firmware version on the device, issue the Simplicity Commander security command <span class="s26">security status</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">commander security status --device EFR32MG21A010F1024 --serialno 440068705</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SE Firmware version : 1.2.0</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Serial number  : 0000000000000000000d6ffffead3d94 Debug lock : Disabled</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Device erase   : Enabled Secure debug unlock : Disabled Tamper status : OK</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Secure boot : Disabled</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Boot status     : 0x20 - OK DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><b>Note: </b>The <span class="s26">Tamper status </span>item is device-dependent.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark25">Flash Secure Element Firmware</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">To flash the Secure Element Firmware upgrade application, run</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">commander flash --masserase s2c1_se_fw_upgrade_app_1v2p1.hex --device EFR32MG21A010F1024 --serialno 440068705</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">where <span class="s26">s2c1_se_fw_upgrade_app_1v2p1.hex </span>is replaced with the name of the Secure Element Firmware upgrade application file.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Parsing file s2c1_se_fw_upgrade_app_1v2p1.hex... Erasing chip...</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Flash was erased successfully</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Writing 49152 bytes starting at address 0x00000000 Comparing range 0x00000000 - 0x0000BFFF (48 KB) Programming range 0x00000000 - 0x00001FFF (8 KB) Programming range 0x00002000 - 0x00003FFF (8 KB) Programming range 0x00004000 - 0x00005FFF (8 KB) Programming range 0x00006000 - 0x00007FFF (8 KB) Programming range 0x00008000 - 0x00009FFF (8 KB) Programming range 0x0000A000 - 0x0000BFFF (8 KB) Verifying range 0x00000000 - 0x0000BFFF (48 KB) DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-top: 4pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark26">Run</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Allow the Secure Element Firmware upgrade application to run for at least two seconds. After two seconds, the Secure Element Firm- ware should have been upgraded.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark27">Re-Check Version</a></p></li></ol></li></ol></li></ol></ol><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Run the <span class="s26">security status </span>command again to check the upgraded Secure Element Firmware version.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">commander security status --device EFR32MG21A010F1024 --serialno 440068705</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SE Firmware version : 1.2.1</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Serial number  : 0000000000000000000d6ffffead3d94 Debug lock : Disabled</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Device erase   : Enabled Secure debug unlock : Disabled Tamper status : OK</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Secure boot : Disabled</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Boot status     : 0x20 - OK DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The version is now upgraded to 1.2.1.</p><p class="s8" style="padding-bottom: 3pt;padding-left: 212pt;text-indent: 0pt;text-align: left;">Field Upgrade the Secure Element Firmware on a Secure Boot-Enabled Device</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_063.png"/></span></p><ol id="l22"><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark31">Field Upgrade the Secure Element Firmware on a Secure Boot-Enabled Device</a><a name="bookmark32">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">If debug access was locked (standard or secure), the device must be unlocked before the Secure Element Firmware upgrade.</p><p class="s9" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="https://www.silabs.com/documents/public/application-notes/an1190-efr32-secure-debug.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Instructions on how to unlock the device can be found in sections &quot;Standard Debug Lock and Unlock&quot; and &quot;Secure Debug Unlock&quot; of </a>AN1190: Series 2 Secure Debug<span style=" color: #000;">.</span></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">If Secure Boot was enabled, a <b>SIGNED </b>version of the Secure Element Firmware (<span class="s26">.seu </span><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">file) must be used for upgrade. Additional firm- ware signing information can be found in sections &quot;ECDSA-P256-SHA256 Secure Boot&quot; and &quot;Certificate-Based Secure Boot&quot; of </a><span style=" color: #049;">AN1218: Series 2 Secure Boot with RTSL</span>.</p><p class="s9" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="https://www.silabs.com/documents/public/user-guides/ug266-gecko-bootloader-user-guide.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Details on Secure Element Firmware upgrade can be found in section &quot;Gecko Bootloader Operation - Secure Element Upgrade&quot; in </a>UG266: Silicon Labs Gecko Bootloader User&#39;s Guide<span style=" color: #000;">.</span></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The Gecko Bootloader can parse the Secure Element Firmware GBL upgrade file and flash its content to the device.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">ECDSA-P256-SHA256 Secure Boot Device:</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To generate the Secure Element Firmware GBL upgrade file, run</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander gbl create </span><span class="s31" style=" background-color: #D8D8D8;">seupgrade.gbl </span><span class="s27" style=" background-color: #D8D8D8;">--seupgrade </span><span class="s31" style=" background-color: #D8D8D8;">s2c1_se_fw_upgrade_1v2p1.seu </span><span class="s27" style=" background-color: #D8D8D8;">--sign </span><span class="s31" style=" background-color: #D8D8D8;">signing-key                  </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">where <span class="s26">s2c1_se_fw_upgrade_1v2p1.seu </span>is the Secure Element Firmware upgrade file and <span class="s26">signing-key </span>is the Private Sign Key for Secure Boot.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Initializing GBL file...</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Adding Secure Element upgrade image to GBL... Signing GBL...</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Image SHA256: d09e4c9c9c2929f48e006b1ad1c7eadb7a3b60e724e873b837d2ccf7073cfff4 R = AD2F4563A015ABE8BD5EDA78BBBEB4AD94D6FA750892867BB3800E4049A63F21</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">S = FE905B92BEE2C84670ABD16B08623441DBE5ED9B6FD1BEB07858B944AE06EE90</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Writing GBL file seupgrade.gbl... DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Note: <span class="p">A copy of the Public Sign Key must be stored in the top page of the main flash (manufacturing token) for VSE firmware upgrade on an ECDSA-P256-SHA256 Secure Boot Device.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Certificate-based Secure Boot Device:</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To generate the Secure Element Firmware GBL upgrade file, run</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander gbl create </span><span class="s31" style=" background-color: #D8D8D8;">seupgrade.gbl </span><span class="s27" style=" background-color: #D8D8D8;">--seupgrade </span><span class="s31" style=" background-color: #D8D8D8;">s2c1_se_fw_upgrade_1v2p1.seu </span><span class="s27" style=" background-color: #D8D8D8;">--sign </span><span class="s31" style=" background-color: #D8D8D8;">bloadercert_key.pem          </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">where <span class="s26">s2c1_se_fw_upgrade_1v2p1.seu </span>is the Secure Element Firmware upgrade file and <span class="s26">bloadercert_key.pem </span>is the Private Boot- loader Key to sign the bootloader certificate.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Initializing GBL file...</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Adding Secure Element upgrade image to GBL... Signing GBL...</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Image SHA256: d09e4c9c9c2929f48e006b1ad1c7eadb7a3b60e724e873b837d2ccf7073cfff4 R = 6B88E107E264AE702636C0DB7500BCB69ECE387E963C8C000D3E4CD758ECE4A4</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">S = 321FEF0E28447A03725590E468E44C3CCED0985E88AB84463A4FC94FF4FA0494</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Writing GBL file seupgrade.gbl... DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Bootloader Firmware Programming</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_064.png"/></span></p></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark33">Bootloader Firmware Programming</a><a name="bookmark34">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">If Secure Boot is enabled, a <b>SIGNED </b>version of the bootloader firmware must be programmed to the flash.</p><p class="s9" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Instructions on how to sign the bootloader firmware can be found in sections &quot;ECDSA-P256-SHA256 Secure Boot&quot; and &quot;Certificate- Based Secure Boot&quot; of </a>AN1218: Series 2 Secure Boot with RTSL<span style=" color: #000;">.</span></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">For Series 2 devices, the bootloader is placed at address <span class="s26">0x00000000</span>. Silicon Labs recommends reserving 16 kB for the bootloader for SE devices and 24 kB for VSE devices.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Flashing the bootloader firmware using Simplicity Commander is similar to flashing the Secure Element Firmware upgrade application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander flash --masserase &lt;bootloader file&gt; --device &lt;device name&gt; --serialno &lt;J-Link serial number&gt;          </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">where <span class="s26">&lt;bootloader file&gt; </span>is the name of the bootloader firmware file.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To check the Boot status of the device, run the <span class="s26">security status </span>command.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="728" height="125" alt="image" src="an1222-efr32xg2x-production-programming/Image_065.png"/></span></p><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Secure debug unlock : Disabled Tamper status : OK</p><p class="s28" style="text-indent: 0pt;text-align: left;">Secure boot : Enabled</p><p class="s28" style="text-indent: 0pt;text-align: left;">Boot status : 0x20 - OK</p><p class="s26" style="text-indent: 0pt;text-align: left;">DONE</p><p style="text-indent: 0pt;text-align: left;"/><p class="s26" style="text-indent: 0pt;text-align: left;">: 0000000000000000000d6ffffead3d94</p><p class="s26" style="text-indent: 0pt;text-align: left;">: Disabled</p><p class="s26" style="text-indent: 0pt;text-align: left;">: Enabled</p><p style="text-indent: 0pt;text-align: left;"/><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Serial number Debug lock Device erase</p><p style="text-indent: 0pt;text-align: left;"/><p class="s26" style="text-indent: 0pt;text-align: left;">SE Firmware version : 1.2.1</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security status --device EFR32MG21A010F1024 --serialno 440068705                                      </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Secure Boot process fails if the Boot status is not <span class="s26">0x20 </span>(for example, <span class="s26">0x15 </span><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">- Failed: Error while validating host application proper- ties structure). It means the bootloader firmware is either unsigned or incorrectly signed and the only way to recover is to flash a cor- rectly-signed image (see section &quot;Recover Devices when Secure Boot Fails&quot; in </a><span style=" color: #049;">AN1218: Series 2 Secure Boot with RTSL</span>).</p><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Application Firmware Programming</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_066.png"/></span></p></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark35">Application Firmware Programming</a><a name="bookmark36">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The Secure Element Firmware upgrade via the SWD interface or a field update overwrites application firmware previously written to the flash. The application firmware must be programmed after the Secure Element Firmware upgrade.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">If the Secure Boot option is enabled in the bootloader, a <b>SIGNED </b>version of the application firmware must be programmed to the flash.</p><p class="s9" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Instructions on how to sign the application firmware can be found in sections &quot;ECDSA-P256-SHA256 Secure Boot&quot; and &quot;Certificate- Based Secure Boot&quot; of </a>AN1218: Series 2 Secure Boot with RTSL<span style=" color: #000;">.</span></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">For Series 2 devices, the application firmware is usually placed at address <span class="s26">0x00004000 </span>for SE devices and <span class="s26">0x00006000 </span>for VSE devi- ces.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Flashing the application firmware using Simplicity Commander is similar to flashing the Secure Element Firmware upgrade application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander flash &lt;application file&gt; --device &lt;device name&gt; --serialno &lt;J-Link serial number&gt;                     </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">where <span class="s26">&lt;application file&gt; </span>is the name of the application firmware file.</p><p style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><b>Note: </b>Do not use the --masserase option to flash the application firmware as it will erase the bootloader at <span class="s26">0x00000000</span>.</p></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark37">Key Provisioning</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l23"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark38">Overview</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The symmetric GBL Decryption Key is used to decrypt GBL files. All encrypted images on this device must be encrypted with the same 128-bit AES key.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">If the Secure Boot feature is to be used, the Public Sign Key must first be provisioned to the device.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">If the Secure Debug feature is to be used, the Public Command Key must first be provisioned to the device.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The GBL Decryption Key, Public Sign Key and the Public Command Key are written to one-time-programmable (OTP) memory. Once written, they cannot be changed.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Silicon Labs strongly recommends provisioning these keys even if the Secure Boot and/or Secure Debug features are not used, for future-proofing.</p><p class="s4" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Note: <span class="p">The GBL Decryption Key can only be provisioned on SE devices.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark39">Provisioning the GBL Decryption Key in Simplicity Commander</a><a name="bookmark42">&zwnj;</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To write the GBL Decryption Key to the device, run the command</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security writekey </span><span class="s31" style=" background-color: #D8D8D8;">--decrypt </span><span class="s27" style=" background-color: #D8D8D8;">aes-key.txt --device EFR32MG21A010F1024 --serialno 440068705              </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">where <span class="s26">aes-key.txt </span>is the GBL Decryption Key. This command can be executed only once per device.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Device has serial number 0000000000000000000d6ffffead3d94</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Please look through any warnings before proceeding.</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">THIS IS A ONE-TIME command, all code to be run on the device must be signed by this key. Type &#39;continue&#39; and hit enter to proceed or Ctrl-C to abort:</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">continue DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Note: <span class="p">The GBL Decryption Key cannot be read back from the device.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark40">Provisioning the Public Sign Key in Simplicity Commander</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">To write the Public Sign Key to the device, run the command</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security writekey </span><span class="s31" style=" background-color: #D8D8D8;">--sign </span><span class="s27" style=" background-color: #D8D8D8;">signing-key.pub --device EFR32MG21A010F1024 --serialno 440068705             </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">where <span class="s26">signing-key.pub </span>is the Public Sign Key. This command can be executed only once per device.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Device has serial number 0000000000000000000d6ffffead3d94</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Please look through any warnings before proceeding.</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">THIS IS A ONE-TIME command, all code to be run on the device must be signed by this key. Type &#39;continue&#39; and hit enter to proceed or Ctrl-C to abort:</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">continue DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To read the Public Sign Key on the device, run the command</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security readkey </span><span class="s31" style=" background-color: #D8D8D8;">--sign </span><span class="s27" style=" background-color: #D8D8D8;">--device EFR32MG21A010F1024 --serialno 440068705                              </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: justify;">C4AF4AC69AAB9512DB50F7A26AE5B4801183D85417E729A56DA974F4E08A562C DE6019DEA9411332DC1A743372D170B436238A34597C410EA177024DE20FC819 DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/></li><li><p class="s4" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark41">Provisioning the Public Command Key in Simplicity Commander</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">To write the Public Command Key to the device, run the command</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security writekey </span><span class="s31" style=" background-color: #D8D8D8;">--command </span><span class="s27" style=" background-color: #D8D8D8;">command-key.pub --device EFR32MG21A010F1024 --serialno 440068705          </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">where <span class="s26">command-key.pub </span>is the Public Command Key. This command can be executed only once per device.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Device has serial number 0000000000000000000d6ffffead3d94</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Please look through any warnings before proceeding.</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">THIS IS A ONE-TIME command which permanently ties debug and tamper access to certificates signed by this key. Type &#39;continue&#39; and hit enter to proceed or Ctrl-C to abort:</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">continue DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To read the Public Command Key on the device, run the command</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security readkey </span><span class="s31" style=" background-color: #D8D8D8;">--command </span><span class="s27" style=" background-color: #D8D8D8;">--device EFR32MG21A010F1024 --serialno 440068705                           </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: justify;">B1BC6F6FA56640ED522B2EE0F5B3CF7E5D48F60BE8148F0DC08440F0A4E1DCA4 7C04119ED6A1BE31B7707E5F9D001A659A051003E95E1B936F05C37EA793AD63 DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 45pt;text-indent: -21pt;text-align: left;"><a name="bookmark43">Enabling Secure Boot</a><a name="bookmark44">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">The Secure Boot feature verifies the integrity and authenticity of the host application before allowing it to execute. Enabling this feature is <b>IRREVERSIBLE</b>, which means once enabled, Secure Boot can no longer be disabled throughout the life of the device. The Secure Boot settings are written to a one-time-programmable (OTP) memory. Once written, they cannot be changed.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">On SE with Secure Vault devices, the anti-tamper configuration is provisioned with Secure Boot settings. The anti-tamper configuration determines the response from the SE with Secure Vault if a tamper event occurs.</p><p class="s4" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Note:</p><ul id="l24"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">All tamper-related information in the following sections is only valid on SE with Secure Vault devices.</p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1247-efr32-secure-vault-tamper.pdf" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">For more information about anti-tamper configuration, see </a><a href="https://www.silabs.com/documents/public/application-notes/an1247-efr32-secure-vault-tamper.pdf" class="a" target="_blank">AN1247: Anti-Tamper Protection Configuration and </a>Use<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The following command writes the Secure Boot settings and anti-tamper configuration to the device.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">commander security writeconfig --configfile <b>user_configuration.json </b>--device EFR32MG21A010F1024 --serialno 440068705</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">THIS IS A ONE-TIME configuration: Please inspect file before confirming: user_configuration.json</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Type &#39;continue&#39; and hit enter to proceed or Ctrl-C to abort:</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">continue DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">This command can be executed only once per device. The <span class="s26">user_configuration.json </span>is a JSON file that contains the desired Secure Boot settings and anti-tamper configuration. You can generate a default configuration file by using the following command.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">commander security genconfig -o <b>user_configuration.json </b>--serialno 440068705</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Configuration file stored in: C:/Users/amleung/AppData/Local/SiliconLabs/commander/SecurityStore/device_0000000000000000000d6ffffead3d94/ user_configuration.json</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To check the device&#39;s Secure Boot settings and anti-tamper configuration, run the <span class="s26">security readconfig </span>command.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="713" height="592" alt="image" src="an1222-efr32xg2x-production-programming/Image_067.png"/></span></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security readconfig --serialno 440068705                                                              </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="text-indent: 0pt;text-align: left;">MCU Flags</p><p class="s28" style="text-indent: 0pt;text-align: left;">Secure Boot</p><p class="s28" style="text-indent: 0pt;text-align: left;">: Enabled</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:&quot;Courier New&quot;, monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">	</span></p><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Secure Boot Verify Certificate : Disabled Secure Boot Anti Rollback : Enabled Secure Boot Page Lock Narrow : Disabled Secure Boot Page Lock Full : Enabled</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Tamper Levels FILTER_COUNTER WATCHDOG SE_RAM_CRC SE_HARDFAULT</p><p class="s26" style="text-indent: 0pt;text-align: left;">: 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">: 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">: 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">: 4</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:&quot;Courier New&quot;, monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">	</span></p><p class="s26" style="text-indent: 0pt;text-align: left;">SOFTWARE_ASSERTION : 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">SE_CODE_AUTH : 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">USER_CODE_AUTH : 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">MAILBOX_AUTH : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">DCI_AUTH : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">OTP_READ : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">AUTO_CODE_AUTH : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">SELF_TEST : 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">TRNG_MONITOR : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS0 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS1 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS2 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS3 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS4 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS5 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS6 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">PRS7 : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">DECOUPLE_BOD : 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">TEMP_SENSOR : 1</p><p class="s26" style="text-indent: 0pt;text-align: left;">VGLITCH_FALLING : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">VGLITCH_RISING : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">SECURE_LOCK : 4</p><p class="s26" style="text-indent: 0pt;text-align: left;">SE_DEBUG : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">DGLITCH : 0</p><p class="s26" style="text-indent: 0pt;text-align: left;">SE_ICACHE : 4</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Tamper Filter Filter Period : 0 Filter Treshold : 0 Reset Treshold : 0</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="text-indent: 0pt;text-align: left;">Tamper Flags</p><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Digital Glitch Detector Always On: Disabled DONE</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The <span class="s26">security genconfig </span><a href="#bookmark45" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">command generates a generic configuration file consisting of the properties listed in </a><a href="#bookmark45" class="a">Table 10.1 Configura- </a><span style=" color: #049;">tion File Description on page 23</span>. A text editor can be used to modify the default settings shown below to the desired configuration.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">{</p><p class="s26" style="padding-left: 36pt;text-indent: -19pt;line-height: 107%;text-align: left;">&quot;mcu_flags&quot;: { &quot;SECURE_BOOT_ENABLE&quot;: true,</p><p class="s26" style="padding-left: 36pt;text-indent: 0pt;line-height: 107%;text-align: left;">&quot;SECURE_BOOT_VERIFY_CERTIFICATE&quot;: false, &quot;SECURE_BOOT_ANTI_ROLLBACK&quot;: true, &quot;SECURE_BOOT_PAGE_LOCK_NARROW&quot;: false, &quot;SECURE_BOOT_PAGE_LOCK_FULL&quot;: true</p><p class="s26" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">},</p><p class="s26" style="padding-left: 41pt;text-indent: -24pt;line-height: 107%;text-align: left;">&quot;tamper_levels&quot;: { &quot;FILTER_COUNTER&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;WATCHDOG&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SE_RAM_CRC&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SE_HARDFAULT&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SOFTWARE_ASSERTION&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SE_CODE_AUTH&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;USER_CODE_AUTH&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;MAILBOX_AUTH&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;DCI_AUTH&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;OTP_READ&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;AUTO_CODE_AUTH&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SELF_TEST&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;TRNG_MONITOR&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS0&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS1&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS2&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS3&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS4&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS5&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS6&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;PRS7&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;DECOUPLE_BOD&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;TEMP_SENSOR&quot;: 1,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;VGLITCH_FALLING&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;VGLITCH_RISING&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SECURE_LOCK&quot;: 4,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SE_DEBUG&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;DGLITCH&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;SE_ICACHE&quot;: 4</p><p class="s26" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">},</p><p class="s26" style="padding-left: 41pt;text-indent: -24pt;line-height: 107%;text-align: left;">&quot;tamper_filter&quot; : { &quot;FILTER_PERIOD&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;FILTER_THRESHOLD&quot;: 0,</p><p class="s26" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">&quot;RESET_THRESHOLD&quot;: 0</p><p class="s26" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">},</p><p class="s26" style="padding-left: 41pt;text-indent: -24pt;line-height: 107%;text-align: left;">&quot;tamper_flags&quot;: { &quot;DGLITCH_ALWAYS_ON&quot;: false</p><p class="s26" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">}</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;text-indent: 0pt;text-align: center;"><a name="bookmark45">Table 10.1.  Configuration File Description</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Name</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Description</p></td></tr><tr style="height:19pt"><td style="width:540pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" colspan="2"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">For SE and VSE devices (mcu_flags):</p></td></tr><tr style="height:30pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SECURE_BOOT_ENABLE</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 19pt;text-indent: 0pt;text-align: left;">If set, verifies the image on the Cortex-M33 before releasing the Cortex-M33 from reset.</p></td></tr><tr style="height:19pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SECURE_BOOT_VERIFY_CERTIFICATE</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">If set, requires certificate-based signing of the host application.</p></td></tr><tr style="height:30pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SECURE_BOOT_ANTI_ROLLBACK</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 9pt;text-indent: 0pt;text-align: left;">If set, prevents secure upgrading to a host image with a lower ver- sion than the image that is currently stored in flash.</p></td></tr><tr style="height:81pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SECURE_BOOT_PAGE_LOCK_NARROW</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 15pt;text-indent: 0pt;text-align: left;">If set, locks flash pages that have been validated by the Secure Boot process to prevent re-flashing by other means than through the Secure Element.</p><p class="s6" style="padding-top: 8pt;padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Write/erase locks pages from 0 through the page where the Secure Boot signature of the application is located, <b>not including </b>the last page if the signature is not on a page boundary.</p></td></tr><tr style="height:81pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">SECURE_BOOT_PAGE_LOCK_FULL</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;padding-right: 15pt;text-indent: 0pt;text-align: left;">If set, locks flash pages that have been validated by the Secure Boot process to prevent re-flashing by other means than through the Secure Element.</p><p class="s6" style="padding-top: 8pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: justify;">Write/erase locks pages from 0 through the page where the Secure Boot signature of the application is located, <b>including </b>the last page if the signature is not on a page boundary.</p></td></tr><tr style="height:19pt"><td style="width:540pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" colspan="2"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">For SE with Secure Vault devices:</p></td></tr><tr style="height:19pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">tamper_levels</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">The tamper levels of different tamper sources.</p></td></tr><tr style="height:19pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">tamper_filter</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">The settings for tamper filters.</p></td></tr><tr style="height:19pt"><td style="width:263pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">tamper_flags</p></td><td style="width:277pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">The settings for tamper flags.</p></td></tr></table><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Enabling Secure Debug</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_068.png"/></span></p></li></ul></li><li><h3 style="padding-top: 7pt;padding-left: 45pt;text-indent: -21pt;text-align: left;"><a name="bookmark46">Enabling Secure Debug</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The Secure Debug feature is enabled through the <span class="s26">Secure Debug Unlock </span>command. After locking the device, the <span class="s26">Secure Debug Un- lock </span>command securely unlocks the device for debugging until the next device reset without erasing flash and RAM contents.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The following command enables the secure debug unlock.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security lockconfig </span><span class="s31" style=" background-color: #D8D8D8;">--secure-debug-unlock enable </span><span class="s27" style=" background-color: #D8D8D8;">--device EFR32MG22C224F512 --serialno 440068705      </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">Secure debug unlock was enabled DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">After enabling the Secure Debug feature, you can lock the device by using the following command.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security lock --device EFR32MG22C224F512 --serialno 440068705                                         </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Device is now locked.</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">After locking the device, you can disable the device erase by using the following command.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security disabledeviceerase --device EFR32MG22C224F512 --serialno 440068705                           </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">THIS IS A ONE-TIME command which Permanently disables device erase.</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">If secure debug lock has not been set, there is no way to regain debug access to this device. Type &#39;continue&#39; and hit enter to proceed or Ctrl-C to abort:</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">================================================================================</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">continue</p><p class="s28" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Disabled device erase successfully</p><p class="s26" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">DONE</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Note: <span class="p">This is an </span>IRREVERSIBLE <span class="p">action and should be the last step in production.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">To check the debug lock status of the device, run the <span class="s26">security status </span>command</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="728" height="111" alt="image" src="an1222-efr32xg2x-production-programming/Image_069.png"/></span></p><p class="s28" style="text-indent: 0pt;text-align: left;">Secure debug unlock : Enabled</p><p class="s26" style="text-indent: 0pt;text-align: left;">Secure boot : Disabled</p><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Boot status     : 0x20 - OK DONE</p><p style="text-indent: 0pt;text-align: left;"/><p class="s26" style="text-indent: 0pt;text-align: left;">: 000000000000000014b457fffed50d1e</p><p class="s28" style="text-indent: 0pt;text-align: left;">: Enabled</p><p class="s28" style="text-indent: 0pt;text-align: left;">: Disabled</p><p style="text-indent: 0pt;text-align: left;"/><p class="s26" style="text-indent: 0pt;line-height: 107%;text-align: left;">Serial number <b>Debug lock Device erase</b></p><p style="text-indent: 0pt;text-align: left;"/><p class="s26" style="text-indent: 0pt;text-align: left;">SE Firmware version : 1.2.1</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: left;"><span class="s27" style=" background-color: #D8D8D8;"> commander security status --device EFR32MG22C224F512 --serialno 440068705                                       </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Related Documents</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_070.png"/></span></p></li><li><h3 style="padding-top: 7pt;padding-left: 45pt;text-indent: -21pt;text-align: left;"><a name="bookmark47">Related Documents</a><a name="bookmark48">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l25"><li><p style="padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/AN136-production-programming-options.pdf" class="a" target="_blank">AN136: Silicon Labs Production Programming </a><a href="https://www.silabs.com/documents/public/application-notes/AN136-production-programming-options.pdf" target="_blank">Options</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an958-mcu-stk-wstk-guide.pdf" class="a" target="_blank">AN958: Debugging and Programming Interfaces for Custom </a><a href="https://www.silabs.com/documents/public/application-notes/an958-mcu-stk-wstk-guide.pdf" target="_blank">Designs</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/user-guides/ug162-simplicity-commander-reference-guide.pdf" class="a" target="_blank">UG162: Simplicity Commander Reference </a><a href="https://www.silabs.com/documents/public/user-guides/ug162-simplicity-commander-reference-guide.pdf" target="_blank">Guide</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/user-guides/ug266-gecko-bootloader-user-guide.pdf" class="a" target="_blank">UG266: Silicon Labs Gecko Bootloader User&#39;s </a><a href="https://www.silabs.com/documents/public/user-guides/ug266-gecko-bootloader-user-guide.pdf" target="_blank">Guide</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1190-efr32-secure-debug.pdf" class="a" target="_blank">AN1190: Series 2 Secure </a><a href="https://www.silabs.com/documents/public/application-notes/an1190-efr32-secure-debug.pdf" target="_blank">Debug</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" class="a" target="_blank">AN1218: Series 2 Secure Boot with </a><a href="https://www.silabs.com/documents/public/application-notes/an1218-secure-boot-with-rtsl.pdf" target="_blank">RTSL</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1247-efr32-secure-vault-tamper.pdf" class="a" target="_blank">AN1247: Anti-Tamper Protection Configuration and </a><a href="https://www.silabs.com/documents/public/application-notes/an1247-efr32-secure-vault-tamper.pdf" target="_blank">Use</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/public/application-notes/an1271-efr32-secure-key-storage.pdf">AN1271: Secure Key Storage</a></p><p class="s8" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Revision History</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1222-efr32xg2x-production-programming/Image_071.png"/></span></p></li></ul></li><li><h3 style="padding-top: 7pt;padding-left: 45pt;text-indent: -21pt;text-align: left;"><a name="bookmark49">Revision History</a></h3></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Revision 0.4</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">October 2020</p><ul id="l26"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark3" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Removed a duplicate paragraph from </a><a href="#bookmark3" class="a">1.1 User </a><a href="#bookmark3">Assistance</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Revision 0.3</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">September 2020</p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark5" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Added EFR32BG21B and EFR32MG21B to </a><a href="#bookmark5" class="a">2. Device </a>Compatibility<span style=" color: #000;">.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark9" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Added Secure Element conventions to </a>3. Overview<span style=" color: #000;">, updated the figures and content.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark15" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Updated Simplicity Commander version to 1.9.2 in </a><a href="#bookmark15" class="a">4. Using Simplicity </a>Commander<span style=" color: #000;">.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark28" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Added EFRxG21B to </a><a href="#bookmark28" class="a">5.2 How to Check the Secure Element Firmware Version on a </a>Device<span style=" color: #000;">.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark30" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Updated the figures in </a>5.2.1 Check the Secure Element Firmware Version Using Simplicity Studio 5 <span style=" color: #000;">to Simplicity Studio v5.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark32" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Renamed Field Upgrade to </a><a href="#bookmark32" class="a">6. Field Upgrade the Secure Element Firmware on a Secure Boot-Enabled </a>Device<span style=" color: #000;">, updated the content and moved up two levels.</span></p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Removed Over-The-Air (OTA) section.</p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark34" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Added </a><a href="#bookmark34" class="a">7. Bootloader Firmware </a>Programming<span style=" color: #000;">.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark36" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Updated </a><a href="#bookmark36" class="a">8. Application Firmware </a>Programming<span style=" color: #000;">.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark44" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Updated </a>10. Enabling Secure Boot <span style=" color: #000;">for SE with Secure Vault devices.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark42" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Added </a><a href="#bookmark42" class="a">9.2 Provisioning the GBL Decryption Key in Simplicity </a>Commander<span style=" color: #000;">.</span></p></li><li><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="#bookmark48" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Added AN1247 and AN1271 to </a><a href="#bookmark48" class="a">12. Related </a>Documents<span style=" color: #000;">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 0.2</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">March 2020</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Added EFR32xG22 devices to Device Compatibility section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Added Simplicity Commander section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Updated figures in Check Secure Element Firmware Version Using Simplicity Studio</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Modified Check Secure Element Firmware Version Using Simplicity Studio section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Added Note to Check Version section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Added Field Upgrade to Serial Wire Debug (SWD) section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Added disable device erase procedure to Secure Debug Enabling section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Added UG162 to Related Documents section.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Changed all Simplicity Commander outputs to text, easy to update in the future.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 0.1</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">December 2019</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Initial Revision.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 17pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">Simplicity Studio</h2><p class="s32" style="padding-top: 16pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">One-click access to MCU and wireless tools, documentation, software, source code libraries &amp; more. Available for Windows, Mac and Linux!</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="768" height="433" alt="image" src="an1222-efr32xg2x-production-programming/Image_072.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="80" alt="image" src="an1222-efr32xg2x-production-programming/Image_073.png"/></span></p><p class="s33" style="padding-top: 6pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">IoT Portfolio</p><p style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/IoT" class="s34">www.silabs.com/IoT</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="80" alt="image" src="an1222-efr32xg2x-production-programming/Image_074.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-top: 11pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">SW/HW</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 43pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/simplicity" class="s34">www.silabs.com/simplicity</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="80" alt="image" src="an1222-efr32xg2x-production-programming/Image_075.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-top: 11pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Quality</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 39pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/quality" class="s34">www.silabs.com/quality</a></p><p class="s33" style="padding-top: 6pt;padding-left: 202pt;text-indent: 0pt;text-align: center;">Support &amp; Community</p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="80" alt="image" src="an1222-efr32xg2x-production-programming/Image_076.png"/></span></p><p style="padding-top: 1pt;padding-left: 202pt;text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/community" class="s34">www.silabs.com/community</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s35" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s36" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 122%;text-align: left;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each specific device, and “Typical” parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes without further notice to the product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included information. Without prior notification, Silicon Labs may update product firmware during the manufacturing process for security or reliability reasons.  Such changes will not alter the specifications or the performance of the product.  Silicon Labs shall have no liability for the consequences of use of the information supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required, or Life Support Systems without the specific written consent of Silicon Labs. A “Life Support System” is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s35" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Trademark Information</p><p class="s36" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 122%;text-align: left;">Silicon Laboratories Inc.®, Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, ClockBuilder®, CMEMS®, DSPLL®, EFM®, EFM32®, EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, “the world’s most energy friendly microcontrollers”, Ember®, EZLink®, EZRadio®, EZRadioPRO®, Gecko®, Gecko OS, Gecko OS Studio, ISOmodem®, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress®, Zentri, the Zentri logo and Zentri DMS, Z-Wave®, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="134" height="66" alt="image" src="an1222-efr32xg2x-production-programming/Image_077.png"/></span></p><p class="s37" style="padding-top: 7pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s37" style="padding-left: 134pt;text-indent: 0pt;line-height: 9pt;text-align: left;">USA</p><p style="padding-top: 4pt;padding-left: 134pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/" class="s38">http://www.silabs.com</a></p></body></html>
