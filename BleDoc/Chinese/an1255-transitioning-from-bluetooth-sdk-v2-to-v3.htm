<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AN1255: Transitioning from the v2.x to the v3.x Bluetooth® SDK</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .a { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s5 { color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s6 { color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 9pt; }
 .s8 { color: #7E0054; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s9 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s10 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s11 { color: #3E7E5F; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s12 { color: #005031; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s15 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s16 { color: #7E0054; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s17 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s18 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s19 { color: #006FC0; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s20 { color: #005031; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s21 { color: #3E7E5F; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s23 { color: #2A00FF; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s25 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s26 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s27 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s28 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s29 { color: #76923B; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s30 { color: #006FC0; font-family:"Courier New", monospace; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s32 { color: #BEBEBE; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s33 { color: #3E7E5F; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 9pt; }
 .s34 { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 h2 { color: #FFF; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 20pt; }
 .s35 { color: #FFF; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 h4 { color: #D91E2A; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s36 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s37 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s38 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s39 { color: #4D4D4F; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s40 { color: #D91E2A; font-family:Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt; }
 #l3> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l4 {padding-left: 0pt;counter-reset: f1 1; }
 #l4> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 #l5 {padding-left: 0pt;counter-reset: g1 1; }
 #l5> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l6 {padding-left: 0pt;counter-reset: h1 1; }
 #l6> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 #l7 {padding-left: 0pt;counter-reset: d2 1; }
 #l7> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l7> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l8 {padding-left: 0pt; }
 #l8> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l9 {padding-left: 0pt;counter-reset: d2 1; }
 #l9> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l9> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l10 {padding-left: 0pt;counter-reset: i1 1; }
 #l10> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)") "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l10> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l11 {padding-left: 0pt;counter-reset: d2 1; }
 #l11> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-style: normal; font-weight: bold; text-decoration: none; }
 #l11> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: "* "; color: #3E7E5F; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l13 {padding-left: 0pt;counter-reset: k1 1; }
 #l13> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l13> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 #l14 {padding-left: 0pt; }
 #l14> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 li {display: block; }
 #l15 {padding-left: 0pt;counter-reset: l1 1; }
 #l15> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l15> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 #l16 {padding-left: 0pt;counter-reset: l2 1; }
 #l16> li>*:first-child:before {counter-increment: l2; content: counter(l2, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l16> li:first-child>*:first-child:before {counter-increment: l2 0;  }
 li {display: block; }
 #l17 {padding-left: 0pt;counter-reset: m1 1; }
 #l17> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l17> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="127" height="62" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-top: 11pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">AN1255: Transitioning from the v2.x to the v3.x <i>Bluetooth® </i>SDK</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="728" height="1" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="208" height="1" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-top: 4pt;padding-bottom: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 10pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="210" height="1" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-left: 13pt;text-indent: 0pt;text-align: left;">Reviews differences in:</p><ul id="l1"><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Software architecture</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">The API</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">GATT configurator</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Stack configuration</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Adding platform components</p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 17pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Bluetooth Software Development Kit (SDK) v3.0 contains a number of changes com- pared to Bluetooth SDK v2.x. Many of these changes are due to an underlying framework redesign that results in an improved developer experience within the new Simplicity Stu- dio 5. Projects are now built on a component architecture. Simplicity Studio 5 includes project configuration tools that provide an enhanced level of software component discov- erability, configurability, and dependency management. These include a Component Ed- itor, and a redesigned GATT configurator.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">In Bluetooth SDK v3.0, sample applications have a new software architecture, the Blue- tooth API is updated, and the GATT configurator is completely redesigned. Additionally the stack can now be configured in separate header files, and platform components can be added to the project with the Component Editor instead of copying and including files manually. While these changes are a result of overall improvements in the SDK and in Simplicity Studio 5 it also means that migrating projects from Bluetooth SDK v2.x to v3.0 is not trivial. This document explains the steps needed to move your Bluetooth v2.x project into the v3.0 environment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span><img width="539" height="368" alt="Simplicity Studio start " title="Simplicity Studio start " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_005.jpg"/></span></p><ol id="l2"><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark0">Introduction</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">Silicon Labs has introduced both a complete update to its Simplicity Studio tool suite, as well as a new, component-based Gecko Platform architecture.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Version 5 of the Simplicity Studio tool suite represents a ground-up redesign of the underlying architecture. The Simplicity Studio 5 (SSv5) framework includes a new user interface engine that enables attractive and responsive web-like user interfaces. The integrated develop- ment environment (IDE) was also upgraded with the latest versions of Eclipse and the C/C++ Development Tooling (CDT). This added robustness, performance improvements, and enables developers to customize their experience using the latest plug-ins from the Eclipse Marketplace.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Gecko Software Development Kit suite version 3.0.0.0 (GSDK v3.0) is released with SSv5. It introduces a new underlying Gecko Platform architecture based on components. Both the Bluetooth and the Flex v3.x SDKs are based on this new component-based architecture. With SSv5 and GSDK v3.0, Bluetooth developers will benefit from the following component-based project configuration features:</p><ul id="l3"><li><p style="padding-top: 2pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Search and filter to find and discover software components that work with the target device</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Automatically pull in all component dependencies and initialization code</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Configurable software components including peripheral inits, drivers, middleware, and stacks</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">All configuration settings in C header files for usage outside of Simplicity Studio</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Configuration validation to alert developers to errors or issues</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Easily manage all project source via git or other SCM tools</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Managed migration to future component and SDK versions</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Simplified transitions from Silicon Labs development kits to custom hardware</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Other features of the SSv5/GSDK v3.0 development environment include:</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Project source management options (link to SDK sources or copy all contents to user folder)</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Graphical pin configuration</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Redesigned Bluetooth Configurator with a fresh UI that’s more intuitive for Bluetooth and GATT customization</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Redesigned Radio Configurator with a fresh UI that’s more intuitive for single- and multi-PHY customization</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Iterative development (configure components, edit sources, compile, debug) using SSv5 configuration tools and third-party IDEs</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">GNU makefiles as a build option</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Other changes are specific to the SDK. Bluetooth SDK v3.0 contains a number of changes compared to Bluetooth SDK v2.x. The main changes are as follows:</p><ol id="l4"><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The project structure of the sample applications has changed. Many autogenerated files and unified configuration files help adding and configuring software components.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The entire project generation is now based on software components. This makes it possible to add functionality to the project with only a click, instead of copying files manually and looking for dependencies.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The sample applications have a completely new software architecture to align with the concept of software components. Adding RTOS to your project is also simplified.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The Bluetooth API has changed. The API commands and events use a new nomenclature to comply with Silicon Labs standards. Additionally, some new classes and commands are introduced and some of them are removed to make the API more transparent and consistent.</p></li><li><p style="padding-top: 2pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The GATT configurator is completely redesigned. The new user interface is more modern, while the generator tool makes it possible to add partial extensions to the GATT database. This means that the GATT database can be easily extended programmatically.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The stack can now be configured in a separate header file (instead of main.c). A Component Configurator tool in SSv5 is available to configure all the parameters, which makes it easy to use predefined values, and to validate custom values.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The AppLoader application has new features which requires the update of the bootloader.</p></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This document guides you through these changes, and describes the migration steps necessary to move a project from Bluetooth SDK v2.x to v3.0.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">For details about the release, see the release notes provided with the SDK.</p></li></ul></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark1">Project Structure</a><a name="bookmark2">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="735" height="76" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_006.png"/></span></p><p style="text-indent: 0pt;line-height: 10pt;text-align: left;">Application specific files</p><p style="text-indent: 0pt;text-align: left;">Development board configuration files and drivers for external peripherals Device configuration files and drivers for the MCU peripherals</p><p style="text-indent: 0pt;text-align: left;">Bluetooth stack files Utilities</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="text-indent: 0pt;line-height: 10pt;text-align: left;">/app</p><p class="s4" style="text-indent: 0pt;text-align: left;">/hardware</p><p class="s4" style="text-indent: 0pt;text-align: left;">/platform</p><p class="s4" style="text-indent: 0pt;text-align: left;">/protocol</p><p class="s4" style="text-indent: 0pt;text-align: left;">/util</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">In Bluetooth SDK v2.x a Bluetooth project contains the following folders:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">When a new project is generated, a subset of the SDK files (source files, headers, configuration headers) is copied from the SDK folder into the project folders based on hardware type and on the needs of the sample application. Additionally, some files (for example init_mcu.c, hal-config.h, and so on) are generated from templates into the root folder of the project. Again, the output is based on the hardware type and on the needs of the sample application.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="735" height="119" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_007.png"/></span></p><p style="text-indent: 0pt;line-height: 10pt;text-align: left;">Application specific files</p><p style="text-indent: 0pt;text-align: left;">Development board configuration files and drivers for external peripherals Device configuration files and drivers for the MCU peripherals</p><p style="text-indent: 0pt;text-align: left;">Bluetooth stack files Utilities</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;">Automatically generated files based on the installed software components Editable configuration files for the software components</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="text-indent: 0pt;line-height: 10pt;text-align: left;">/autogen</p><p class="s4" style="text-indent: 0pt;text-align: left;">/config</p><p class="s4" style="text-indent: 0pt;text-align: left;">/gecko_sdk_3.0.0</p><p class="s4" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">/app</p><p class="s4" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">/hardware</p><p class="s4" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">/platform</p><p class="s4" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">/protocol</p><p class="s4" style="padding-left: 10pt;text-indent: 0pt;text-align: left;">/util</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In Bluetooth SDK v3.0 auto-generated files and configurations headers are clearly separated from the static SDK files and gathered into separate folders:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s34" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;line-height: 106%;text-align: left;"><a href="#bookmark4" class="s25">Developers can now easily see which files can be modified by the generator script and it is easy to access all configuration files. This is especially important, because in Bluetooth SDK v3.0 many more files are generated by the addition of software components (see Sec- tion </a><a href="#bookmark4" class="a">3 </a>Software Components<span style=" color: #000;">).</span></p><p class="s4" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Due to the new project structure – and due to the new auto-generated files required by the Bluetooth stack – migrating a v2.x project into Bluetooth SDK v3.0 must begin by creating a new SoC-Empty project in the new SDK. Application logic should be pulled into this new project. After you select a compatible part on SSv5’s Welcome page, an SoC-Empty project can be created from the Part-specific Launcher perspective. The Technology filter makes it easy to find applicable projects.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="717" height="437" alt="Launcher Example Projects and Demos tab with filters applied. " title="Launcher Example Projects and Demos tab with filters applied. " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_008.jpg"/></span></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In the project configuration dialog you can rename the project, change the project location, and define how to handle project files.</p><p class="s4" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Note<span class="p">: In Bluetooth SDK v2.x all SDK files are copied into the project by default. In Bluetooth SDK v3.0 SDK files, considered to be static, are linked by default. If you want to version-control your full project, it is recommended to change this setting to “Copy contents” in the Project Configuration wizard, when you create the new project to have all content needed by the project in one folder.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 109pt;text-indent: 0pt;text-align: left;"><span><img width="486" height="310" alt="Project Configuration Copy Contents dialog " title="Project Configuration Copy Contents dialog " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_009.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s34" style="padding-left: 23pt;text-indent: 0pt;line-height: 107%;text-align: left;"><a href="#bookmark26" class="s25">Bluetooth Projects automatically open on a ‘readme’ tab that describes the example. Other tabs are the Project Configurator (&lt;project name&gt;.slcp and the GATT configurator (gatt_configuration.btconf) (see section </a><a href="#bookmark26" class="a">6 </a>GATT Configurator <span style=" color: #000;">for more information).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="711" height="433" alt="Starting an SOD Empty project " title="Starting an SOD Empty project " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_010.jpg"/></span></p></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark3">Software Components</a><a name="bookmark4">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">To add a new software component, for example a UART driver, in Bluetooth SDK v2.x the user must:</p><ol id="l5"><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;">Copy the corresponding SDK files from the SDK folder into the project folder.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Copy all the dependencies of the given component into the project folder.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Add new include directories to the project settings.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">And additionally:</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Write the initialization code manually in the application.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Configure the component manually in the config files.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Use the API of the component in the application.</p></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">This is quite a cumbersome process, especially when figuring out the dependencies between components.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In Bluetooth SDK v3.0 software components can be added easily by installing them from the Component Library. The installation pro- cess will automatically execute the first three steps listed above, and it also modifies the corresponding auto-generated files to integrate the component into the application (<i>“glue logic”</i>).</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Additionally the Component Configurator provides the possibility of:</p><ol id="l6"><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -13pt;text-align: left;">Adding an “<i>init” </i>type component that initializes the software component</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -13pt;text-align: left;">Configuring the component with a GUI</p></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Some software components (like OTA DFU) will fully integrate into the application to perform a specific task without the need of any additional code, while other components provide an API to be used in the application. The only task left for the developer is to use the API of those component in the application.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">It is important to note that in Bluetooth SDK v3.0 the Bluetooth stack itself is also just a collection of software components that can be added to and removed from the project.</p><p class="s4" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">When migrating a project into Bluetooth SDK v3.0, start by finding out which functionality can be provided by installing a software component from the Component Library. Although this means you must become familiar with the software compo- nents first, it will save time later. Generally speaking, if you would have copied an additional SDK file into your project, you will probably find a software component that solves the integration of that file.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">To see the component library, click the &lt;project-name&gt;.slcp tab of your project, and click <b>Software Components</b>. A number of filters as well as a keyword search are available to help you explore the various component categories. Note that components for all installed SDKs are presented.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="711" height="392" alt="The Project Configurator Software Components tab " title="The Project Configurator Software Components tab " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_011.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="715" height="395" alt="Software components tab with installed and configurable components flagged. " title="Software components tab with installed and configurable components flagged. " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_012.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Components installed in the project are checked (1), and can be uninstalled. Configurable components are indicated by a gear symbol (2). To display only installed components or only configurable components, use the checkboxes at the top of the editor.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Click <b>Configure </b>to see a configurable component’s parameters in the Component Configurator.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 35pt;text-indent: 0pt;text-align: left;"><span><img width="696" height="380" alt="Bluetooth Core Component in the Component Configurator.  " title="Bluetooth Core Component in the Component Configurator.  " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_013.jpg"/></span></p><p style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a href="https://www.silabs.com/documents/public/quick-start-guides/qsg169-bluetooth-sdk-v3x-quick-start-guide.pdf" class="s25" target="_blank">See </a><a href="https://www.silabs.com/documents/public/quick-start-guides/qsg169-bluetooth-sdk-v3x-quick-start-guide.pdf" class="s6" target="_blank">QSG169: Bluetooth® SDK v3.x Quick Start Guide</a><span style=" color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span><a href="https://docs.silabs.com/simplicity-studio-5-users-guide/latest/" class="s25" target="_blank">and the online </a><a href="https://docs.silabs.com/simplicity-studio-5-users-guide/latest/" class="s6" target="_blank">Simplicity Studio 5 User’s Guide</a><span style=" color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span>for more information about the SSv5 project interface and the Bluetooth SDK.</p></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: justify;"><a name="bookmark5">Software Architecture</a><a name="bookmark8">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l7"><li><p class="s4" style="padding-top: 10pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark6">Bluetooth Event Handling</a><a name="bookmark9">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In Bluetooth SDK v2.x the sample applications were written with simplicity in mind. Although many platform files are included in the project</p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">– to make the features provided by the hardware available for the application – the application itself has a simple and transparent archi- tecture. Taking the SoC-Empty project as an example:</p><ul id="l8"><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">The stack configuration is defined in main.c</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">MCU, board and app are initialized in main.c</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Stack is initialized in app.c</p><p style="text-indent: 0pt;text-align: left;"><span><img width="195" height="144" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_014.png"/></span></p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">There is a simple loop in app.c to fetch and handle Bluetooth events</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:11pt"><td style="width:268pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s8" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">main.c</p></td><td style="width:272pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s8" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">app.c</p></td></tr><tr style="height:294pt"><td style="width:268pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s8" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">int <span style=" color: #000;">main</span><span class="s10">(</span>void<span class="s10">)</span></p><p class="s10" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s11" style="padding-left: 16pt;padding-right: 126pt;text-indent: 0pt;text-align: left;">/* Initialize device */ <span style=" color: #000;">initMcu();</span></p><p class="s11" style="padding-left: 16pt;padding-right: 126pt;text-indent: 0pt;text-align: left;">/* Initialize board */ <span style=" color: #000;">initBoard();</span></p><p class="s11" style="padding-left: 16pt;padding-right: 47pt;text-indent: 0pt;text-align: left;">/* Initialize application */ <span style=" color: #000;">initApp();</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 16pt;padding-right: 126pt;text-indent: 0pt;text-align: left;">/* Start application */ <span style=" color: #000;">appMain(&amp;config);</span></p><p class="s10" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p></td><td style="width:272pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span class="s8">void </span><b>appMain</b>(<span style=" color: #005031;">gecko_configuration_t </span>*pconfig)</p><p class="s10" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s11" style="padding-left: 16pt;padding-right: 76pt;text-indent: 0pt;text-align: left;">/* Initialize stack */ <span style=" color: #000;">gecko_init(pconfig);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;">while <span class="s10">(1) {</span></p><p class="s11" style="padding-left: 27pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/* Event pointer for handling events */</p><p class="s8" style="padding-left: 27pt;text-indent: 0pt;text-align: left;">struct <span class="s12">gecko_cmd_packet</span><span class="s10">* evt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 27pt;padding-right: 76pt;text-indent: 0pt;text-align: left;">/* Check for stack event. */ <span style=" color: #000;">evt = gecko_wait_event();</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="padding-left: 27pt;text-indent: 0pt;text-align: left;">/* Handle events */</p><p class="s10" style="padding-left: 27pt;text-indent: 0pt;text-align: left;"><span class="s8">switch </span>(BGLIB_MSG_ID(evt-&gt;<span style=" color: #0000C0;">header</span>)) {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 48pt;padding-right: 30pt;text-indent: -10pt;text-align: left;"><span class="s8">case </span>gecko_evt_system_boot_id: printLog(<span style=" color: #2A00FF;">&quot;system booted\r\n&quot;</span>); <span class="s8">break</span>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 48pt;padding-right: 20pt;text-indent: -10pt;text-align: left;"><span class="s8">case </span>gecko_evt_le_connection_opened_id: printLog(<span style=" color: #2A00FF;">&quot;connection opened\r\n&quot;</span>); <span class="s8">break</span>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 48pt;padding-right: 188pt;text-indent: -10pt;text-align: left;">default<span class="s10">: </span>break<span class="s10">;</span></p><p class="s10" style="padding-left: 27pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s10" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">}</p><p class="s10" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p></td></tr></table><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">This software architecture is very easy to understand. However, it has drawbacks:</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Sleep is managed by the Bluetooth stack. <span class="s15">gecko_wait_event() </span>puts the device into sleep mode, and processing continues only when a Bluetooth event is triggered. If your application implements processes that should run regularly you must rely on the Bluetooth stack software timers.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">The application is totally Bluetooth-event-driven. If your application needs custom events, you have to use the external signals of the Bluetooth stack to extend the Bluetooth events with custom events.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">If your application needs a state machine, it may be challenging to merge the states of the state machine with the Bluetooth event handlers / connection states.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Since different software components (for example one that is reading your sensors, one that blinks the LEDs, and so on) may have different needs, you always have to adjust your software architecture to these needs.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">While all of these problems can be addressed by using RTOS, RTOS may consume too many resources for your application.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">In contrast to this, the sample applications of Bluetooth SDK v3.0 were written with flexibility in mind. Although this makes the code a bit less transparent, at the same time it makes it easy to extend the software with a new software component.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Each software component has an <span class="s15">init </span>and a <span class="s15">process </span>function. The process functions are run in an infinite loop, and the device is sent into sleep mode when neither of them needs the CPU. Sleep is automatically handled by the power manager. Here, the Bluetooth stack is just one of the software components, it does not have a distinguished role.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">To regularly run a process the common sleeptimer can be used instead of the soft timers of the Bluetooth stack.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">When an interrupt wakes up the device, you do not need to trigger an external signal to get out of the <span class="s15">wait_event </span>phase. All the process functions will be called and can catch their respective events triggered by interrupts.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Furthermore:</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Due to the unified software architecture software components can easily be integrated into the code by adding the proper function calls to predefined places in the code. This process is automatically handled by the Component Editor, which makes the addition of a software component as easy as ticking a checkbox.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Software components define their dependencies, therefore whenever a new component is added, all of its dependencies are also automatically added to your project.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">In the new software architecture all configuration is put into header files. On one hand this separates functionality from config, and on the other hand it makes it possible to provide a Component Editor for all configurations. Software components, including the Bluetooth stack, can be easily configured within SSv5.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="500" height="535" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_015.png"/></span></p><p class="s16" style="text-indent: 0pt;text-align: left;">void <span style=" color: #000;">sl_system_process_action</span><span class="s18">(</span>void<span class="s18">)</span></p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s18" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">sl_platform_process_action(); sl_service_process_action(); <span class="s19">sl_stack_process_action();</span></p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">sl_internal_app_process_action();</p><p class="s18" style="text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">void <span style=" color: #000;">sl_stack_process_action</span><span class="s18">(</span>void<span class="s18">)</span></p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s19" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_bt_step();</p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;text-align: left;">void <span style=" color: #000;">sl_bt_step</span><span class="s18">()</span></p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s20" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_bt_msg_t <span style=" color: #000;">evt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-left: 37pt;text-indent: -26pt;text-align: left;">sl_status_t <span style=" color: #000;">status = sl_bt_pop_event(&amp;evt);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">if<span class="s18">(status != SL_STATUS_OK){</span></p><p class="s16" style="padding-left: 21pt;text-indent: 0pt;line-height: 10pt;text-align: left;">return<span class="s18">;</span></p><p class="s18" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s19" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_bt_process_event(&amp;evt);</p><p class="s18" style="text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="text-indent: 0pt;text-align: left;">void <span style=" color: #000;">sl_bt_process_event</span><span class="s18">(</span><span class="s20">sl_bt_msg_t</span></p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">*evt)</p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s18" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_bt_ota_dfu_on_event(evt);</p><p class="s19" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_bt_on_event(evt);</p><p class="s18" style="text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;line-height: 10pt;text-align: left;">h.c</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_bluetoot</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="text-indent: 0pt;line-height: 10pt;text-align: left;">ndler.c</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_event_ha</p><p style="text-indent: 0pt;text-align: left;"/><p class="s18" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span class="s16">void </span><b>sl_bt_on_event</b>(<span style=" color: #005031;">sl_bt_msg_t</span>* evt)</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s21" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Handle stack events</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">int <span style=" color: #000;">main</span><span class="s18">(</span>void<span class="s18">)</span></p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">sl_system_init(); app_init();</p><p class="s18" style="padding-top: 8pt;padding-left: 27pt;text-indent: -10pt;text-align: left;"><span class="s16">while </span>(1) { <span class="s19">sl_system_process_action(); </span>app_process_action(); sl_power_manager_sleep();</p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">app.c</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">sl_system_process_action.c</p><p style="text-indent: 0pt;text-align: left;"/><p class="s16" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">main.c</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="1" height="524" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_016.png"/></span></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">For these reasons, the new SoC-Empty example project is a bit more complicated. Main.c calls a generic <span class="s15">init </span>and <span class="s15">process </span>function, which then calls the <span class="s15">init </span>and <span class="s15">process </span>functions of each installed component. The Bluetooth component implements the Bluetooth event fetching in its own <span class="s15">process </span>function and ultimately calls the event handler function (<span class="s15">sl_bt_on_event</span>), which is to be imple- mented in the application (app.c). Note: some components (like OTA DFU) may also handle some Bluetooth events before the application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">However, in the end implementing Bluetooth handlers is the same as in Bluetooth SDK v2.x. You can add all your event handlers in a switch-case statement of <span class="s15">sl_bt_on_event() </span>defined in app.c:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span class="s16">void </span><b>sl_bt_on_event</b>(<span style=" color: #005031;">sl_bt_msg_t</span>* evt)</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s21" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// Handle stack events</p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span class="s16">switch </span>(SL_BT_MSG_ID(evt-&gt;<span style=" color: #0000C0;">header</span>)) {</p><p class="s18" style="padding-top: 8pt;padding-left: 37pt;text-indent: -10pt;text-align: left;"><span class="s16">case </span>sl_bt_evt_system_boot_id: app_log(<span style=" color: #2A00FF;">&quot;System booted\r\n&quot;</span>);</p><p class="s16" style="padding-top: 8pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">break<span class="s18">;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 7pt;padding-left: 37pt;text-indent: -10pt;text-align: left;"><span class="s16">case </span>sl_bt_evt_connection_opened_id: app_log(<span style=" color: #2A00FF;">&quot;Connection opened\r\n&quot;</span>);</p><p class="s16" style="padding-top: 8pt;padding-left: 27pt;text-indent: 10pt;text-align: right;">break<span class="s18">; </span>default<span class="s18">: </span>break<span class="s18">;</span></p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">When migrating a Bluetooth application from v2.x to v3.0, copy the Bluetooth event handlers from appMain() into sl_bt_on_event().</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s4" style="padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark7">RTOS</a><a name="bookmark10">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The new unified software architecture is written so that adding RTOS to your application is as simple as possible. For example, the Micrium OS Kernel can be added to your project with a click:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="713" height="390" alt="Software Components Tab with the Micrium OS Kernel component.  " title="Software Components Tab with the Micrium OS Kernel component.  " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_017.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Bluetooth event handler function looks the same as in the RTOS-less version, therefore migrating your RTOS-based application is as easy as migrating your RTOS-less application. Move the Bluetooth event handlers into <span class="s15">sl_bt_on_event() </span>defined in app.c. The application task, which runs parallel to the Bluetooth event handler task, must be started in <span class="s15">app_init()</span>, which is also defined in app.c:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">SL_WEAK <span class="s16">void </span><b>app_init</b>(<span class="s16">void</span>)</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;line-height: 10pt;text-align: left;">RTOS_ERR err;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">OSTaskCreate(&amp;myAppTaskTCB,</p><p class="s23" style="padding-left: 86pt;text-indent: 0pt;text-align: left;">&quot;MY <u>App</u> Task&quot;<span style=" color: #000;">, myAppTask,</span></p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;text-align: left;">0u, MY_APP_TASK_PRIO,</p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;text-align: left;">&amp;myAppTaskStk[0u], (MY_APP_TASK_STACK_SIZE / 10u), MY_APP_TASK_STACK_SIZE,</p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0u,</p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0u,</p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0u,</p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(OS_OPT_TASK_STK_CHK | OS_OPT_TASK_STK_CLR),</p><p class="s18" style="padding-left: 86pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&amp;err);</p><p class="s18" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"/></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: justify;"><a name="bookmark11">Bluetooth API</a><a name="bookmark20">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Bluetooth API changes in Bluetooth SDK v3.0. The most apparent change is the renaming of all the BGAPI commands and events to align with the unified Silicon Labs coding standard. However, there are also new and removed commands and also new BGAPI classes to make the API more logical and transparent. This section describes all the changes related to the API.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l9"><li><p class="s4" style="padding-left: 23pt;text-indent: 0pt;line-height: 179%;text-align: justify;"><a name="bookmark12">Functionality Breaks Advertising Set Management</a></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">While in Bluetooth SDK v2.x advertisement set handles were assigned by the developer arbitrarily, in Bluetooth SDK v3.0, advertising set allocation is managed by the stack. Before any advertising operations, use the API command <span class="s15">sl_bt_advertiser_cre- ate_set() </span>to create an advertising set. This command returns the handle of the created set. Thereafter, any advertiser commands (<span class="s15">sl_bt_advertiser_.  </span>) performing advertising operations can be called by passing the assigned advertising set handle. If a</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">command is called with a non-allocated handle, it will return an error. To free an advertising set, use command <span class="s15">sl_bt_adver- tiser_delete_set(handle)</span><i>.</i></p><p class="s4" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">OTA Configuration and OTA Advertising Data</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">OTA configuration (flags and OTA device name) is removed from Bluetooth configuration structure. To set OTA flags and the OTA device name, use <span class="s15">sl_bt_ota_set_configuration() </span>and <span class="s15">sl_bt_ota_set_device_name() </span>respectively. Use the new com- mand <span class="s15">sl_bt_ota_set_advertising_data() </span>to set OTA advertising data.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Some devices have multiple antenna ports. If you do not use the default port, the appropriate port should be set by</p><p class="s15" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">sl_bt_ota_set_rf_path() <span class="p">to ensure that the AppLoader uses the same port as the application.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 52pt;text-indent: -28pt;text-align: justify;"><a name="bookmark13">Error Code Changes</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v3.0 Bluetooth error codes (such as <span class="s15">bg_err_invalid_conn_handle</span>) become part of the unified SL_STATUS codes, which provide unique error codes for the whole software platform. This means that the values of the Bluetooth error codes change. New definitions (such as <span class="s15">SL_STATUS_INVALID_HANDLE</span>) are introduced to cover the new codes. You can, however, also use the old definitions in your code, as they are automatically mapped to the new values in the v3.0 SDK. In case your code contains hard-coded error codes, they must be changed. The Bluetooth error codes can now be found in sl_status.h.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark14">Changes in the BGAPI Classes</a></p><p class="s15" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><span class="p">The BGAPI classes are slightly restructured in Bluetooth SDK v3.0. Most importantly the </span>le_gap <span class="p">class, which accommodated many functions, is split into three new classes</span><span class="s5">: </span>gap<span class="s5">, </span>scanner <span class="p">and </span>advertiser<span class="p">. The legacy </span>hardware <span class="p">class, which accommodated only two functions, is removed. The soft timer functions are moved into the </span>system <span class="p">class. </span>le_gap<span class="s5">, </span>le_connection<span class="p">, and </span>flash <a href="#bookmark21" class="s25">classes are renamed as shown in </a><span class="p">Table 1. A new </span>ota <span class="p">class is created to accommodate functions configuring OTA upgrade (with Apploader), since OTA configuration is now removed from the Bluetooth configuration structure.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;"><a name="bookmark21">Table 5-1. Changes in the BGAPI Classes</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:32.65pt" cellspacing="0"><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 21pt;text-indent: 0pt;text-align: left;">API 2.x</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">API 3.0</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 170pt;padding-right: 169pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">le_gap</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gap</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Prefix &quot;le_&quot; is redundant as the stack supports LE only.</p></td></tr><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">scanner</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Split from le_gap. Provides API for scanning functions. Enables better size optimization.</p></td></tr><tr style="height:25pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">advertiser</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 52pt;text-indent: 0pt;text-align: left;">Split from le_gap. Provides APIs for advertising functions. Enables better size optimization.</p></td></tr><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">le_connection</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">connection</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Prefix &quot;le_&quot; is redundant.</p></td></tr><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">hardware</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Removed. Soft timer commands are moved to system class.</p></td></tr><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">flash</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">nvm</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Renamed for aligning with functionality it provides.</p></td></tr><tr style="height:15pt"><td style="width:73pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:82pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">ota</p></td><td style="width:368pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">New class for OTA configurations</p></td></tr></table></li><li><p class="s4" style="padding-top: 7pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark15">Changes in BGAPI Commands</a></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">BGAPI command functions change both their name, to align with Silicon Labs standards, and their structure, to make the error checking and the handling of return values simpler.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v3.0 BGAPI command function names start with <span class="s15">sl_bt</span><i>_ </i>instead of <span class="s15">gecko_cmd_ </span>used in Bluetooth SDK v2.x. This means that all function name should be changed according to this rule, when migrating a project from v2.x to v3.0.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">No compatibility layer is provided due to the additional changes listed below. However, a “Bluetooth API migration helper” component can be found in the Component Library. If this component is installed, a header file is added to the project that provides verbose compiler errors when an old API call is found in the code. A suggestion for the new API is also present in the error message.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v2.x command functions returned a complex structure, providing both error code and return values. In Bluetooth SDK v3.0 only a status code is returned, and the return values are passed back using pointer arguments. If the output of a command contains variable size data, the application needs to give the destination for the data as well as the maximum size of the destination. See an example below.</p><p class="s4" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Command functions in v2.x</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/* Function */</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">struct gecko_msg_gatt_server_read_attribute_value_rsp_t*</p><p class="s17" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_gatt_server_read_attribute_value<span class="s18">(uint16 </span>attribute<span class="s18">, uint16 </span>offset<span class="s18">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/* Response structure */</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">struct gecko_msg_gatt_server_read_attribute_value_rsp_t</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">uint16 <b>result</b>, uint8array <b>value</b></p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Command functions in v3.0</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_status <b>sl_bt_gatt_server_read_attribute_value</b>(uint16 <b>attribute</b>, uint16 <b>offset</b>, size_t</p><p class="s17" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">max_value_size<span class="s18">, size_t *</span>value_len<span class="s18">, void *</span>value<span class="s18">);</span></p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">While for most commands the renaming means only changing <span class="s15">gecko_cmd_ </span>to <span class="s15">sl_bt_</span><a href="#bookmark22" class="s25">, many functions are renamed due to changed functionality, changed API class or simply to make the API more logical. Furthermore, some API functions are split into multiple ones, and some functions are merged. These name changes are listed in </a>Table 5-2. Changes in the BGAPI Commands. For other functions not in this table, you only need to change the beginning of the function name from <span class="s18">gecko_cmd_ </span>to <span class="s18">sl_bt_</span>.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="https://www.silabs.com/documents/public/release-notes/bt-software-release-notes-3.1.0.0.pdf" class="s25" target="_blank">The following table below was created based on Bluetooth SDK v3.0. If you are using Bluetooth SDK v3.1, additional changes apply. The additional changes are listed in the </a><a href="https://www.silabs.com/documents/public/release-notes/bt-software-release-notes-3.1.0.0.pdf" class="s6" target="_blank">Bluetooth SDK 3.1.0.0 Release Notes</a><a href="https://www.silabs.com/documents/public/release-notes/bt-software-release-notes-3.1.0.0.pdf" class="s25" target="_blank">.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;padding-left: 159pt;text-indent: 0pt;text-align: center;"><a name="bookmark22">Table 5-2. Changes in the BGAPI Commands</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_enable_whitelisting</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_gap_enable_whitelisting</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">le_gap class renamed to gap</p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 13pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_data_channel_ classification</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 52pt;text-indent: 0pt;text-align: left;">sl_bt_gap_set_data_channel_ classification</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_privacy_mode</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_gap_set_privacy_mode</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:112pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_create_set</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 10pt;text-indent: 0pt;line-height: 108%;text-align: left;">New API for creating an advertising set. <b>Call this command to create an advertising set before any advertising</b></p><p class="s28" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">operations on an advertising set. The</p><p class="s28" style="padding-left: 5pt;padding-right: 9pt;text-indent: 0pt;text-align: left;">returned handle of the created advertising can then be used in other commands for advertising operations.</p><p class="s28" style="padding-top: 1pt;padding-left: 5pt;padding-right: 34pt;text-indent: 0pt;text-align: left;">A created advertising set can be released by command sl_bt_advertiser_delete_set.</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_delete_set</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">New API for deleting an advertising set.</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:35pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;padding-right: 35pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_bt5_set_adv_ parameters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_timing sl_bt_advertiser_set_channel_map sl_bt_advertiser_set_report_scan_request</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_mode</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 86pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_start sl_bt_advertiser_stop</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:46pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_bt5_set_mode</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 35pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_start sl_bt_advertiser_stop sl_bt_advertiser_set_timing sl_bt_advertiser_set_configuration</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:58pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 6pt;padding-left: 5pt;padding-right: 18pt;text-indent: 0pt;line-height: 118%;text-align: left;">gecko_cmd_le_gap_set_adv_data gecko_cmd_le_gap_bt5_set_adv_data</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 6pt;padding-left: 5pt;padding-right: 48pt;text-indent: 0pt;line-height: 118%;text-align: left;">sl_bt_advertiser_set_data sl_bt_ota_set_advertising_data</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 6pt;text-indent: 0pt;text-align: left;">New command sl_bt_ota_set_advertising_data for setting OTA advertising data.</p><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 19pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_data no longer supports setting OTA advertising data.</p></td></tr><tr style="height:27pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_adv_parameters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;padding-right: 33pt;text-indent: 0pt;line-height: 12pt;text-align: left;">sl_bt_advertiser_set_timing sl_bt_advertiser_set_channel_map</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_adv_timeout</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_timing</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_timing</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_timing</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_report</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">_scan_request</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_report_scan_request</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_phy</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_phy</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 31pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_ channel_map</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_channel_map</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 31pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_ configuration</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_configuration</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 23pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_clear_advertise_ configuration</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_clear_configuration</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 9pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_tx_po wer</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_tx_power</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:35pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_long_advertising</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">_data</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_long_data</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 10pt;text-indent: 0pt;text-align: justify;">sl_bt_set_long_data_set_long_data data does not support setting OTA advertising data.</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_start_advertising</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_start</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_stop_advertising</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_stop</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 30pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_start_periodic_ advertising</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 45pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_start_periodic_ advertising</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 31pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_stop_periodic_ advertising</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 45pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_stop_periodic_ advertising</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 31pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_advertise_ random_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_set_random_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 23pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_clear_advertise_ random_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_advertiser_clear_random_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:27pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;padding-right: 58pt;text-indent: 0pt;line-height: 12pt;text-align: left;">gecko_cmd_le_gap_open gecko_cmd_le_gap_connect</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_open</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to connection class.</p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 7pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_scan_parameter s</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 70pt;text-indent: 0pt;text-align: left;">sl_bt_scanner_set_timing sl_bt_scanner_set_type</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_discovery_timing</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_scanner_set_timing</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_discovery_type</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_scanner_set_mode</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:27pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-left: 5pt;padding-right: 29pt;text-indent: 0pt;line-height: 12pt;text-align: left;">gecko_cmd_le_gap_start_discovery gecko_cmd_le_gap_discover</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_scanner_start</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_end_procedure</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_scanner_stop</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:48pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;padding-right: 29pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_discovery_ extended_scan_response</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Removed.</p><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 28pt;text-indent: 0pt;text-align: left;">A single event API (sl_bt_evt_scanner_scan_report) for advertising reports.</p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_gap_set_conn_phy</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 9pt;text-indent: 0pt;text-align: left;">sl_bt_connection_set_default_preferred_ phy</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:48pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 19pt;text-indent: 0pt;line-height: 109%;text-align: left;">gecko_cmd_le_gap_set_conn_ parameters gecko_cmd_le_gap_set_conn_timing_</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">parameters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_set_default_parameters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_connection_close</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_close</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">gecko_cmd_le_connection_disable_slave</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">_latency</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_disable_slave_latency</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_connection_get_rssi</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_get_rssi</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">gecko_cmd_le_connection_read_channel</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">_map</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_read_channel_map</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:48pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 13pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_connection_set_ parameters</p><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_le_connection_set_timing_ parameters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_set_parameters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:38pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 7pt;text-indent: 0pt;line-height: 118%;text-align: left;">gecko_cmd_le_connection_set_phy gecko_cmd_le_connection_set_preferred</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">_phy</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_connection_set_preferred_phy</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_system_get_bt_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_system_get_identity_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_system_set_bt_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_system_set_identity_address</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_system_set_tx_power</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_system_set_max_tx_power</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_system_set_device_name</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_ota_set_device_name</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_hardware_get_time</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Use sleeptimer API</p></td></tr><tr style="height:25pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 21pt;text-indent: 0pt;text-align: left;">gecko_cmd_hardware_set_lazy_soft_ timer</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_system_set_lazy_soft_timer</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to system class</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_hardware_set_soft_timer</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_system_set_soft_timer</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to system class</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_flash_ps_erase</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_nvm_erase</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Class renamed from flash to nvm</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_flash_ps_erase_all</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_nvm_erase_all</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Class renamed from flash to nvm</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_flash_ps_load</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_nvm_load</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Class renamed from flash to nvm</p></td></tr><tr style="height:15pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_flash_ps_save</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_nvm_save</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Class renamed from flash to nvm</p></td></tr><tr style="height:36pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_cmd_&lt;class_name&gt;_</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">&lt;cmd_name&gt;</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_&lt;class_name&gt;_&lt;cmd_name&gt;</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 23pt;text-indent: 0pt;text-align: left;">For rest of the commands that aren&#39;t mentioned in this table, prefix change from <b>gecko_cmd </b>to <b>sl_bt</b></p></td></tr></table></li><li><p class="s4" style="padding-top: 7pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark16">Changes in BGAPI events</a></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Just like BGAPI commands, BGAPI events are also renamed. In Bluetooth SDK v3.0 event IDs start with <span class="s15">sl_bt_evt_ </span>instead of <span class="s15">gecko_evt_</span>. Similarly, the event struct types start with <span class="s15">sl_bt_evt_ </span>instead of <span class="s15">gecko_msg_evt_</span>, although these types are rarely referenced in the application.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark23" class="s25">Additionally, some events are renamed because of changing BGAPI class. </a>Table 5-3 contains all the events that have more than just the name change.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;"><a name="bookmark23">Table 5-3. Changes in the BGAPI events</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 101pt;padding-right: 100pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 81pt;padding-right: 81pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 41pt;padding-right: 41pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:37pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_gap_scan_response_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_le_gap_scan_response_evt_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_scanner_scan_report_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_scanner_scan_report_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to scanner class</p></td></tr><tr style="height:48pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_gap_extended_scan_response_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;padding-right: 16pt;text-indent: 0pt;text-align: left;">struct gecko_msg_le_gap_extended_scan_response_evt_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_scanner_scan_report_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_scanner_scan_report_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to scanner class</p></td></tr><tr style="height:37pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_gap_adv_timeout_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_le_gap_adv_timeout_evt_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_advertiser_timeout_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_advertiser_timeout_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 24pt;text-indent: 0pt;text-align: left;">Moved to advertiser class</p></td></tr><tr style="height:38pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_gap_scan_request_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_le_gap_scan_request_evt_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_advertiser_scan_request_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_advertiser_scan_request_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 24pt;text-indent: 0pt;text-align: left;">Moved to advertiser class</p></td></tr><tr style="height:40pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_hardware_soft_timer_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_evt_hardware_soft_timer_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_system_soft_timer_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_system_soft_timer_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to system class</p></td></tr><tr style="height:39pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_connection_opened_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_evt_le_connection_opened_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_opened_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_opened_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 8pt;text-indent: 0pt;text-align: left;">Renamed to connection class</p></td></tr><tr style="height:40pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_connection_closed_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_evt_le_connection_closed_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_closed_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_closed_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 8pt;text-indent: 0pt;text-align: left;">Renamed to connection class</p></td></tr><tr style="height:40pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_connection_rssi_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_evt_le_connection_rssi_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_rssi_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_rssi_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 8pt;text-indent: 0pt;text-align: left;">Renamed to connection class</p></td></tr><tr style="height:40pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_connection_parameters_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_evt_le_connection_parameters_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_parameters_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_parameters_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 8pt;text-indent: 0pt;text-align: left;">Renamed to connection class</p></td></tr><tr style="height:39pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_le_connection_phy_status_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_msg_evt_le_connection_phy_status_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_phy_status_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_connection_phy_status_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 8pt;text-indent: 0pt;text-align: left;">Renamed to connection class</p></td></tr><tr style="height:48pt"><td style="width:234pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_evt_&lt;class_name&gt;_&lt;event_name&gt;_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;padding-right: 27pt;text-indent: 0pt;text-align: left;">struct gecko_msg_&lt;class_name&gt;_&lt;event_name&gt;_evt_t</p></td><td style="width:195pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_&lt;class_name&gt;_&lt;event_name&gt;_id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_evt_&lt;class_name&gt;_&lt;event_name&gt;_t</p></td><td style="width:110pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 13pt;text-indent: 0pt;text-align: left;">For the rest of the events that aren&#39;t mentioned in this table</p></td></tr></table></li><li><p class="s4" style="padding-top: 7pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark17">Enums and Defines</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Due to the renamed classes some enumerations and definitions used by the Bluetooth API also change. The following table summarizes these changes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;">Table 5-4. Changes in the BGAPI enumerations and definitions</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-right: 76pt;text-indent: 0pt;text-align: right;">API 2.x</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 74pt;padding-right: 73pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 73pt;padding-right: 72pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:58pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 23pt;text-indent: 0pt;text-align: left;">le_gap_address_type_public le_gap_address_type_random le_gap_address_type_public_identity le_gap_address_type_random_identity</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 24pt;text-indent: 0pt;text-align: left;">gap_public_address gap_static_address gap_random_resolvable_address gap_random_nonresolvable_address</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 18pt;text-indent: 0pt;line-height: 109%;text-align: left;">Class renamed. le_gap_address_type_public_identity and</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">le_gap_address_type_random_identity</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">removed</p></td></tr><tr style="height:35pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 102pt;text-indent: 0pt;text-align: left;">le_gap_phy_1m le_gap_phy_2m le_gap_phy_coded</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 109pt;text-indent: 0pt;text-align: left;">gap_1m_phy gap_2m_phy gap_coded_phy</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 79pt;text-indent: 0pt;line-height: 118%;text-align: left;">Class renamed. enum items renamed.</p></td></tr><tr style="height:56pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 61pt;text-indent: 0pt;text-align: left;">le_gap_non_discoverable le_gap_limited_discoverable le_gap_general_discoverable le_gap_broadcast le_gap_user_data</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 43pt;text-indent: 0pt;text-align: left;">advertiser_non_discoverable advertiser_limited_discoverable advertiser_general_discoverable advertiser_broadcast advertiser_user_data</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to advertiser class</p></td></tr><tr style="height:67pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 32pt;text-indent: 0pt;text-align: left;">le_gap_non_connectable le_gap_directed_connectable le_gap_undirected_connectable le_gap_connectable_scannable le_gap_scannable_non_connectable le_gap_connectable_non_scannable</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 34pt;text-indent: 0pt;line-height: 109%;text-align: left;">advertiser_non_connectable advertiser_directed_connectable advertiser_connectable_scannable</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">advertiser_scannable_non_connectable</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">advertiser_connectable_non_scannable</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 9pt;text-indent: 0pt;line-height: 108%;text-align: left;">Moved to advertiser class. le_gap_undirected_connectable removed. Corresponding enum value is</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">advertiser_connectable_scannable</p></td></tr><tr style="height:35pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 61pt;text-indent: 0pt;text-align: left;">le_gap_discover_limited le_gap_discover_generic le_gap_discover_observation</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 51pt;text-indent: 0pt;text-align: left;">scanner_discover_limited scanner_discover_generic scanner_discover_observation</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Moved to scanner class.</p></td></tr><tr style="height:15pt"><td style="width:186pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-right: 74pt;text-indent: 0pt;text-align: right;">FLASH_PS_KEY_CTUNE</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">NVM_KEY_CTUNE</p></td><td style="width:173pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table></li><li><p class="s4" style="padding-top: 7pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark18">Changes in the C API</a><a name="bookmark24">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Bluetooth API has some commands that are not part of the BGAPI classes. They can be used in SoC applications only, for example to fetch events. These commands are part of the so-called C API. Due to the unified nomenclature these commands are also renamed in Bluetooth SDK v3.0, and some of them will not exist anymore due to the new software architecture. Return values are also unified similar to the BGAPI commands.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;">Table 5-5. Changes in the C API</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 87pt;padding-right: 86pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 84pt;padding-right: 84pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 52pt;padding-right: 51pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_msg_t</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">BGLIB_MSG_ID</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">SL_BT_MSG_ID</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet* <b>gecko_wait_event</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_status_t <b>sl_bt_wait_event</b>(sl_bt_msg_t* evt)</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="2"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 10pt;text-indent: 0pt;text-align: left;">In API 3.0, an event object is copied into the memory provided by application.</p></td></tr><tr style="height:21pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet* <b>gecko_peek_event</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_status_t <b>sl_bt_pop_event</b>(sl_bt_msg_t* evt)</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">int <b>gecko_event_pending</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">bool <b>sl_bt_event_pending</b>()</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">errorcode_t <b>gecko_stack_init</b>(const gecko_configuration_t *config)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 57pt;text-indent: 0pt;text-align: left;">sl_status_t <b>sl_bt_init_stack</b>(const sl_bt_configuration_t *config)</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:56pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 78pt;text-indent: 0pt;text-align: left;">errorcode_t <b>gecko_init</b>(const gecko_configuration_t *config)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">Component Configurator calls the init functions. If not using SSv5, call sl_bt_init_stack() and the BGAPI class init functions</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">uint32_t <b>gecko_can_sleep_ms</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="3"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 7pt;text-indent: 0pt;text-align: left;">Power manager takes care of sleeping</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">uint32_t <b>gecko_can_sleep_ticks</b>(void)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">uint32_t <b>gecko_sleep_for_ms</b>(uint32 max)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">-</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">void <b>gecko_priority_handle</b>(void)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">void <b>sl_bt_priority_handle</b>(void)</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">void <b>gecko_external_signal</b>(uint32 signals)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">void <b>sl_bt_external_signal</b>(uint32_t signals)</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">void <b>gecko_send_system_awake</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">void <b>sl_bt_send_system_awake</b>()</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 6pt;text-indent: 0pt;text-align: left;">void <b>gecko_send_system_error</b>(uint16 reason, uint8 data_len, const uint8* data)</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;padding-right: 15pt;text-indent: 0pt;text-align: left;">void <b>sl_bt_send_system_error</b>(uint16_t reason, uint8_t data_len, const uint8_t* data)</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_send_evt_user_message_to_host</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_send_evt_user_message_to_host</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_send_rsp_user_message_to_target</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s28" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_send_rsp_user_message_to_target</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table></li><li><p class="s4" style="padding-top: 7pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark19">Migration Example</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The following code snippets show an example how a v2.x application is to be updated to work in the v3.0 environment, considering all the changes mentioned above. The sample code simply starts advertising on boot and restarts advertising on connection close.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:270pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Code written in Bluetooth SDK v2.x</p></td><td style="width:270pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Code in Bluetooth SDK v3.0</p></td></tr><tr style="height:605pt"><td style="width:270pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">#include <span class="s10">&quot;native_gecko.h&quot;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">void <span class="s10">appMain(gecko_configuration_t* pconfig)</span></p><p class="s10" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">{</p><p class="s10" style="padding-top: 1pt;padding-left: 11pt;padding-right: 149pt;text-indent: 0pt;line-height: 114%;text-align: left;">initLog(); gecko_init(pconfig);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">while <span class="s10">(1)</span></p><p class="s10" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">{</p><p class="s9" style="padding-top: 1pt;padding-left: 16pt;padding-right: 95pt;text-indent: 0pt;line-height: 114%;text-align: left;">struct <span class="s10">gecko_cmd_packet* evt; evt = gecko_peek_event();</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s29" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">// Handle stack events</p><p class="s9" style="padding-top: 1pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">switch <span class="s10">(BGLIB_MSG_ID(evt-&gt;header)) {</span></p><p class="s9" style="padding-top: 1pt;padding-left: 38pt;text-indent: -10pt;line-height: 114%;text-align: left;">case <span class="s10">gecko_evt_system_boot_id: gecko_cmd_le_gap_set_advertise_timing(0,</span></p><p class="s10" style="padding-left: 210pt;text-indent: 0pt;text-align: left;">160, 160,</p><p class="s10" style="padding-top: 1pt;padding-left: 210pt;text-indent: 0pt;text-align: left;">0, 0);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 6pt;padding-left: 97pt;padding-right: 8pt;text-indent: -59pt;line-height: 113%;text-align: left;">gecko_cmd_le_gap_start_advertising(0, <span class="s30">le_gap_general_discoverable</span>, <span class="s30">le_gap_connectable_scannable</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">printLog(<span style=" color: #006FC0;">&quot;Started advertising\n&quot;</span>);</p><p class="s9" style="padding-top: 1pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">break;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 6pt;padding-left: 38pt;padding-right: 30pt;text-indent: -10pt;line-height: 114%;text-align: left;"><b>case </b>gecko_evt_le_connection_opened_id: printLog(<span style=" color: #006FC0;">&quot;Connection opened\n&quot;</span>); <b>break;</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 38pt;padding-right: 30pt;text-indent: -10pt;line-height: 114%;text-align: left;"><b>case </b>gecko_evt_le_connection_closed_id: printLog(<span style=" color: #006FC0;">&quot;Connection closed\n&quot;</span>);</p><p class="s9" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">if <span class="s10">(boot_to_dfu) {</span></p><p class="s10" style="padding-top: 1pt;padding-left: 48pt;text-indent: 0pt;line-height: 114%;text-align: left;">// Enter to OTA DFU mode. gecko_cmd_system_reset(2);</p><p class="s10" style="padding-left: 48pt;padding-right: 19pt;text-indent: -10pt;line-height: 112%;text-align: left;">} <b>else </b>{ gecko_cmd_le_gap_start_advertising(0,</p><p class="s30" style="padding-left: 92pt;text-indent: 0pt;line-height: 114%;text-align: left;">le_gap_general_discoverable<span class="s10">, </span>le_gap_connectable_scannable<span class="s10">);</span></p><p class="s10" style="padding-left: 48pt;text-indent: 0pt;text-align: left;">printLog(<span style=" color: #006FC0;">&quot;Started advertising\n&quot;</span>);</p><p class="s10" style="padding-top: 1pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">}</p><p class="s9" style="padding-top: 1pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">break;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 38pt;padding-right: 198pt;text-indent: -10pt;line-height: 114%;text-align: left;">default: break;</p><p class="s10" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">}</p><p class="s10" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">}</p><p class="s10" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p></td><td style="width:270pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">#include <span class="s10">&quot;sl_bt_api.h&quot;</span></p><p class="s9" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">static uint8_t <span class="s10">adv_h = 255; </span><span class="s29">//adv. handle</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">void <span class="s10">sl_bt_on_event(sl_bt_msg_t* evt)</span></p><p class="s10" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">{</p><p class="s29" style="padding-top: 1pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">// Handle stack events</p><p class="s9" style="padding-top: 1pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">switch <span class="s10">(SL_BT_MSG_ID(evt-&gt;header)) {</span></p><p class="s9" style="padding-top: 1pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">case <span class="s10">sl_bt_evt_system_boot_id:</span></p><p class="s10" style="padding-top: 1pt;padding-left: 37pt;padding-right: 8pt;text-indent: 0pt;line-height: 114%;text-align: left;">err= sl_bt_advertiser_create_set(&amp;adv_h); <span style=" color: #BEBEBE;">app_assert(err == SL_STATUS_OK,</span></p><p class="s32" style="padding-left: 37pt;padding-right: 8pt;text-indent: 0pt;line-height: 114%;text-align: left;">&quot;[E: 0x%04x] Failed to create advertising set\n&quot;, (int)err);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-right: 15pt;text-indent: 0pt;text-align: right;">err = sl_bt_advertiser_set_timing(adv_h,</p><p class="s10" style="padding-top: 1pt;padding-right: 15pt;text-indent: 0pt;text-align: right;">160, 160,</p><p class="s10" style="padding-top: 1pt;padding-right: 31pt;text-indent: 0pt;text-align: right;">0, 0);</p><p class="s32" style="padding-top: 1pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">app_assert(err == SL_STATUS_OK,</p><p class="s32" style="padding-top: 1pt;padding-left: 37pt;padding-right: 25pt;text-indent: 0pt;line-height: 114%;text-align: left;">&quot;[E: 0x%04x] Failed to set advertising timing\n&quot;, (int)err);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 75pt;padding-right: 9pt;text-indent: -37pt;line-height: 113%;text-align: left;">err = sl_bt_advertiser_start(adv_h, <span class="s30">advertiser_general_discoverable</span>, <span class="s30">advertiser_connectable_scannable</span>);</p><p class="s32" style="padding-left: 37pt;padding-right: 62pt;text-indent: 0pt;line-height: 114%;text-align: left;">app_assert(err == SL_STATUS_OK, &quot;[E: 0x%04x] Failed to start advertising\n&quot;, (int)err);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 37pt;text-indent: 0pt;text-align: left;">app_log(<span style=" color: #006FC0;">&quot;Started advertising\n&quot;</span>);</p><p class="s9" style="padding-top: 1pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">break<span class="s10">;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 37pt;padding-right: 33pt;text-indent: -10pt;line-height: 114%;text-align: left;"><b>case </b>sl_bt_evt_connection_opened_id: app_log(<span style=" color: #006FC0;">&quot;Connection opened\n&quot;</span>); <b>break</b>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 37pt;text-indent: -10pt;line-height: 114%;text-align: left;"><b>case </b>sl_bt_evt_connection_closed_id: app_log(<span style=" color: #006FC0;">&quot;Connection closed\n&quot;</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 75pt;padding-right: 9pt;text-indent: -37pt;line-height: 114%;text-align: left;">err = sl_bt_advertiser_start(adv_h, <span class="s30">advertiser_general_discoverable</span>, <span class="s30">advertiser_connectable_scannable</span>);</p><p class="s32" style="padding-left: 37pt;padding-right: 62pt;text-indent: 0pt;line-height: 113%;text-align: left;">app_assert(err == SL_STATUS_OK, &quot;[E: 0x%04x] Failed to start advertising\n&quot;, (int)err);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 37pt;text-indent: 0pt;text-align: left;">app_log(<span style=" color: #006FC0;">&quot;Started advertising\n&quot;</span>);</p><p class="s9" style="padding-top: 1pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">break;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 37pt;padding-right: 198pt;text-indent: -10pt;line-height: 112%;text-align: left;">default: break;</p><p class="s10" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">}</p><p class="s10" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">}</p></td></tr></table></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark25">GATT Configurator</a><a name="bookmark26">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v3.0 the GATT Configurator is completely redesigned. The new user interface is more modern, while the generator tool makes it possible to add partial extensions to the GATT database.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">New projects automatically open a GATT configurator tab. If the tab isn’t open when modifying an existing project, go to the Project Configurator Configuration Tools tab. Click <b>Open </b>next to GATT Configurator. Alternatively you can double-click the gatt_configura- tion.btconf file in the Project Explorer view.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">While the user interface design is completely new, the underlying functionality stays the same as in Bluetooth SDK v2.x: you can add predefined and custom services/characteristics to your GATT database and configure them.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="705" height="426" alt="Bluetooth GATT Configurator UI " title="Bluetooth GATT Configurator UI " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_018.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_019.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="397" height="90" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_020.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_022.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_023.png"/></span></p><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">1</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">2</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">3</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">4</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">5</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">6</h3><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 12pt;text-align: left;">7</h3><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 7pt;padding-bottom: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The GATT Configurator menu is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l10"><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Add an item.</p></li><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Duplicate the selected item.</p></li><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Move the selected item up.</p></li><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Move the selected item down.</p></li><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Import a GATT database.</p></li><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Add Predefined.</p></li><li><p style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Delete the selected item.</p></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">To add a custom service, click the <b>Profile (Custom BLE GATT)</b>, and then click <b>Add </b>(1). To add a custom characteristic, select a service and then click <b>Add </b>(1). To add a predefined service/characteristic click <b>Add Predefined </b>(6). To learn more about the configurator see <i>UG438: GATT Configurator User’s Guide for Bluetooth SDK v3.x</i>.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">A new GATT configurator feature is that it can accept partial database extensions from additional .xml files. This is important, because some software components may need to contribute to the GATT database with its custom service. For example, the OTA DFU component adds the OTA service to the GATT database by adding an ota_dfu.xml file, which defines the service, next to the .btconf file:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 87pt;text-indent: 0pt;text-align: left;"><span><img width="545" height="298" alt="GATT configurator components correlated with Project Explorer files.  " title="GATT configurator components correlated with Project Explorer files.  " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_024.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Another important innovation is that the GATT database-related files (gatt_db.c, gatt_db.h) are automatically regenerated as you edit and save the file (changes are not autosaved). There is no need to manually start the generator script as in Bluetooth SDK v2.x.</p><p class="s4" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Migrating the GATT database is easy. You can import the database from your old project by clicking Import (6), and selecting the gatt.xml file of your old project. If your old database contains an OTA service, remove it from the database. It is defined by the new OTA DFU component.</p></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark27">Stack Configuration and Initialization</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l11"><li><p class="s4" style="padding-top: 10pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark28">Configuration</a><a name="bookmark30">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The Bluetooth stack can be configured by passing a configuration structure to the stack init function. In Bluetooth SDK v2.x the configu- ration structure is defined in gecko_configuration.h, and the default configuration is usually defined in main.c, like this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="735" height="491" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_025.png"/></span></p><p class="s16" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">static <span class="s20">gecko_configuration_t </span><span class="s18">config = {</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.config_flags = 0, <span style=" color: #3E7E5F;">/* Check flag options from UG136 */</span></p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#if <span class="s18">defined(FEATURE_LFXO) || defined(PLFRCO_PRESENT)</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.sleep.flags = SLEEP_FLAGS_DEEP_SLEEP_ENABLE, <span style=" color: #3E7E5F;">/* Sleep is enabled */</span></p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#else</p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.sleep.flags = 0,</p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#endif</p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.max_connections = MAX_CONNECTIONS, <span style=" color: #3E7E5F;">/* Maximum number of simultaneous</span></p><ul id="l12"><li><p class="s21" style="padding-left: 332pt;text-indent: -10pt;line-height: 10pt;text-align: left;">connections */</p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.max_advertisers = MAX_ADVERTISERS, <span style=" color: #3E7E5F;">/* Maximum number of advertisement sets */</span></p><p class="s21" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span style=" color: #000;">.bluetooth.heap = bluetooth_stack_heap, </span>/* <u>Bluetooth</u> stack memory for connection</p></li><li><p class="s21" style="padding-left: 332pt;text-indent: -10pt;line-height: 10pt;text-align: left;">management */</p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.heap_size = <span class="s16">sizeof</span>(bluetooth_stack_heap),<span style=" color: #3E7E5F;">/* </span><span class="s33">Bluetooth</span><span style=" color: #3E7E5F;"> stack memory for connection</span></p></li><li><p class="s21" style="padding-left: 332pt;text-indent: -10pt;line-height: 10pt;text-align: left;">management */</p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">#if <span class="s18">defined(FEATURE_LFXO)</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.bluetooth.sleep_clock_accuracy = 100, <span style=" color: #3E7E5F;">/* Accuracy of the Low Frequency Crystal</span></p></li><li><p class="s21" style="padding-left: 332pt;text-indent: -10pt;line-height: 10pt;text-align: left;">Oscillator in <u>ppm</u>. *</p></li><li><p class="s21" style="padding-left: 332pt;text-indent: -10pt;line-height: 10pt;text-align: left;">Do not modify if you are using a module */</p></li></ul><p class="s16" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">#elif <span class="s18">defined(PLFRCO_PRESENT)</span></p><p class="s21" style="padding-left: 24pt;text-indent: 11pt;text-align: left;"><span style=" color: #000;">.bluetooth.sleep_clock_accuracy = 500, </span>/* In case of internal RCO the sleep clock accuracy is 500 <u>ppm</u> */</p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#endif</p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.gattdb = &amp;bg_gattdb_data, /<span style=" color: #3E7E5F;">* Pointer to GATT database */</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.ota.flags = 0, <span style=" color: #3E7E5F;">/* Check flag options from UG136 */</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.ota.device_name_len = 3, <span style=" color: #3E7E5F;">/* Length of the device name in OTA DFU mode */</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.ota.device_name_ptr = <span style=" color: #2A00FF;">&quot;OTA&quot;</span>, <span style=" color: #3E7E5F;">/* Device name in OTA DFU mode */</span></p><p class="s21" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><span style=" color: #000;">.pa.config_enable = 1, </span>/* Set this to be a valid PA <u>config</u> */</p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#if <span class="s18">defined(FEATURE_PA_INPUT_FROM_VBAT)</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.pa.input = GECKO_RADIO_PA_INPUT_VBAT, <span style=" color: #3E7E5F;">/* Configure PA input to VBAT */</span></p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#else</p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.pa.input = GECKO_RADIO_PA_INPUT_DCDC, <span style=" color: #3E7E5F;">/* Configure PA input to DCDC */</span></p><p class="s16" style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#endif <span class="s21">// defined(FEATURE_PA_INPUT_FROM_VBAT)</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.rf.flags = GECKO_RF_CONFIG_ANTENNA, <span style=" color: #3E7E5F;">/* Enable antenna configuration. */</span></p><p class="s18" style="padding-left: 35pt;text-indent: 0pt;line-height: 10pt;text-align: left;">.rf.antenna = GECKO_RF_ANTENNA, <span style=" color: #3E7E5F;">/* Select antenna path! */</span></p><p class="s18" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v3.0 the configuration structure is defined in sl_bt_stack_config.h with slightly renamed type definitions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;">Table 7-1. Changes in Bluetooth Configuration Types</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 87pt;padding-right: 86pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 84pt;padding-right: 84pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 52pt;padding-right: 51pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_configuration_t</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_configuration_t</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_bluetooth_config_t</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_stack_config_t</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_*</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_*</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The configuration structure itself does not change much between v2.x and v3.0. Only the OTA config is removed from the structure. New runtime commands are provided for setting OTA flags and device name.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v3.0 the default configuration is defined in the sl_bluetooth_config.h header file instead of main.c. Moving the default configuration out of main.c separates config from functionality, and it also makes it possible to configure the stack using the Component Editor.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">To edit the configuration parameters using a normal text editor, open sl_bluetooth_config.h.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">To edit the configuration parameters using the Component Editor in SSv5, go to the <b>Software Components </b>tab, find the Bluetooth Core component, and click <b>Configure</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="717" height="387" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_026.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">Set the configuration values in the input fields. The values will be automatically verified and saved into the header file without any fur- ther action needed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="704" height="388" alt="Configuring the Bluetooth Core component " title="Configuring the Bluetooth Core component " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_027.jpg"/></span></p></li><li><p class="s4" style="padding-top: 7pt;padding-left: 52pt;text-indent: -28pt;text-align: left;"><a name="bookmark29">Initialization</a><a name="bookmark31">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">To initialize the Bluetooth stack, many functions have to be called: one for initializing the stack in general with the configuration structure and one for each BGAPI class (such as gap, gatt, connection, and so on) to initialize the classes. Furthermore, additional stack features (such as AFH) have to be initialized with a feature init function. All of these functions are slightly renamed in Bluetooth SDK v3.0.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;">Table 7-2. Changes in Bluetooth init functions</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:137pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 52pt;padding-right: 51pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:139pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 53pt;padding-right: 52pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 118pt;padding-right: 117pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:137pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_stack_init(config)</p></td><td style="width:139pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_init_stack(config)</p></td><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:25pt"><td style="width:137pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_bgapi_class_*_init()</p></td><td style="width:139pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_class_*_init()</p></td><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">For initializing BGAPI classes for NCP mode, add definition (-</p><p class="s27" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">D) SL_BT_API_FULL in application project.</p></td></tr><tr style="height:15pt"><td style="width:137pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gecko_init_&lt;feature&gt;</p></td><td style="width:139pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_init_&lt;feature&gt;</p></td><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v2.x, <span class="s15">gecko_init(*config) </span>can be used to initialize the stack. This function calls <span class="s15">gecko_stack_init(con- fig) </span>and all the BGAPI class init functions that are usually needed in a general Bluetooth application. Unnecessary classes can be removed (to free up memory) and additional class init functions can be added based on the needs of the application. If a class is not initialized the BGAPI commands of that class cannot be called. Additional features always have to be initialized after the stack init if they are needed.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In Bluetooth SDK v3.0 each BGAPI class has a corresponding software component. This means that classes can be initialized by adding their respective software component. When adding the “Bluetooth” component to your project, most BGAPI classes are also added by default. To initialize additional classes, go to the Software Components tab and install the corresponding component. To remove unnec- essary classes, uninstall the corresponding components. Filter on installed components to make the search easier. This may help make your application size smaller.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Additional features, such as Adaptive Frequency Hopping, Periodic Advertising, and so on can be initialized the same way as BGAPI classes, by installing the corresponding software component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="724" height="366" alt="Software Components tab with AFH component " title="Software Components tab with AFH component " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_028.jpg"/></span></p><p class="s4" style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">When migrating your project from v2.x to v3.0 it is recommended to remove all the initialization code from app.c and to add the proper software components to your project instead.</p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark32">AppLoader</a><a name="bookmark33">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Beginning with Bluetooth SDK v3.0 the AppLoader uses a new feature of the bootloader: parsing GBL headers in RAM. This means that GBL headers do not have to be stored in flash during application update, which makes the process a bit faster, and more importantly it does not make the old application image corrupt if the GBL headers are incorrect.</p><p class="s4" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">However, this also means that the AppLoader in Bluetooth SDK v3.0 is incompatible with older bootloader versions. Therefore, if you migrate your project to Bluetooth SDK v3.0, and you use the AppLoader in the newly created project, rebuild the boot- loader in v3.0 by selecting the bootloader example and building it, and update your device with the resulting compatible boot- loader.</p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;line-height: 107%;text-align: justify;"><a href="https://www.silabs.com/documents/public/user-guides/ug266-gecko-bootloader-user-guide.pdf" class="s25" target="_blank">For information about building and using bootloaders, see </a><a href="https://www.silabs.com/documents/public/user-guides/ug266-gecko-bootloader-user-guide.pdf" class="s6" target="_blank">UG266: Silicon Labs Gecko Bootloader User’s Guide</a><span style=" color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span><a href="https://docs.silabs.com/bluetooth/latest/" class="s25" target="_blank">and online content at </a><a href="https://docs.silabs.com/bluetooth/latest/" class="s6" target="_blank">docs.silabs.com</a><a href="https://docs.silabs.com/bluetooth/latest/" class="s25" target="_blank">.</a></p></li><li><h3 style="padding-top: 7pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a name="bookmark34">Migrating NCP projects</a><a name="bookmark35">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Migrating an NCP application is usually easy, since the stack and the application are well-separated. While the stack is running on the NCP target, the application is running on the NCP host. Therefore, a stack update usually does not affect the application except that the API changes must be respected.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">An SDK update in the NCP use case means that:</p><ol id="l13"><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">The NCP target device must be programmed with the <b>NCP – Empty </b>sample app of the new SDK.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">UART pins must be configured in the sample app.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">The GATT database must be imported in the sample app.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">Furthermore,</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">The NCP host device must include the new BGAPI header files, so that it can communicate with the target.</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">Deprecated API calls must be updated, if there are any.</p></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Upgrading the NCP target code from Bluetooth SDK v2.x to v3.0 is easy. A new <b>NCP – Empty </b><a href="https://www.silabs.com/documents/public/application-notes/an1259-bt-ncp-mode-sdk-v3x.pdf" class="s25" target="_blank">project must be generated with Bluetooth SDK v3.0. The UART pins can be easily configured with the Pin Tool, and the GATT database can be easily imported with the GATT Configurator. Should you use deep sleep mode in the NCP target, you must install the Wake Lock component and configure it. For more information see </a><a href="https://www.silabs.com/documents/public/application-notes/an1259-bt-ncp-mode-sdk-v3x.pdf" class="s6" target="_blank">AN1259: Using the Silicon Labs v3.x Bluetooth® Stack in Network Co-Processor Mode</a><a href="https://www.silabs.com/documents/public/application-notes/an1259-bt-ncp-mode-sdk-v3x.pdf" class="s25" target="_blank">.</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The NCP host update involves more changes. After updating the header files, not only the full Bluetooth API has to be updated but also some BGLIB commands and macros.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">An NCP host code using Bluetooth SDK v2.x must contain the following header files:</p><ul id="l14"><li><p class="s4" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">bg_errorcodes.h</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">bg_types.h</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">host_gecko.h</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">gecko_bglib.h</p><p style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">and the following source file:</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;">gecko_bglib.c</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">An NCP host code using Bluetooth SDK v3.0 must contain the following header files:</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><b>sl_status.h </b>(in <i>SDK_DIR/platform/common/inc</i>)</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><b>sl_bt_types.h </b>(in <i>SDK_DIR/protocol/bluetooth/inc</i>)</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><b>sl_bt_api.h </b>(in <i>SDK_DIR/protocol/bluetooth/inc</i>)</p></li><li><p style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;line-height: 130%;text-align: left;"><b>sl_bt_ncp_host.h </b>(in <i>SDK_DIR/protocol/bluetooth/inc</i>) and the following source files:</p></li><li><p style="padding-left: 38pt;text-indent: -14pt;text-align: left;"><b>sl_bt_ncp_host_api.c </b>(in <i>SDK_DIR/protocol/bluetooth/src</i>)</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><b>sl_bt_ncp_host.c </b>(in <i>SDK_DIR/protocol/bluetooth/src</i>)</p></li></ul><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark20" class="s25">The new header files use the new nomenclature (commands/events starting with sl_bt_...) even if the underlying BGAPI packet content, which is sent to the target device via UART, may be unchanged in some cases. Therefore NCP host code must be completely updated according the description in section </a><a href="#bookmark20" class="a">5 Bluetooth API</a>, using the new BGAPI.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark24" class="s25">Beside the changes in BGAPI (Bluetooth commands and events), the host API is also changed similarly to the changes in C API detailed in section </a><a href="#bookmark24" class="a">5.7 Changes in the C API</a>. The following table summarizes the changes in the host API:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 159pt;text-indent: 0pt;text-align: center;">Table 9-1. Changes in the Host API</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 87pt;padding-right: 86pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 84pt;padding-right: 84pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 52pt;padding-right: 51pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">BGLIB_DEFINE</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">SL_BT_API_DEFINE</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">BGLIB_INITIALIZE</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">SL_BT_API_INITIALIZE</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">BGLIB_INITIALIZE_NONBLOCK</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">SL_BT_API_INITIALIZE_NONBLOCK</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_msg_t</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">BGLIB_MSG_ID</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">SL_BT_MSG_ID</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24.25pt" cellspacing="0"><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 87pt;padding-right: 86pt;text-indent: 0pt;text-align: center;">API 2.x</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 84pt;padding-right: 84pt;text-indent: 0pt;text-align: center;">API 3.0</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s26" style="padding-top: 2pt;padding-left: 52pt;padding-right: 51pt;text-indent: 0pt;text-align: center;">Notes</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet* <b>gecko_wait_event</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_status_t <b>sl_bt_wait_event</b>(sl_bt_msg_t* evt)</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="2"><p class="s27" style="padding-top: 1pt;padding-left: 5pt;padding-right: 10pt;text-indent: 0pt;text-align: left;">In API 3.0, an event object is copied into the memory provided by application.</p></td></tr><tr style="height:21pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet* <b>gecko_peek_event</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_status_t <b>sl_bt_pop_event</b>(sl_bt_msg_t* evt)</p></td></tr><tr style="height:15pt"><td style="width:207pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">int <b>gecko_event_pending</b>()</p></td><td style="width:201pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s27" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">bool <b>sl_bt_event_pending</b>()</p></td><td style="width:132pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The NCP host code must be updated according to these changes. For example fetching an event changes from:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">struct gecko_cmd_packet *p; p = gecko_wait_event();</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">switch (BGLIB_MSG_ID(p-&gt;header)) {…}</p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">to:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">sl_bt_msg_t evt; sl_bt_msg_t *p = &amp;evt; sl_bt_wait_event(&amp;evt);</p><p class="s18" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">switch (SL_BT_MSG_ID(p-&gt;header)) {…}</p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Regarding the software architecture, the <b>empty host example </b><a href="#bookmark8" class="s25">created for PCs (in SDK_DIR/app/bluetooth/example_host/empty) is up- dated to align with the new SoC software architecture (see section </a><a href="#bookmark8" class="a">4 </a><span style=" color: #049;">Software Architecture</span>). While it is not necessary to update the architecture on the NCP host, it is recommended to use this new architecture on newly created NCP host projects, so that it aligns with SoC code.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The <b>NCP – host </b>example created for EFR devices (find it among the example projects in SSv5) is also updated to the new software architecture. If the host runs on a Silicon Labs device, it is highly recommended to start a new <b>NCP – host </b>project with the new software architecture, and migrate your code into it, just as for an SoC project.</p></li><li><h3 style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: left;"><a name="bookmark36">Migration Summary</a></h3></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">This section summarizes the steps required to migrate a project from Bluetooth SDK v2.x with Simplicity Studio 4 to Bluetooth SDK v3.0 with Simplicity Studio 5.</p><ol id="l15"><li><p class="s34" style="padding-top: 3pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark2" class="s25">Create a new SoC-Empty project in the new SDK from the SSv5 Launcher view (section </a><a href="#bookmark2" class="a">2 Project </a>Structure<span style=" color: #000;">).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="717" height="437" alt="Project Configurator with Example Project tab SoC Empty project selected " title="Project Configurator with Example Project tab SoC Empty project selected " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_029.jpg"/></span></p></li><li><p class="s34" style="padding-top: 7pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark4" class="s25">Familiarize yourself with the functionality available through the Component Library. Then install components that correspond to func- tions in your original project (section </a><a href="#bookmark4" class="a">3 Software </a>Components<span style=" color: #000;">).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="724" height="348" alt="Software Components tab, iBeacon component " title="Software Components tab, iBeacon component " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_030.jpg"/></span></p></li><li><p class="s34" style="padding-top: 1pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark10" class="s25">If your application was RTOS-based, add the Micrium Kernel component (section </a><a href="#bookmark10" class="a">4.2 </a>RTOS<span style=" color: #000;">).</span></p></li><li><p class="s34" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark31" class="s25">Remove all the initialization code from app.c and instead add the corresponding software components to your project (section </a><a href="#bookmark31" class="a">7.2</a> Initialization)<span style=" color: #000;">.</span></p></li><li><p class="s34" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: left;"><a href="#bookmark30" class="s25">Edit any configuration parameters, either in sl_bluetooth_config.h using a text editor, or in the Component Editor in SSv5. Changes there are automatically saved (section </a><a href="#bookmark30" class="a">7.1 </a>Configuration<span style=" color: #000;">).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="717" height="387" alt="Software Components tab, configue the Bluetooth Core component " title="Software Components tab, configue the Bluetooth Core component " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_031.jpg"/></span></p></li><li><p style="padding-top: 7pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Copy the Bluetooth event handlers from <span class="s15">appMain() </span>into <span class="s15">sl_bt_on_event() </span>defined in app.c. If your application is RTOS- based, the parallel application task must be started in <span class="s15">app_init()</span><a href="#bookmark9" class="s25">, which is also defined in app.c (section </a><a href="#bookmark9" class="a">4.1 Bluetooth Event </a><span style=" color: #049;">Handling</span>).</p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;"><a href="#bookmark20" class="s25">Review the Bluetooth API changes detailed in section </a><a href="#bookmark20" class="a">5 Bluetooth API</a><a href="#bookmark20" class="s25">.</a> Edit your application code accordingly. Most function names are just renamed from <span class="s15">gecko_cmd_ </span>to <span class="s15">sl_bt_ </span>While there are exceptions, the compiler will give a verbose error message giving the name of the replacement function when compiling with the old API.</p></li><li><p class="s34" style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;"><a href="#bookmark33" class="s25">If your new project uses AppLoader, rebuild the bootloader in GSDK v3.0, and update your device with the compatible bootloader (section </a><a href="#bookmark33" class="a">8 </a>AppLoader<span style=" color: #000;">).</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="722" height="437" alt="Gatt configurator UI with import control highlighted. " title="Gatt configurator UI with import control highlighted. " src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_032.jpg"/></span></p></li><li><p style="padding-top: 3pt;padding-left: 38pt;text-indent: -14pt;text-align: justify;">Import the GATT database from your old project by opening the GATT Configurator, clicking Import, and selecting the gatt.xml file of your old project. If your old database contains an OTA service, remove it from the database. It is defined by the new OTA DFU component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 38pt;text-indent: -14pt;line-height: 19pt;text-align: left;">If the application uses a Host/NCP configuration, both the target and the host must be updated. Target:</p><ol id="l16"><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">The target device must be programmed with the <b>NCP – Empty </b>sample app of the new SDK.</p></li><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">UART pins must be configured in the sample app.</p></li><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">The GATT database must be imported in the sample app.</p></li></ol></li></ol><p style="padding-top: 8pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">Host:</p><ol id="l17"><li><p style="padding-top: 3pt;padding-left: 59pt;text-indent: -18pt;text-align: left;">The host device must include the new BGAPI header files, so that it can communicate with the target.</p></li><li><p class="s34" style="padding-top: 3pt;padding-left: 38pt;text-indent: 3pt;line-height: 183%;text-align: left;"><a href="#bookmark35" class="s25">Deprecated API calls must be updated, if there are any. See section </a><a href="#bookmark35" class="a">9 </a>Migrating NCP projects <span style=" color: #000;">for more information.</span></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 21pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">Simplicity Studio</h2><p class="s35" style="padding-top: 15pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">One-click access to MCU and wireless tools, documentation, software, source code libraries &amp; more. Available for Windows, Mac and Linux!</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="768" height="435" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_033.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_034.png"/></span></p><h4 style="padding-left: 159pt;text-indent: 0pt;text-align: center;">IoT Portfolio</h4><p style="padding-top: 1pt;padding-left: 159pt;text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/IoT" class="s36">www.silabs.com/IoT</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_035.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 6pt;text-indent: 0pt;line-height: 12pt;text-align: left;">SW/HW</h4><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 37pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/simplicity" class="s37">www.silabs.com/simplicity</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_036.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 6pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Quality</h4><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/quality" class="s36">www.silabs.com/quality</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 31pt;text-indent: 0pt;text-align: left;">Support &amp; Community</h4><p style="text-indent: 0pt;text-align: left;"><span><img width="79" height="79" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_037.png"/></span></p><p style="padding-top: 1pt;padding-left: 33pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/community" class="s36">www.silabs.com/community</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s39" style="padding-top: 1pt;padding-bottom: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><span><img width="771" height="49" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_038.png"/></span></p><p class="s39" style="padding-top: 1pt;padding-bottom: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">of use of the information supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required, or Life Support Systems</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><span><img width="745" height="23" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_039.png"/></span></p><p class="s39" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">products shall under no circumstances be used in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Trademark Information</p><p class="s39" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 114%;text-align: left;">Silicon Laboratories Inc.®, Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, ClockBuilder®, CMEMS®, DSPLL®, EFM®, EFM32®, EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, “the world’s most energy friendly microcontrollers”, Ember®, EZLink®, EZRadio®, EZRadioPRO®, Gecko®, Gecko OS, Gecko OS Studio, ISOmodem®, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress®, Zentri, the Zentri logo and Zentri DMS, Z-Wave®, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="134" height="66" alt="image" src="an1255-transitioning-from-bluetooth-sdk-v2-to-v3/Image_040.png"/></span></p><p class="s39" style="padding-top: 6pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s39" style="padding-left: 134pt;text-indent: 0pt;line-height: 9pt;text-align: left;">USA</p><p style="padding-top: 4pt;padding-left: 134pt;text-indent: 0pt;text-align: left;"><a href="http://www.silabs.com/" class="s40">http://www.silabs.com</a></p></body></html>
