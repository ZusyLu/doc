<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>UG438: GATT Configurator User&#39;s Guide in Bluetooth SDK v3.x</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 .h1, h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s1 { color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s5 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .s6 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s7 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s8 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 h4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 12pt; }
 .s11 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 h2 { color: #FFF; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 20pt; }
 .s13 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s14 { color: #4C4D4F; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s15 { color: #424242; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s16 { color: #424242; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s17 { color: #4C4D4F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s18 { color: #4C4D4F; font-family:"Arial Black", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s20 { color: #4C4D4F; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .a, a { color: #0086DD; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s22 { color: #4C4D4F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 2pt; }
 h3 { color: #FB1725; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt;counter-reset: e1 1; }
 #l3> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)") "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l4 {padding-left: 0pt;counter-reset: f1 1; }
 #l4> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l4> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 #l5 {padding-left: 0pt;counter-reset: f2 1; }
 #l5> li>*:first-child:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: f2 0;  }
 #l6 {padding-left: 0pt;counter-reset: f3 1; }
 #l6> li>*:first-child:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: f3 0;  }
 #l7 {padding-left: 0pt;counter-reset: d2 1; }
 #l7> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l7> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l8 {padding-left: 0pt;counter-reset: g1 1; }
 #l8> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l9 {padding-left: 0pt;counter-reset: d2 1; }
 #l9> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l9> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="127" height="62" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-top: 11pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">UG438: GATT Configurator User’s Guide for</h1><p class="s1" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">Bluetooth® <span class="h1">SDK v3.x </span><span><img width="37" height="37" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 21pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="728" height="1" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="206" height="2" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-top: 4pt;padding-bottom: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 11pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="206" height="2" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_005.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s3" style="padding-left: 20pt;text-indent: -7pt;text-align: left;">GATT Configuration user interface re- view.</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Using the GATT Configurator to create and configure the GATT database.</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Typical GATT Configurator Use Cases</p></li><li><p class="s3" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Dynamic GATT database handling</p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 17pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">This guide provides the information needed to effectively use the Bluetooth GATT Configurator provided as a part of Simplicity Studio® 5 with Bluetooth SDK v3.x. The GATT Configurator is an intuitive interface providing access to all the Profiles, Services, Characteristics, and Descriptors as defined in the Bluetooth specification. It also supports creating, importing, or exporting custom GATT profiles for Bluetooth applications. This guide reviews the user interface and covers some of the most common uses of the Configurator, and the usage of the Dynamic GATT Configurator.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 93pt;text-indent: 0pt;text-align: left;"><span><img width="521" height="296" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_006.jpg"/></span></p><ol id="l2"><li><p class="s5" style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark0">GATT Configurator Overview</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">The GATT Configurator is a simple-to-use tool to help you build your own GATT database. A list of project Profiles/Services/Character- istics/Descriptors is shown on the left and details about the selected item is shown on the right.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The GATT Configurator is composed of a Custom GATT editor on the left, showing a list of project Profiles/Services/Characteristics/De- scriptors, and a Settings editor on the right. A SIG selector allows you to add standard elements to the profile.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">An options menu is provided at the top of the Custom GATT editor.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The Custom GATT editor is always visible, and the Settings editor opens by default.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 93pt;text-indent: 0pt;text-align: left;"><span><img width="535" height="304" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_007.jpg"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 1.1: GATT Configurator with Settings Editor</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_008.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="396" height="90" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_009.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_010.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_011.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="35" height="35" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_012.png"/></span></p><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">2</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">3</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">4</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">5</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">6</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="text-indent: 0pt;line-height: 12pt;text-align: left;">7</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-bottom: 4pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The GATT Configurator menu is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l3"><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Add an item.</p></li><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Duplicate the selected item.</p></li><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Move the selected item up.</p></li><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Move the selected item down.</p></li><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Import a GATT database.</p></li><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Add Predefined (opens the SIG editor).</p></li><li><p style="padding-left: 33pt;text-indent: -10pt;text-align: left;">Delete the selected item.</p></li></ol><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Click Add Predefined (6) to open the SIG selector.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 78pt;text-indent: 0pt;text-align: left;"><span><img width="570" height="319" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_013.jpg"/></span></p><p class="s6" style="padding-top: 6pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 1.2: GATT Configurator with SIG Selector</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l4"><ol id="l5"><li><p class="s6" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark1">SIG Selector</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The SIG Selector displays a list of predefined Profiles, Services, Characteristics, and Descriptors. These items can be filtered, using the filter pane. Tabs allow you to switch between different lists. As shown in the following figure, the pane on the right side of the list displays textual information about the latest selection. To add an item to the Custom GATT editor, mouse over it and click + on the right. The item can then be edited in the Settings Section. The selected SIG service/characteristic/descriptor will be added under the highlighted pro- file/service/characteristic. Click <b>&lt; BACK </b>to return to the Setting Editor.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 89pt;text-indent: 0pt;text-align: left;"><span><img width="544" height="302" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_014.jpg"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 19pt;text-indent: 0pt;text-align: center;">Figure 1.3: SIG Selector</p></li><li><p class="s6" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark2">Custom GATT Editor</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The Custom GATT Editor displays the items present in the current configuration file. This includes a Custom GATT Profile, Services, Characteristics, and Descriptors displayed as a hierarchical list. The order of items shown reflects the order in which they exist in the GATT database. When the Settings Editor is open, select an item to see its properties and configuration.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 73pt;text-indent: 0pt;text-align: left;"><span><img width="583" height="317" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_015.jpg"/></span></p><p class="s6" style="padding-top: 6pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 1.4: GATT Custom GATT Editor with Characteristic Selected</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">The * next to the configuration file name indicates unsaved changes in the configuration.</p><p class="s6" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">The Generic Attribute Service is not listed in the Custom GATT database structure (on the left in the previous figure). This is a special service that is maintained by the stack, and can be added by enabling the </span>Generic Attribute Service <span class="p">slider in the settings of the Custom BLE GATT profile. Once enabled, the service will be part of the database. It still will not appear in the Custom GATT database structure, nor on iOS devices as iOS hides this service, but you may see it on Android devices, for example.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 47pt;text-indent: 0pt;text-align: left;"><span><img width="654" height="141" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_016.jpg"/></span></p><p class="s6" style="padding-top: 7pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 1.5. Generic Attribute Service Enabled</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l6"><li><p class="s6" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark3">Contributed Items</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Some services are listed in the configurator as “contributed items”. This means that their content is defined in other components, and they cannot be edited from this view.</p></li></ol></li><li><p class="s6" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark4">Settings Section</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Settings editor allows you to configure the properties of items such as Profiles, Services, Characteristics and Descriptors that are present in the Custom GATT editor. Selecting an item populates the relevant configuration options such as the name, ID, properties and capabilities. Any changes made in this section reflect immediately for the selected item. You can minimize the Custom GATT editor while editing if you want. All Characteristics for a Service are included in the same Settings editor pane.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><span><img width="546" height="309" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_017.jpg"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 19pt;text-indent: 0pt;text-align: center;">Figure 1.6: Settings Editor</p></li><li><p class="s6" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark5">Generating the GATT Database</a></p></li></ol></ol><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Database generation happens automatically when the configuration is saved. The generated source files can be found in the directory named “autogen”.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 168pt;text-indent: 0pt;text-align: left;"><span><img width="333" height="472" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_018.jpg"/></span></p><p class="s6" style="padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 1.7: Generated Files</p></li><li><p class="s5" style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark6">Use Cases</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a name="bookmark7">This chapter describes common tasks performed with the GATT Configurator.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l7"><li><p class="s6" style="padding-left: 51pt;text-indent: -28pt;text-align: left;">Drag and Drop</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">To include predefined items from the source list in your application, drag and drop the item from the Source Section to the Custom GATT section. When you drag and drop a profile or a service, all the Characteristics and Descriptors in the levels underneath get included automatically. Maintaining the hierarchical structure, Descriptors can only be included under Characteristics, which go under Services.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 93pt;text-indent: 0pt;text-align: left;"><span><img width="532" height="315" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_019.png"/></span></p><p class="s6" style="padding-top: 6pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.1: Drag and Drop a Service to Include all the Items</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Within the Custom GATT section, drag and drop can be used to reorder items. This saves the trouble of including and configuring the item again. Similarly, an item can be duplicated and moved around in the section.</p></li><li><p class="s6" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark8">Create New Item</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Use the Add an item (1) menu option to add a new item in the Custom GATT editor. If the profile is selected, a new Service will be created. If a Service is selected, a new Characteristics is created under the selected item. Descriptors can only be created when you have selected a Characteristic.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">When a new item is selected, the Settings section displays the default properties of the item. Here the item can be configured as per the requirements.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 89pt;text-indent: 0pt;text-align: left;"><span><img width="548" height="294" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_020.jpg"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.2: Default Values for a Newly Created Characteristic</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">The application gets local access to the GATT database using the characteristic ID. You can enter this by selecting the checkbox and entering a unique ID.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 70pt;text-indent: 0pt;text-align: left;"><span><img width="593" height="318" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_021.jpg"/></span></p><p class="s6" style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.3: Characteristic ID Enabled</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Upon generation, this ID gets a macro in the <span class="s7">gatt_db.h </span>file as shown below.</p><p class="s8" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">extern const struct <span style=" color: #005031;">bg_gattdb_def </span>bg_gattdb_data;</p><p class="s8" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define gattdb_service_changed_char 3</p><p class="s8" style="padding-left: 23pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#define gattdb_device_name 7</p><p class="s8" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">#define gattdb_ota_control 21</p><p class="s8" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">#define gattdb_custom_characteristic 24</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">UUID or Universally Unique identifier are numbers used to identify Services, Characteristics, and Descriptors uniquely. There are two types of UUID:</p><ol id="l8"><li><p class="s6" style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: justify;">16 bit: <span class="p">These 16-bit UUIDs are predefined by the Bluetooth SIG. Being short they are energy and memory efficient. For example, the Blood Pressure Service has a UUID of 0x1810 whereas the Battery level Characteristic has a UUID of 0x2A19.</span></p></li><li><p class="s6" style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: justify;">128 bit: <span class="p">This overcomes the limitation of running out of 16-bit UUIDs and gives the power to declare your own UUIDs for Custom Services and Characteristics. These randomly generated UUIDs in the GATT Configurator are of version 4 (random) variant 1. You can use any UUID for a custom Service or Characteristic if it does not overlap with Bluetooth base UUID: xxxxxxxx-0000-1000-8000- 00805F9B34FB.</span></p></li></ol><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">While there is no central authority ensuring other devices don’t use the same UUID, there is very little chance (1 in 340 undecillion) that two devices end up with the same UUID.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s6" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark9">Adding Permissions</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Permissions define what actions can be performed for a given Characteristic or Descriptor. For example, in the Blood Pressure Profile, the Blood Pressure Feature has a Mandatory Read property. For more information about access types and security requirements see the Properties section of <i>UG118: Blue Gecko Bluetooth® Profile Toolkit Developer&#39;s Guide</i>.</p><p style="padding-top: 8pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">First the required access types can be enabled with the sliders, and then the security requirements can be selected with the checkboxes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 164pt;text-indent: 0pt;text-align: left;"><span><img width="342" height="160" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_022.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.4: Setting Permission for a Characteristic or Descriptor</p></li><li><p class="s6" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark10">Adding Capabilities</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Bluetooth SDK 2.4 introduced a new feature called Polymorphic GATT that can be used to dynamically show or hide GATT Services and Characteristics. The GATT Configurator implements this feature using GATT capabilities. This section describes how to do it.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">To summarize how capabilities work, each Service/Characteristic can declare several capabilities and the state of the capabilities (ena- ble/disable) determines the visibility of those Services/Characteristics as a bit-wise OR operation. For example, the Service/Characteristic is visible when at least one of its capabilities is enabled and it is not visible when all its capabilities are disabled.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Always start by declaring the GATT-level capabilities and defining their default value. Select the Custom BLE GATT profile, and click the</p><h4 style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">+ <span class="p">control in the &quot;Capability declarations&quot; table. After adding a capability, you can change the name and default value. For example, Appearance, Temperature_Measure and Tx_power are added to the profile as shown in the following figure.</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><span><img width="543" height="294" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_023.jpg"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.5: Declaring GATT-level Capabilities</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Once those capabilities are added, they become available on each of the services and characteristics. They can be declared from the dropdown list in the Settings section, named “Characteristic capabilities”.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">On the Service and Characteristic level declared capabilities count as enabled, and the ones which were not selected are disabled.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 70pt;text-indent: 0pt;text-align: left;"><span><img width="594" height="320" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_024.jpg"/></span></p><p class="s6" style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.6: Including GATT-level Capabilities in a Characteristic</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-left: 59pt;text-indent: -36pt;text-align: left;">Note: <span class="p">The capabilities state should not be changed during a connection, as that can cause misbehavior. The safest way is to change the capabilities when no devices are connected.</span></p></li><li><p class="s6" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark11">Including Services</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In a Service definition, you can add one or more references to other services, using the Service includes feature. Include definitions consist of a single attribute (the include declaration) that contains all the details required for the client to reference the included service.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Included services can help avoid duplicating data in a GATT server. If a service will be referenced by other services, you can use this mechanism to save memory and simplify the layout of the GATT server.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Start by declaring an ID for each service that needs to be included. Services without an ID cannot be referenced. This is done by selecting the ID checkbox and providing an identifier text for the Service. Next, select the Service to be referenced from the dropdown list, named “Service includes”.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><span><img width="544" height="297" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_025.jpg"/></span></p><p class="s6" style="padding-top: 4pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.7: Referencing a Service using Service Includes</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s6" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark12">Import and Export a GATT Database</a></p><p class="s6" style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Import: <span class="p">The Import control in the Custom GATT toolbar allows you to import an existing GATT database, using a .btconf file. Note that this will overwrite the existing GATT data.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 212pt;text-indent: 0pt;text-align: left;"><span><img width="212" height="244" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_026.jpg"/></span></p><p class="s6" style="padding-top: 7pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 2.8: Importing a GATT database</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Export: <span class="p">There is no separate export function. Another project can directly import the GATT database of this project (named gatt_config- uration.btconf)</span></p></li></ol></li><li><p class="s5" style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark13">Dynamic GATT Configuration</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l9"><li><p class="s6" style="padding-top: 10pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark14">Overview</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Silicon Labs Bluetooth SDK v3.2 introduced the ability to create the GATT database dynamically with Bluetooth APIs. These dynamically- created GATT attributes can coexist with a static database generated from a GATT XML file. In this case, the attribute table of the static database is placed at the beginning of the database. When new services and characteristics are created dynamically, they are added into the attribute table after the attributes of the static database.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;"><a name="bookmark15">This feature is recommended for NCP projects. With this method, the target application where the GATT database is located does not need to be modified. Therefore, the database can be built from the host side with the APIs. In other cases, the GATT Configurator is the preferred solution.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s6" style="padding-left: 51pt;text-indent: -28pt;text-align: left;">Usage</p></li></ol></li></ol><p style="padding-top: 7pt;padding-left: 19pt;text-indent: 0pt;text-align: center;">The “Dynamic GATT Database” feature is not included in projects by default. It needs to be installed from the Software Components tab.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 72pt;text-indent: 0pt;text-align: left;"><span><img width="585" height="295" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_027.jpg"/></span></p><p class="s6" style="padding-top: 7pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">Figure 3.1: Installing the Dynamic GATT Database</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Operations on the GATT database are done in a “session”. The changes are saved when a session is finished by “committing” the changes. Unsaved changes are invisible to a connected remote GATT client. The modifications only takes effect when the session is finished.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Each added service and characteristic needs to be started with the appropriate API, or they will not be visible to the connected clients. This start and stop mechanism can be used to have a polymorphic GATT database, as the capability feature is not supported in the dynamic GATT databases.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The following code snippet shows how to add the Health Thermometer Service and the Temperature Measurement characteristic dynam- ically to the database. See the Bluetooth API reference manual section &quot;GATT Database&quot; for more details.</p><p class="s11" style="padding-top: 7pt;padding-left: 33pt;text-indent: 0pt;text-align: left;">//create a session for the database update sl_bt_gattdb_new_session(&amp;session);</p><p class="s11" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">//add the Thermometer service (UUID: 0x1809) to the database, as an advertised primary service sl_bt_gattdb_add_service(session, <i>sl_bt_gattdb_primary_service</i>,</p><p class="s11" style="padding-left: 206pt;text-indent: 0pt;line-height: 10pt;text-align: left;">SL_BT_GATTDB_ADVERTISED_SERVICE,2,uuid_service, &amp;service);</p><p class="s11" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">//add the Temperature measurement (UUID:0x2A1C) characteristic to the service sl_bt_gattdb_add_uuid16_characteristic(session, service, SL_BT_GATTDB_CHARACTERISTIC_INDICATE,</p><p class="s11" style="padding-left: 232pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0, 0, uuid_characteristic, <i>sl_bt_gattdb_fixed_length_value</i>,</p><p class="s11" style="padding-left: 232pt;text-indent: 0pt;line-height: 10pt;text-align: left;">1, 1, 0, &amp;characteristic);</p><p class="s11" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">//activate the new service sl_bt_gattdb_start_service(session, service);</p><p class="s11" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">//activate the new characteristic sl_bt_gattdb_start_characteristic(session, characteristic);</p><p class="s11" style="padding-left: 33pt;text-indent: 0pt;text-align: left;">//save changes and close the database editing session sl_bt_gattdb_commit(session);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 36pt;text-indent: 0pt;text-align: left;">Simplicity Studio</h2><p class="s13" style="padding-top: 14pt;padding-left: 36pt;text-indent: 0pt;line-height: 122%;text-align: left;">One-click access to MCU and wireless tools, documentation, software, source code libraries &amp; more. Available for Windows, Mac and Linux!</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="768" height="432" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_028.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:63.94pt" cellspacing="0"><tr style="height:99pt"><td style="width:98pt" bgcolor="#231F20"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><span><img width="66" height="66" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_029.png"/></span></p><p style="padding-top: 10pt;padding-left: 1pt;padding-right: 19pt;text-indent: 0pt;text-align: center;"><a href="https://www.silabs.com/solutions/iot" class="s14">IoT Portfolio</a></p><p style="padding-top: 1pt;padding-left: 1pt;padding-right: 19pt;text-indent: 0pt;line-height: 8pt;text-align: center;"><a href="http://www.silabs.com/IoT" class="s15">www.silabs.com/IoT</a></p></td><td style="width:126pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;text-align: center;"><a href="https://www.silabs.com/simplicity" class="s14">SW/HW</a></p><p style="padding-top: 1pt;padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;line-height: 8pt;text-align: center;"><a href="http://www.silabs.com/simplicity" class="s15">www.silabs.com/simplicity</a></p></td><td style="width:126pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;text-align: center;"><a href="https://www.silabs.com/about-us/corporate-responsibility/commitment-to-quality" class="s14">Quality</a></p><p style="padding-top: 1pt;padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;line-height: 8pt;text-align: center;"><a href="http://www.silabs.com/quality" class="s15">www.silabs.com/quality</a></p></td><td style="width:126pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 12pt;text-indent: 0pt;text-align: left;"><a href="https://www.silabs.com/community" class="s14" target="_blank">Support &amp; Community</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 8pt;text-align: left;"><a href="http://www.silabs.com/community" class="s15">www.silabs.com/community</a></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="131" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_030.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="131" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_031.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="131" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_032.png"/></span></p><p class="s16" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s17" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software imple- menters using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each <span class="s18">specific device, and “Typical” parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes without further notice to the product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included information. Without prior notification, Silicon Labs may update product firmware during the manufacturing process for security or reliability reasons. Such changes will not alter the specifications or the performance of the product. Silicon Labs shall have no liability for the consequences of use of the infor</span>- mation supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or <span class="s18">authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required or Life Support Systems without the specific written consent of Silicon Labs. A “Life Support System” is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used </span>in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims <span class="s18">all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications. </span><b>Note: This content may contain offensive terminology that is now obsolete. Silicon Labs is replacing these terms with inclusive language wherever possible. For more </b><span class="s20">information, visit </span><a href="https://www.silabs.com/about-us/inclusive-lexicon-project" class="a" target="_blank">www.s</a><a href="https://www.silabs.com/about-us/inclusive-lexicon-project" target="_blank">ilabs.com/about-us/inclusive-lexicon-project</a></p><p class="s20" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Trademark Information</p><p class="s22" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 117%;text-align: justify;"><span class="s17">Silicon Laboratories Inc.</span>®<span class="s17">, Silicon Laboratories</span>®<span class="s17">, Silicon Labs</span>®<span class="s17">, SiLabs</span>® <span class="s17">and the Silicon Labs logo</span>®<span class="s17">, Bluegiga</span>®<span class="s17">, Bluegiga Logo</span>®<span class="s17">, Clockbuilder</span>®<span class="s17">, CMEMS</span>®<span class="s17">, DSPLL</span>®<span class="s17">, EFM</span>®<span class="s17">, EFM32</span>®<span class="s17">, EFR, Ember</span>®<span class="s18">, Energy Micro, Energy Micro logo and combinations thereof, “the world’s most energy friendly microcontrollers”, Ember</span>®<span class="s17">, EZLink</span>®<span class="s17">, EZRadio</span>®<span class="s17">, EZRadioPRO</span>®<span class="s17">, Gecko</span>®<span class="s17">, Gecko OS, Gecko OS Studio, ISOmodem</span>®<span class="s17">, Precision32</span>®<span class="s17">, ProSLIC</span>®<span class="s17">, Simplicity Studio</span>®<span class="s17">, SiPHY</span>®<span class="s17">, Telegesis, the Telegesis Logo</span>®<span class="s17">, USBXpress</span>® <span class="s17">, Zentri, the Zentri logo and Zentri DMS, Z-Wave</span>®<span class="s17">, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Hold- ings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="148" height="73" alt="image" src="ug438-gatt-configurator-users-guide-sdk-v3x/Image_033.png"/></span></p><p class="s20" style="padding-top: 5pt;padding-left: 149pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s20" style="padding-left: 149pt;text-indent: 0pt;line-height: 8pt;text-align: left;">USA</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;text-align: left;"><h3 href="http://www.silabs.com/">www.silabs.com</h3></p></body></html>
