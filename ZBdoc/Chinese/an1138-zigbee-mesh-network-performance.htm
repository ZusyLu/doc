<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AN1138: Zigbee Mesh Network Performance</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .a, a { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s3 { color: #D81E2A; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s5 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s6 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s7 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8.5pt; }
 .s8 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; vertical-align: 3pt; }
 .s9 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .s10 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s11 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; }
 .s12 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s13 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 2.5pt; }
 .s14 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s15 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3pt; }
 .s16 { color: #595959; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s17 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s18 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s19 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 5.5pt; }
 .s20 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s21 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; }
 .s22 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s23 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 4.5pt; }
 .s24 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6.5pt; }
 .s25 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 h4 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s26 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; }
 .s27 { color: #FFF; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s28 { color: #FFF; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s29 { color: #231F20; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s30 { color: #231F20; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 h2 { color: #D91F2A; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt;counter-reset: d2 1; }
 #l3> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l4 {padding-left: 0pt; }
 #l4> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l5 {padding-left: 0pt;counter-reset: d2 1; }
 #l5> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l6 {padding-left: 0pt;counter-reset: d2 1; }
 #l6> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l8 {padding-left: 0pt;counter-reset: d2 1; }
 #l8> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l9 {padding-left: 0pt;counter-reset: d3 1; }
 #l9> li>*:first-child:before {counter-increment: d3; content: counter(d3, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l9> li:first-child>*:first-child:before {counter-increment: d3 0;  }
 #l10 {padding-left: 0pt; }
 #l10> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l11 {padding-left: 0pt; }
 #l11> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l12 {padding-left: 0pt;counter-reset: i1 4; }
 #l12> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l12> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l13 {padding-left: 0pt;counter-reset: i2 2; }
 #l13> li>*:first-child:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l13> li:first-child>*:first-child:before {counter-increment: i2 0;  }
 #l14 {padding-left: 0pt;counter-reset: i3 1; }
 #l14> li>*:first-child:before {counter-increment: i3; content: counter(i1, decimal)"."counter(i2, decimal)"."counter(i3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l14> li:first-child>*:first-child:before {counter-increment: i3 0;  }
 #l15 {padding-left: 0pt; }
 #l15> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l16 {padding-left: 0pt; }
 #l16> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l17 {padding-left: 0pt;counter-reset: d2 1; }
 #l17> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l17> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l18 {padding-left: 0pt;counter-reset: d3 1; }
 #l18> li>*:first-child:before {counter-increment: d3; content: counter(d3, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l18> li:first-child>*:first-child:before {counter-increment: d3 0;  }
 li {display: block; }
 #l19 {padding-left: 0pt; }
 #l19> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="126" height="62" alt="image" src="an1138-zigbee-mesh-network-performance/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">AN1138: Zigbee Mesh Network Performance</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="209" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s1" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="210" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s2" style="padding-top: 4pt;padding-left: 17pt;text-indent: -7pt;text-align: justify;">Wireless test network in Silicon Labs Research and Development (R&amp;D) is described.</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Wireless conditions and environments are evaluated.</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Mesh network performance including throughput, latency, and large network scalability is presented.</p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">This application note details methods for testing Zigbee mesh network performance. With an increasing number of mesh networks available in today’s wireless market, it is important for designers to understand the different use cases among these networks and their expected performances. When selecting a network or device, designers need to know the network’s performance and behavior characteristics, such as battery life, network throughput and latency, and the impact of network size on scalability and relia- bility.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This application note demonstrates how the Zigbee mesh network differs in perform- ance and behavior from other mesh networks. Tests were conducted using Silicon Labs’ Zigbee Mesh software stacks and the Wireless Gecko SoC platform capable of running Zigbee Mesh and Proprietary protocols. The test environment was a commer- cial office building with active Wi-Fi and Zigbee networks in range. Wireless test clus- ters were deployed in hallways, meeting rooms, offices, and open areas. The method- ology for performing the benchmarking tests is defined so that others may run the same tests. These results are intended to provide guidance on design practices and principles as well as expected field performance results.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a href="http://www.silabs.com/mesh-performance" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;" target="_blank">Additional performance benchmarking information for other technologies is available at </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">http://www.silabs.com/mesh-performance</span>.</p><p class="s3" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Introduction and Background</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1138-zigbee-mesh-network-performance/Image_005.png"/></span></p><ol id="l2"><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark0">Introduction and Background</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Silicon Labs provides performance testing results from embedded mesh networks as part of developer conferences and industry white papers. The basic performance data of throughput, latency, and impact of security can be used by system designers to define expected behavior. Testing was done across our different mesh network technologies – Zigbee, Thread, and Bluetooth - and each are presented separately. This application note presents the Zigbee network performance.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l3"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark1">Underlying Physical Layer and Packet Structure</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Network performance is based on payload sizing since the application usage does not account for the packet overhead.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Zigbee uses IEEE 802.15.4 2006 with 127-byte packets and an underlying data rate of 250 kbps. The Zigbee packet format is shown below and results in a 68-byte payload. For payloads above 68 bytes, Zigbee fragments into multiple packets. Our data on performance is based on payload size as this is the design parameter of concern when building an application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 82pt;text-indent: 0pt;text-align: left;"><span><img width="562" height="192" alt="image" src="an1138-zigbee-mesh-network-performance/Image_006.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 1.1.  Zigbee Packet Format</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark2">Network Routing Differences</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Zigbee was designed for home and building automation. Zigbee supports several routing techniques including flooding of the mesh for route discovery or group messages, next hop routing for controlled messages in the mesh, and many-to-one routing to a gateway which then uses source routing out to devices. It is normal for a Zigbee network to use these methods at the same time.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Networks fragment larger messages into smaller ones. For Zigbee, fragmentation is done at the application layer and is end-to-end from the source to the destination.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">For unicast forwarding within these networks, the message is forwarded as soon as the device is ready to send. For multicast forward- ing, there are generally networking requirements for how messages are forwarded. For Zigbee devices, a multicast message is forwar- ded by a device only after a jitter of up to 64 milliseconds. However, the initiating device has a gap of 500 milliseconds before retrans- mitting the initial message.</p><p class="s4" style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">This performance data is for the Silicon Labs implementation of these mesh networking stacks. As is shown in the test network and infrastructure provided for this testing, no tests were performed with other stacks or systems.</span></p><p class="s3" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Goals and Methods</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1138-zigbee-mesh-network-performance/Image_007.png"/></span></p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: justify;"><a name="bookmark3">Goals and Methods</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">This application note defines a set of tests performed to evaluate mesh network performance, scalability, and reliability. The test condi- tions and infrastructure are described, in addition to the message latency and reliability. This testing is conducted over actual wireless devices in test networks and not in simulation.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">This testing is done to provide a relative comparison between the different mesh technologies to better understand and recommend their usage. Different network and system designs have different requirements for devices and networks. As such, no one network ful- fills all possible network requirements. However, the three mesh networking technologies we are comparing are all aimed at low power and battery-operated mesh networks used for control and monitoring in the home and commercial buildings.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Normally, when analyzing data on network performance, we then consider what improvements can be made in the network to improve performance. Because of the limited data available publicly on mesh network performance in large networks today, it is difficult to have industry discussions on possible improvements or changes. For example, in commercial buildings there is concern over:</p><ul id="l4"><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Other network traffic, since there may be many subnets that interfere with each other.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Wi-Fi interference from the normal building Wi-Fi infrastructure as these technologies are generally operating in the 2.4 GHz ISM band.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Network throughput and latency as well as large network multicast latency and reliability, since multicasts are commonly used for lighting controls in dense office environments and users of the system expect responsiveness in lighting controls.</p></li></ul><p class="s4" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">The test results here are limited to comparisons of system performance under normal operating conditions, or under stress as noted in particular tests. This application note does not specifically address system interference or other such effects that have been addressed in other published results. However, testing is done in our Silicon Labs R&amp;D facility where there are more than 100 Wi-Fi access points within RF range. The facility also has a 300-node Zigbee lighting network that is not part of this testing but is used for normal lighting control.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l5"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: justify;"><a name="bookmark4">Review of Other Performance Testing</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">There are no specific, defined methods for evaluating and reporting large network reliability, scalability, or latency. Silicon Labs has published papers in the past comparing network performances based on network testing. This testing is focused on device behavior and impact on battery life, and network throughput and latency. Large scale multicast testing also requires capturing accurate timing and reliability information from large distributed networks. All testing was conducted using the Silicon Labs’ Wireless Gecko SoC plat- form capable of running Zigbee, Thread, Bluetooth Mesh and Proprietary RF protocols to eliminate the device itself as a difference in the testing. Previously published results showed differences between transceivers, network co-processors and System-on-Chip de- signs. These tests all use System-on-Chip designs.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Other papers published on performance include a master’s thesis paper on Zigbee network performance, &quot;Performance Evaluation of Zigbee Network for Embedded Electricity Meters”, by Kui Liu, which was published by the Department of Electrical Engineering at the Royal Institute of Technology in Sweden. For round trip time in open-air within a single hop, they tested at different ranges with the following results:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 121pt;text-indent: 0pt;text-align: center;">Table 2.1.  Packet Loss for Distance and Average Round Trip</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 71pt;text-indent: 0pt;text-align: left;">Distance</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 45pt;padding-right: 45pt;text-indent: 0pt;text-align: center;">Average Round Trip</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s5" style="padding-top: 3pt;padding-left: 45pt;padding-right: 45pt;text-indent: 0pt;text-align: center;">Packet Loss</p></td></tr><tr style="height:19pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 69pt;text-indent: 0pt;text-align: left;">20 meters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">18.0 milliseconds</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 45pt;padding-right: 45pt;text-indent: 0pt;text-align: center;">0%</p></td></tr><tr style="height:19pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 69pt;text-indent: 0pt;text-align: left;">50 meters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">17.9 milliseconds</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 45pt;padding-right: 45pt;text-indent: 0pt;text-align: center;">0%</p></td></tr><tr style="height:19pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 69pt;text-indent: 0pt;text-align: left;">75 meters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">17.9 milliseconds</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 45pt;padding-right: 45pt;text-indent: 0pt;text-align: center;">0.75%</p></td></tr><tr style="height:19pt"><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 69pt;text-indent: 0pt;text-align: left;">85 meters</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">18.6 milliseconds</p></td><td style="width:180pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s6" style="padding-top: 3pt;padding-left: 45pt;padding-right: 45pt;text-indent: 0pt;text-align: center;">1.65%</p></td></tr></table><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">This test was for 50 bytes of payload unicast at a 100-millisecond interval with security off. Note that Zigbee does not allow security to be turned off. The results show a 1 hop test consistently takes ~18 milliseconds round trip time. This testing was repeated indoors with various interference conditions, but the round trip time for 1 hop did not vary much from the 18 milliseconds. Multi-hop test results were not presented.</p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark5">Test Network and Conditions</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">To minimize variability, device testing can also be performed in fixed topologies where the RF paths are wired together through splitters and attenuators to ensure the topology does not change over time and testing. This method is used for 7-hop testing to ensure network topology. MAC filtering can also be used to achieve the network topology.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">A typical wired test configuration is shown below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 117pt;text-indent: 0pt;text-align: left;"><span><img width="471" height="243" alt="image" src="an1138-zigbee-mesh-network-performance/Image_008.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 3.1.  Wired RF devices in drawer with splitter and coax cable connectivity</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">Large network testing is best conducted in an open-air environment where device behavior is based on the existing and varying RF conditions. The Silicon Labs R&amp;D facility is used for this open-air testing.</p><ol id="l6"><li><p class="s4" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark6">Facility and Test Network Conditions</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Silicon Labs R&amp;D facility consists of a central core with an elevator shaft, other services with an open floor plan on the west end of the building, and offices and conference rooms on the east end. The overall facility measures approximately 120 feet by 200 feet. The image below shows the facility layout. The darker lines represent hard walls and everything else is split up with cube partitions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 82pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="350" alt="image" src="an1138-zigbee-mesh-network-performance/Image_009.gif"/></span></p><p class="s4" style="padding-top: 5pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 3.2.  Silicon Labs facility layout used for wireless testing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The testing devices are installed at various locations around the facility. These devices all have Ethernet backchannel connectivity to allow:</p><ul id="l7"><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Firmware updates</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Command line interface</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Scripting</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Timing analysis</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Packet capture</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Energy measurements</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The testing cluster in the following figure includes:</p></li><li><p style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Six EFR32MGxx Devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Multi-band support to allow testing both 2.4 GHz (PCB antenna) and proprietary sub-GHz protocols (external antenna)</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">USB power and Ethernet connectivity</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 202pt;text-indent: 0pt;text-align: left;"><span><img width="240" height="320" alt="image" src="an1138-zigbee-mesh-network-performance/Image_010.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 3.3.  Typical Testing Cluster</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The testing clusters are spread throughout the facility in both high and low locations, open areas, and enclosed meeting rooms and offices.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 135pt;text-indent: 0pt;text-align: left;"><span><img width="437" height="482" alt="image" src="an1138-zigbee-mesh-network-performance/Image_011.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 4pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 3.4.  Testing Clusters in the Silicon Labs R&amp;D Facility</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">This test network has devices added or removed from it on a regular basis, but at the time of this testing it consisted of the following devices:</p></li><li><p style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">EM35xx devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">EFR32MGxx </span>devices</p></li></ul><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">This network represented devices that were used for open-air testing by the networking and software quality assurance teams. All devi- ces are controlled from a central test server and infrastructure, which allows scripted regression testing or manual testing by engineers.</p></li><li><p class="s4" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark7">Wireless Conditions in the Facility</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Silicon Labs R&amp;D facility has a full Zigbee lighting control system including motion and lighting sensors and switches. This is not part of the test network and is used as a normal building control system independent of any testing being run.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Silicon Labs R&amp;D facility is also downtown and, in addition to our existing Wi-Fi infrastructure, there are over 100 Wi-Fi access points within RF distance of the facility. The following charts were taken as a snapshot of a normal work day Wi-Fi scan. This is consid- ered the normal Wi-Fi background traffic.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 29pt;text-indent: 0pt;text-align: left;"><span><img width="694" height="180" alt="image" src="an1138-zigbee-mesh-network-performance/Image_012.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 33pt;text-indent: 0pt;text-align: left;"><span><img width="694" height="180" alt="image" src="an1138-zigbee-mesh-network-performance/Image_013.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 27pt;text-indent: 0pt;text-align: left;"><span><img width="710" height="174" alt="image" src="an1138-zigbee-mesh-network-performance/Image_014.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 3.5.  Wi-Fi Scans on a Normal Day</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">These Wi-Fi scans were taken at the southeast corner office, the west side, and the north side in the main conference room, respective- ly. These locations showed 62, 104, and 83 Wi-Fi access points within RF range.</p></li><li><p class="s4" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark8">Typical Test Network</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Within the test network, a given test can be selected and used for a given set of devices. The network is established and devices joined using the Ethernet backchannel to send commands to devices. A typical network during testing is shown below. The black and grey lines show the router connectivity and strength.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 72pt;text-indent: 0pt;text-align: left;"><span><img width="588" height="399" alt="image" src="an1138-zigbee-mesh-network-performance/Image_015.jpg"/></span></p><p class="s4" style="padding-top: 8pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 3.6.  A Typical Network During Testing</p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark9">Testing and Results</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l8"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark10">Throughput and Latency</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The throughput and latency is tested in a controlled network (wired configuration) to test each hop against different packet payloads.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The normal configuration is to test to 6 hops. Testing is done with one source node and a series of routing nodes to allow the number of hops to be varied.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_016.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_017.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_018.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_019.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_020.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_022.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="29" height="43" alt="image" src="an1138-zigbee-mesh-network-performance/Image_023.png"/></span></p><p class="s7" style="padding-left: 159pt;text-indent: -2pt;text-align: left;">Source Node</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 224pt;text-indent: 0pt;text-align: left;"><span><img width="313" height="21" alt="image" src="an1138-zigbee-mesh-network-performance/Image_024.png"/></span></p><p class="s7" style="padding-top: 8pt;padding-left: 322pt;text-indent: 0pt;text-align: center;">Destination Nodes</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">This testing is done using the following configuration:</p><ol id="l9"><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Zigbee application layer messages</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Packet payload from 50 bytes to up to 300 bytes in 50 byte increments for the latency test</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Testing is done with security on</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">From 1 to 6 hops</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Using 2 packets in flight (3<span class="s8">rd </span>send when ack received from 1<span class="s8">st</span>…)</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Sending as fast as possible given ack timing</p></li><li><p style="padding-top: 3pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Measuring round trip latency (source to destination to source) in milliseconds</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">For each of these different mesh networks, packet fragmentation occurs differently as we increase payload size as noted above. The use of larger packet sizes is up to the application layer, but we provide comparison data here to indicate relative performance as frag- mentation occurs.</p><p class="s4" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;"><a name="bookmark11">4.1.1 Zigbee Multi-hop Latency</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;"><span><img width="498" height="361" alt="image" src="an1138-zigbee-mesh-network-performance/Image_025.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 4.1.  Zigbee Round Trip Latency by Packet Size</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Several items are worth noting in this multi-hop latency test as follows:</p><ul id="l10"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">For 1 hop payload out to 250 bytes, we see very low latency (60 milliseconds).</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">With 50 bytes of payload (contained within 1 packet), Zigbee maintains the latency below 140 milliseconds out to 6 hops.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Latency remains below 200 milliseconds except when the payload gets over 150 bytes and the number of hops is more than 5.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s4" style="padding-top: 5pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark12">Network Tests versus Network Size</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Open-air large network testing is required to validate stack performance under less controlled conditions. These networks are config- ured within normal Silicon Labs office space with normal Wi-Fi interference, other network operations, and building control systems. No attempt is made to isolate these network RF conditions.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The networks to be tested for each stack include:</p><ul id="l11"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Small network: 24 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Medium network: 1 – 48 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Medium network: 2 – 96 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Large network: 1 – 144 devices</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">Large network: 2 – 192 devices</p></li></ul><p class="s4" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">For any of these tests, the specific number of devices is acceptable within +/- 10% of these test network targets for a given set of testing. Testing in this large network is done in SoC mode for devices.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">These networks are all configured as powered devices unless there is specific testing for sleeping end devices.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">For each of these networks, the testing will validate reliability and latency for a set of traffic conditions. Testing is intended to be done over 100 messages, but longer runs with 10000 messages for reliability are also done. The same devices were used across the tests to keep the topology and density of the different test runs similar. The actual over-the-air conditions will vary and cannot be controlled in these tests.</p><ol id="l12"><ol id="l13"><ol id="l14"><li><p class="s4" style="padding-top: 8pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark13">Zigbee Large Network Testing Results</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="287" height="16" alt="image" src="an1138-zigbee-mesh-network-performance/Image_026.png"/></span></p><p class="s9" style="padding-top: 4pt;padding-left: 137pt;text-indent: 4pt;text-align: center;">Zigbee 5-byte Multicast Latency versus Network Size</p><p class="s10" style="padding-top: 2pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">45.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">35.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">25.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">15.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">5.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-top: 5pt;padding-left: 20pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 167pt;text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p class="s10" style="padding-top: 7pt;padding-left: 167pt;text-indent: 0pt;text-align: left;">24 48 96 144 192</p><p style="text-indent: 0pt;text-align: left;"/><p class="s9" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Zigbee testing was done with the latest version of the Zigbee stack. Zigbee network testing was done with 5, 25, and 50-byte payloads with a normal broadcast transmission interval of 3 seconds. The histograms of results are shown below.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="433" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_027.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;text-align: left;"><span><img width="436" height="237" alt="image" src="an1138-zigbee-mesh-network-performance/Image_028.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 150pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><span><img width="8" height="8" alt="image" src="an1138-zigbee-mesh-network-performance/Image_029.png"/></span><span class="s11"> </span><span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_030.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_031.png"/></span> <span><img width="8" height="8" alt="image" src="an1138-zigbee-mesh-network-performance/Image_032.png"/></span> <span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_033.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_034.png"/></span><span class="s11"> </span><span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_035.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_036.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 269pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_037.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_038.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_039.png"/></span>	<span><img width="5" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_040.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_041.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 4.2.  Zigbee Network Testing with 5-byte Payload</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="433" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_042.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="433" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_043.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;text-align: left;"><span><img width="436" height="219" alt="image" src="an1138-zigbee-mesh-network-performance/Image_044.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 150pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><span><img width="8" height="8" alt="image" src="an1138-zigbee-mesh-network-performance/Image_045.png"/></span><span class="s14"> </span><span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_046.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_047.png"/></span> <span><img width="8" height="8" alt="image" src="an1138-zigbee-mesh-network-performance/Image_048.png"/></span> <span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_049.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_050.png"/></span><span class="s11"> </span><span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_051.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_052.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 264pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_053.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_054.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_055.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_056.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_057.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="287" height="16" alt="image" src="an1138-zigbee-mesh-network-performance/Image_058.png"/></span></p><p class="s9" style="padding-top: 4pt;padding-left: 137pt;text-indent: 3pt;text-align: center;">Zigbee 25-byte Multicast Latency versus Network Size</p><p class="s10" style="padding-top: 2pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">35.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">25.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">15.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">5.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 161pt;text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p class="s10" style="padding-top: 4pt;padding-left: 163pt;text-indent: 0pt;text-align: left;">24 48 96 144 192</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 4.3.  Zigbee Network Testing with 25-byte Payload</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="433" height="1" alt="image" src="an1138-zigbee-mesh-network-performance/Image_059.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;text-align: left;"><span><img width="436" height="224" alt="image" src="an1138-zigbee-mesh-network-performance/Image_060.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 150pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><span><img width="8" height="8" alt="image" src="an1138-zigbee-mesh-network-performance/Image_061.png"/></span><span class="s11"> </span><span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_062.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_063.png"/></span> <span><img width="8" height="8" alt="image" src="an1138-zigbee-mesh-network-performance/Image_064.png"/></span> <span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_065.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_066.png"/></span> <span><img width="9" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_067.png"/></span> <span><img width="8" height="9" alt="image" src="an1138-zigbee-mesh-network-performance/Image_068.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-left: 268pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_069.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_070.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_071.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_072.png"/></span>	<span><img width="4" height="4" alt="image" src="an1138-zigbee-mesh-network-performance/Image_073.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="288" height="16" alt="image" src="an1138-zigbee-mesh-network-performance/Image_074.png"/></span></p><p class="s9" style="padding-top: 4pt;padding-left: 137pt;text-indent: 4pt;text-align: center;">Zigbee 50-byte Multicast Latency versus Network Size</p><p class="s16" style="padding-top: 2pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">70.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">60.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">50.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">40.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">30.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 167pt;text-indent: 0pt;text-align: left;">Latency (milliseconds)</p><p class="s10" style="padding-top: 7pt;padding-left: 166pt;text-indent: 0pt;text-align: left;">24 48 96 144 192</p><p style="text-indent: 0pt;text-align: left;"/><p class="s9" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 4.4.  Zigbee Network Testing with 50-byte Payload</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">The following should be noted from this testing:</p><ul id="l15"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">As packet payload increases, latency to the devices increases. This is expected and normal behavior as it takes more time to trans- mit larger packets.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">We see 100% reliability in all of these tests. Note these are 100 broadcasts tests. Larger tests to better measure reliability are avail- able for tests below 100 broadcasts.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">As the network size grows, we see an increase and spreading out of latency as it takes multiple hops to deliver all the messages. Larger networks also have more contention over the air as all devices are trying to repeat the message.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">This testing was also conducted with 3 seconds between broadcasts, giving the network some time to recover before sending the next message. Separate testing is shown below on what happens when the interval between broadcasts is decreased.</p></li></ul></li><li><p class="s4" style="padding-top: 8pt;padding-left: 49pt;text-indent: -25pt;text-align: left;"><a name="bookmark14">Zigbee Network Testing with Shorter Interval</a></p></li></ol></ol></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">It is a known issue that the use of broadcasts in 15.4 networks should be minimized as they can cause temporary flooding of the net- work. Zigbee networks have a broadcast transaction record to prevent broadcasts from being processed that have already been forwar- ded by the device. This broadcast table must contain a minimum of 9 entries and they are aged out after 9 seconds, meaning on aver- age only 1 broadcast per second is supported in the network. As the above testing was done with 3 seconds between broadcasts, addi- tional testing was done with 2 second and 1 second intervals to show the impact versus network size.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="448" height="246" alt="image" src="an1138-zigbee-mesh-network-performance/Image_075.png"/></span></p><p class="s17" style="padding-top: 4pt;padding-left: 89pt;text-indent: 0pt;text-align: center;">Zigbee Broadcast Latency – 25-byte Payload, 2 Sec Interval</p><p class="s18" style="padding-top: 1pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">40%  <span class="s19">                                                                                                                                                                                                                                                     </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 4pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">35%  <span class="s19">                                                                                                                                                                                                                                                     </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-top: 4pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">30%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">25%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">20%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">15%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">10%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">5%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s18" style="padding-left: 18pt;text-indent: 0pt;line-height: 6pt;text-align: left;">0%</p><p class="s18" style="padding-left: 89pt;text-indent: 0pt;line-height: 6pt;text-align: center;">10 20 30 40 50 60 70 80 90 100 110 120 130 140 150 160 170 180 190 200 210 220 230 240 More</p><p class="s17" style="padding-top: 2pt;padding-left: 71pt;text-indent: 0pt;text-align: center;">Latency (milliseconds)</p><p class="s18" style="padding-top: 2pt;padding-left: 82pt;text-indent: 0pt;text-align: center;">24  48  96  144  192  24  48   96   144   196 Nodes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s17" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The following charts show the latency for a 25-byte payload using 2 second and 1 second intervals between broadcasts.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 234pt;text-indent: 0pt;line-height: 3pt;text-align: left;"><span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_076.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_077.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_078.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_079.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_080.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_081.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_082.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_083.png"/></span>	<span><img width="4" height="3" alt="image" src="an1138-zigbee-mesh-network-performance/Image_084.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">Percent Received</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-top: 4pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 4.5.  Zigbee Broadcast Latency - 25-byte Payload, 2 Sec Interval</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 262pt;text-indent: 0pt;line-height: 4pt;text-align: left;"><span><img width="5" height="5" alt="image" src="an1138-zigbee-mesh-network-performance/Image_085.png"/></span>	<span><img width="5" height="5" alt="image" src="an1138-zigbee-mesh-network-performance/Image_086.png"/></span>	<span><img width="6" height="5" alt="image" src="an1138-zigbee-mesh-network-performance/Image_087.png"/></span>	<span><img width="6" height="5" alt="image" src="an1138-zigbee-mesh-network-performance/Image_088.png"/></span>	<span><img width="5" height="5" alt="image" src="an1138-zigbee-mesh-network-performance/Image_089.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="391" height="189" alt="image" src="an1138-zigbee-mesh-network-performance/Image_090.png"/></span></p><p class="s7" style="padding-top: 5pt;padding-left: 90pt;text-indent: 0pt;text-align: center;">Zigbee Broadcast Latency - 25-byte Payload, 1 Sec Interval</p><p class="s22" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">25.00%              <span class="s23">                                                                                                                                                                                                                                                                     </span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">20.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">15.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">10.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">5.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">0.00%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s20" style="padding-left: 90pt;text-indent: 0pt;text-align: center;">Latency (milliseconds)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-left: 158pt;text-indent: 0pt;text-align: left;">24 48 96 144 196</p><p style="text-indent: 0pt;text-align: left;"/><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">10</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">20</p><p style="text-indent: 0pt;text-align: left;"/><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">30</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">40</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">50</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">60</p><p style="text-indent: 0pt;text-align: left;"/><p class="s25" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">70</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">80</p><p class="s25" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">90</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">100</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">110</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">120</p><p class="s25" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">130</p><p style="text-indent: 0pt;text-align: left;"/><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">140</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">150</p><p class="s25" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">160</p><p class="s25" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">170</p><p style="text-indent: 0pt;text-align: left;"/><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">180</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">190</p><p class="s25" style="padding-top: 5pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">200</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">210</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">220</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">230</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">240</p><p style="text-indent: 0pt;text-align: left;"/><p class="s25" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">More</p><p style="text-indent: 0pt;text-align: left;"/><p class="s4" style="padding-left: 121pt;text-indent: 0pt;text-align: center;">Figure 4.6.  Zigbee Broadcast Latency - 25-byte Payload, 1 Sec Interval</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">From this reduction in broadcast intervals, we see the following:</p><ul id="l16"><li><p style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">We still observe 100% reliability in these tests. These tests are 100 sample tests and are not extended tests for reliability.</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">There is little difference between the original 3 second and 2 second intervals. Both operate reasonably well across different network sizes and the average latency in the plots centers around 70-80 milliseconds.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">When the broadcast interval gets down to 1 second, we see quite a bit more of the traffic heading into larger than 250 millisecond latency indicating the network is getting congested. This supports why Zigbee originally sets the broadcast table size and timeout to average 1 broadcast per second. The average packet is still getting through in a similar time, but there are some that are delayed. The large network extended testing in the following section shows this result in more detail.</p></li></ul><p class="s3" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Summary</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an1138-zigbee-mesh-network-performance/Image_091.png"/></span></p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark15">Summary</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: justify;">Zigbee shows excellent reliability and latency below the 200-millisecond timing typically required for human interaction with devices. The Zigbee networks are well behaved up through the 192 node networks we have tested, unless the broadcast frequency is pushed too high and then Zigbee shows increased latency.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">As networks scale up, the added hops and broadcast congestion result in some increased latency. As packet payload increases, the latency across the network also increases, but this is a smaller impact when testing 5, 25, and 50 bytes of payload. When the broadcast interval is lowered to 1 second, there is an increase in maximum latency that may be undesirable for some applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l17"><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark16">Follow-up Testing Considerations</a></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">The testing described in this application note requires follow-up tests to further define the device behavior and network operations. The following specific items are noted for follow-up testing:</p><ol id="l18"><li><p style="padding-top: 2pt;padding-left: 42pt;text-indent: -8pt;text-align: left;">Failure testing can also be added by dropping nodes out of this network during these tests to evaluate recovery time and impact on reliability.</p></li><li><p style="padding-top: 2pt;padding-left: 41pt;text-indent: -8pt;text-align: left;">Testing should be performed with different device types running in System-on-Chip and Network Co-Processor (NCP) modes. Pre- vious testing has revealed some differences between these modes of operation, so this should be further characterized.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s4" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark17">Related Literature</a></p></li></ol></li></ol><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">This application note has provided information on Zigbee mesh networking. For information on Zigbee and Thread mesh networking, and a comparison of all three technologies, refer to the following application notes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l19"><li><p style="padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/login/application-notes/an1137-bluetooth-mesh-network-performance.pdf" class="a" target="_blank">AN1137: Bluetooth Network </a><a href="https://www.silabs.com/documents/login/application-notes/an1137-bluetooth-mesh-network-performance.pdf" target="_blank">Performance</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/login/application-notes/an1141-thread-mesh-network-performance.pdf" class="a" target="_blank">AN1141: Thread Mesh Network </a><a href="https://www.silabs.com/documents/login/application-notes/an1141-thread-mesh-network-performance.pdf" target="_blank">Performance</a></p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;"><a href="https://www.silabs.com/documents/login/application-notes/an1142-mesh-network-performance-comparison.pdf" class="a" target="_blank">AN1142: Mesh Network Performance </a><a href="https://www.silabs.com/documents/login/application-notes/an1142-mesh-network-performance-comparison.pdf" target="_blank">Comparison</a></p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Smart. Connected. Energy-Friendly.</h4><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s26" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Products</p><p style="text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/products" class="s27">www.silabs.com/products</a></p><p class="s26" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Quality</p><p style="text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/quality" class="s27">www.silabs.com/quality</a></p><p class="s26" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Support and Community</p><p class="s28" style="text-indent: 0pt;text-align: center;">community.silabs.com</p><p style="padding-left: 64pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">		</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="767" height="695" alt="image" src="an1138-zigbee-mesh-network-performance/Image_092.png"/></span></p><p class="s29" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s30" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each specific device, and &quot;Typical&quot; parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes without further notice to the product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included information. Without prior notification, Silicon Labs may update product firmware during the manufacturing process for security or reliability reasons. Such changes will not alter the specifications or the performance of the product. Silicon Labs shall have no liability for the consequences of use of the information supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required, or Life Support Systems without the specific written consent of Silicon Labs. A &quot;Life Support System&quot; is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s29" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Trademark Information</p><p class="s30" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Silicon Laboratories Inc.®, Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, ClockBuilder®, CMEMS®, DSPLL®, EFM®, EFM32®, EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, &quot;the world’s most energy friendly microcontrollers&quot;, Ember®, EZLink®, EZRadio®, EZRadioPRO®, Gecko®, Gecko OS, Gecko OS Studio, ISOmodem®, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress® , Zentri, the Zentri logo and Zentri DMS, Z- Wave®, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="152" height="75" alt="image" src="an1138-zigbee-mesh-network-performance/Image_093.png"/></span></p><p class="s29" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s29" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">USA</p><p style="padding-top: 5pt;padding-left: 168pt;text-indent: 0pt;text-align: left;"><h2 href="http://www.silabs.com/">http://www.silabs.com</h2></p></body></html>
