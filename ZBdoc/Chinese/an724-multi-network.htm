<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AN724: Designing for Multiple Networks on a Single Zigbee Chip</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .s4 { color: #D81E2A; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .s5 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s6 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s7 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s8 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s9 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 h4 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s11 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; }
 .s12 { color: #FFF; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s13 { color: #FFF; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s14 { color: #231F20; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s15 { color: #231F20; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 h2 { color: #D91F2A; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt; }
 #l3> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l4 {padding-left: 0pt; }
 #l4> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l5 {padding-left: 0pt; }
 #l5> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l6 {padding-left: 0pt;counter-reset: d2 1; }
 #l6> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l8 {padding-left: 0pt;counter-reset: d2 1; }
 #l8> li>*:first-child:before {counter-increment: d2; content: counter(d1, decimal)"."counter(d2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 li {display: block; }
 #l9 {padding-left: 0pt; }
 #l9> li>*:first-child:before {content: "• "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="126" height="62" alt="image" src="an724-multi-network/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-top: 4pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">AN724: Designing for Multiple Networks on a Single Zigbee Chip</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="1" alt="image" src="an724-multi-network/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="178" height="1" alt="image" src="an724-multi-network/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s1" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="179" height="1" alt="image" src="an724-multi-network/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s2" style="padding-top: 4pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Multi-network vs Multi-PAN</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Design considerations</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Network context and stack APIs</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Application framework support</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Tokens</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 17pt;text-indent: -7pt;text-align: left;">Multi-network timing considerations</p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">This application note discusses the design considerations in- volved in integrating a feature that allows a node with one Zigbee radio to operate on multiple Zigbee networks.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Prior to EmberZNet PRO 6.8.0, the multi-network implementation limited the number of always-on roles that a device could serve on the participating networks. Starting with EmberZNet PRO 6.8.0, the multi-network feature and a new multi-PAN feature allow the device to operate as a coordinator on both Zigbee networks in a host-NCP configu- ration.</p><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Introduction</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an724-multi-network/Image_005.png"/></span></p><ol id="l2"><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark0">Introduction</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Multi-network and multi-PAN features allow a device to operate on two Zigbee networks using the same radio. These Zigbee networks may have different security settings or network parameters, such as short ID, PAN ID, extended PAN ID, or radio power. The only pa- rameter that stays the same on all networks is the node&#39;s EUI64. While the multi-network feature allows the two networks to be on different radio channels, the multi-PAN feature requires that this setting matches.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">This application note presents the software options to implement a feature wherein a device with a single Zigbee radio may concurrent- ly operate on two Zigbee networks. Depending on the intended use case, you can choose either of the following configurations:</p><ul id="l3"><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Multi-network: Device may serve in an always-on role on a maximum of one of the two networks. This feature is implemented by timesharing the radio between the two networks. Consequently, the networks may have non-overlapping network and radio settings.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Multi-PAN: An extension of the multi-network feature wherein a device may serve in an always-on role (specifically a coordinator) on both networks in a host-NCP configuration. The tradeoff is that the radio channel needs to match on both networks. Because this configuration needs to keep track of the state of both networks, there is a significant increase in flash and RAM usage.</p></li></ul><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Each of these configurations has its own set of limitations. These restrictions and other considerations are discussed in greater detail in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><h3 style="padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark1">Design Considerations</a><a name="bookmark2">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">There are several factors to consider when designing a node that can operate concurrently on multiple networks as illustrated in the following figure. This section discusses them in detail as well as the associated tradeoffs.</p><p class="s5" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Note: <span class="p">As of this revision of this application note, the number of concurrent networks is limited to two.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 101pt;text-indent: 0pt;text-align: left;"><span><img width="516" height="197" alt="image" src="an724-multi-network/Image_006.jpg"/></span></p><p class="s5" style="padding-top: 6pt;padding-left: 80pt;text-indent: 0pt;text-align: center;"><a name="bookmark3">Figure 2.1.  Implementation Examples</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Based on the roles that the node is expected to serve on the networks, there are three general use cases:</p><ul id="l4"><li><p class="s5" style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Single-network: <span class="p">This use case is the standard version of the EmberZNet PRO stack where a node may only be part of one network at a time. This configuration links in stub versions of the multi-network and multi-pan libraries. This is often the only configuration that is available on parts that are severely code-space restricted.</span></p></li><li><p class="s5" style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Multi-network: <span class="p">This use case is applicable when the Zigbee radio on a device is timeshared between two networks wherein the device serves the role of an always-on device on no more than one network. An always-on device may be a Zigbee PRO coordina- tor, router, or (non-sleepy) end device.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: justify;">To function as an always-on device on one network, the device must limit its role as a sleepy end-device on the other network. The node may also choose to function as a sleepy end-device on both networks. In this case, it can sleep when it is not active on any network. This allows the two networks to be on different radio channels, run at different radio power levels, and have dissimilar net- work security requirements. This configuration links in the multi-network library and a stub version of the multi-pan-library.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: justify;">The network scheduling algorithm seamlessly takes care of switching between networks so that the node is on the always-on net- work unless it explicitly polls or sends some data to the parent on the sleepy end device or sleepy network(s). As soon as the polling or data sending transaction on the sleepy network is completed, the node immediately switches back to the always-on network until a new polling or data sending transaction is initiated. A node that is a coordinator/router on one network and a sleepy end device on the other will not be able to save energy by temporarily shutting down the radio (sleep mode). On the other hand, a node that is a sleepy end device on all networks can enter sleep mode, thus providing energy savings.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: justify;">Due to the additional overhead required to maintain information on both networks, there is a nominal increase in code space and RAM usage when compared to the single-network use case. Therefore, this feature is limited to parts with flash size of at least 512kB.</p><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Design Considerations</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an724-multi-network/Image_007.png"/></span></p></li><li><p class="s5" style="padding-top: 7pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">Multi-PAN: <span class="p">This use case is an extension of the multi-network use case where a device with a single Zigbee radio operates two Zigbee networks and takes the role of an always-on node on both networks. This configuration is only supported in Host-NCP mode. Host applications that support two coordinator nodes require an NCP that is similarly configured to support Zigbee stack functionality for the two networks.</span></p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: justify;">To function as an always-on device on both networks, there is an additional restriction that both networks need to be on the same radio channel so they can receive messages meant for either network at all times. The onus is upon the application to ensure that both networks are on the same radio channel. Starting with EmberZNet PRO 6.8.0, the stack supports a dual-coordinator configura- tion only. The first network index supports Zigbee 3.0 security and the second network index only supports the no-security Zigbee PRO network configuration profile. The stack does not currently restrict application-initiated channel changes. This is acceptable when only one of the networks is up. However, when both networks are functional, care must be taken to avoid disruptive network or user-initiated channel changes as these are not supported.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: justify;">In this configuration, it is also important to note that there is a limitation regarding sleepy broadcast messages. There is a maximum of one broadcast that is queued for all sleepy end devices across both networks.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: justify;">This configuration links in both the multi-pan and multi-network libraries. There is more overhead involved in serving as a coordinator compared to a router or an end-device. As a result, this configuration with two coordinators results in the most flash and RAM usage and is limited to parts with a flash size of at least 512kB.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 8pt;padding-left: 80pt;text-indent: 0pt;text-align: center;">Table 2.1.  Allowed Role Combinations</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:48.5748pt" cellspacing="0"><tr style="height:19pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network 0</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network 1</p></td><td style="width:160pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Required Libraries</p></td></tr><tr style="height:30pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 2pt;text-indent: 0pt;text-align: left;">Zigbee PRO (Coordinator, Router, End de- vice or Sleepy end device)</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">N/A</p></td><td style="width:160pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Multi-network stub; Multi-PAN stub</p></td></tr><tr style="height:19pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Coordinator (always-on)</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Sleepy end device</p></td><td style="width:160pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="4"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Multi-network library; Multi-PAN stub</p></td></tr><tr style="height:19pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Router (always-on)</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Sleepy end device</p></td></tr><tr style="height:19pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO End device (always-on)</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Sleepy end device</p></td></tr><tr style="height:19pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Sleepy end device</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">ZigBee PRO Sleepy end device</p></td></tr><tr style="height:30pt"><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 10pt;text-indent: 0pt;text-align: left;">Zigbee PRO Coordinator with Zigbee 3.0 security (always-on)</p></td><td style="width:178pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 10pt;text-indent: 0pt;text-align: left;">Zigbee PRO Coordinator with no-security (always-on)</p></td><td style="width:160pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Multi-network library; Multi-PAN library</p></td></tr></table><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Network Context and Stack APIs</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an724-multi-network/Image_008.png"/></span></p></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark4">Network Context and Stack APIs</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">The EmberZNet PRO stack internally manages multiple networks by maintaining multiple network contexts and by switching to the ap- propriate network context when required. The internal network context at the stack is totally transparent to the application, and the ap- plication has no means of interfering with the stack internal network context.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The stack also stores the application&#39;s current network context. Every API call invoked in the application code refers to the application current network. For instance, an <span class="s8">emberGetNodeId() </span>call returns the node&#39;s short ID on the network referred by the application current network. The following table lists the APIs provided to set and get the application current network.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 80pt;text-indent: 0pt;text-align: center;">Table 3.1.  Multi-Network Stack APIs</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Ember API</p></td><td style="width:287pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Description</p></td></tr><tr style="height:19pt"><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">uint8_t emberGetCurrentNetwork()</p></td><td style="width:287pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Returns the index of the current application network context.</p></td></tr><tr style="height:19pt"><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EmberStatus emberSetCurrentNetwork(uint8_t index)</p></td><td style="width:287pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Sets the current application current network context.</p></td></tr><tr style="height:30pt"><td style="width:264pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">uint8_t emberGetCallbackNetwork()</p></td><td style="width:287pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: left;">Returns the index of the network context of the current callback. If this function is invoked outside of a stack callback, it returns 0xFF.</p></td></tr></table><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The first two APIs are straightforward get and set functions for the application network context. The application network context is set by passing <span class="s8">emberSetCurrentNetwork </span>a network context index. If the network index to this function is invalid, the API returns the error code <span class="s8">EMBER_INDEX_OUT_OF_RANGE</span>.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><b>Note: </b>The set function is also available as a Command Line Interface (CLI) command <span class="s8">network set &lt;x&gt;</span>. This allows for a seamless extension of other CLI commands to perform network specific operations. The following is an example on how the set API may be used on a multi-PAN device to form two centralized networks.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">// Set network context. This serves as application network index for the APIs that follow</p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">// This is similar to CLI command &quot;network set 0&quot; emberSetNetwork(0);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">// Form centralized network on network index 0 emberAfPluginNetworkCreatorStart(true);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">// Set network context. This serves as application network index for the APIs that follow</p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">// This is similar to CLI command &quot;network set 1&quot; emberSetNetwork(1);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">// Form centralized network on network index 1</p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;line-height: 107%;text-align: left;">// params.channels must match the single channel from the first network! emberFormNetwork(params);</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The <span class="s8">emberGetCallbackNetwork() </span>API makes the application aware of the network context for the callback. For instance, when the stack calls <span class="s8">emberIncomingMessageHandler()</span>, the application may invoke <span class="s8">emberGetCallbackNetwork() </span>inside the callback to retrieve the index of the network on which the packet was received. The following is an example on how to query the network context for a handler.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-top: 3pt;padding-left: 32pt;text-indent: -29pt;line-height: 107%;text-align: left;">void emberIncomingMessageHandler ( EmberIncomingMessageType type, EmberApsFrame *apsFrame,</p><p class="s8" style="padding-left: 32pt;text-indent: 0pt;text-align: left;">EmberMessageBuffer message)</p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">{</p><p class="s8" style="padding-left: 17pt;text-indent: 0pt;line-height: 107%;text-align: left;">//Get network index for incoming packet uint8_t nwkIndex = emberGetCallbackNetwork();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">emberAfPushCallbackNetworkIndex();</p><p class="s8" style="padding-left: 17pt;text-indent: 0pt;line-height: 107%;text-align: left;">// Perform any network specific operations here emberAfPopNetworkIndex();</p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: justify;"><a name="bookmark5">Zigbee Application Framework Support for Nodes on Multiple Networks</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Zigbee application framework provides additional network management functionality to help you easily build and deploy devices that operate on multiple networks. For more information on implementing multi-network functionality with the Zigbee application frame- work, see <i>UG391: Zigbee Application Framework Developer&#39;s Guide</i>. The Zigbee application framework provides many advantages to the application developer in terms of reduced complexity, mostly relating to how it seamlessly manages the different network contexts when sending and receiving messages, before invoking callbacks, and before triggering event handlers for certain types of events.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Zigbee application framework allows users to configure options such as the Zigbee device type and security for the individual net- works on the Zigbee stack. When operating a device concurrently on two Zigbee networks in a host-NCP configuration, you must choose a similarly capable NCP that matches the host configuration. Multi-network-library and Multi-pan-library plugins are provided to enable and implement the appropriate functionality on the Zigbee stack.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark2" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">The EmberZNet PRO SDK comes with the following sample applications that demonstrate one potential configuration. You can use these as a reference to make a different application while being mindful of the limitations. Refer to section </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">2 Design Considerations </span>for additional guidance.</p><ul id="l5"><li><p style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;">MpZ3TcCustomTcHost: A host application that implements a node which is able to serve as a coordinator on two networks. The first network uses Zigbee 3.0 security and the second network uses no-security. You can use this host application in combination with either of the following NCP sample applications.</p></li></ul><p style="padding-top: 8pt;padding-left: 36pt;text-indent: 0pt;line-height: 182%;text-align: justify;">mp-ncp-uart-hw: A multi-PAN aware NCP application that communicates with the host over UART with hardware flow control. mp-ncp-spi: A multi-PAN aware NCP application that communicates with the host over SPI.</p><ol id="l6"><li><p class="s5" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: justify;"><a name="bookmark6">Handling of Different Network Contexts</a></p><ul id="l7"><li><p style="padding-top: 8pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;"><b>Endpoint mapping: </b>For Zigbee PRO networks, the Zigbee application framework maintains a mapping between network contexts and disjoint sets of endpoints. For example, network 0 may be associated with the set of endpoints {1,2,3} while network 1 is associ- ated with the set {4,5,6}. Notice that these two sets of endpoints must be disjoint; that is, the same endpoint cannot be associated with two different network contexts. For each application framework API that is endpoint-related, the framework switches network context according to the endpoint mapping. For instance, when we send a unicast message using the application framework API <span class="s8">emberAfSendUnicast()</span>, the application framework looks into the source endpoint specified in the passed <span class="s8">apsFrame struct </span>and switches to the corresponding network context prior to passing the packet to the stack. The network context is then restored to the original one.</p></li><li><p style="padding-top: 2pt;padding-left: 36pt;text-indent: -9pt;text-align: justify;"><b>Callbacks and network-specific handlers: </b>The Zigbee application framework ensures that the network context is always correctly set when an application framework callback or network context-sensitive event handlers are invoked. For example, when <span class="s8">emberAfPreMessageReceivedCallback() </span>is called, the current network context gets set to that of the receiving network. Note that framework sets the network context for callbacks with the <span class="s8">emberAf </span>prefix, but does not set the context for handlers called by the stack. For example, the network context will not be set automatically when the stack calls <span class="s8">emberPollCompleteHandler()</span>. However, the End Device Support plugin will set the appropriate context before calling <span class="s8">emberAfPluginEndDeviceSupportPollCompletedCallback()</span>. The following example provides sample code to query the network index in an application framework callback.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">void emberAfPluginEndDeviceSupportPollCompletedCallback(EmberStatus status)</p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">{</p><p class="s8" style="padding-left: 12pt;text-indent: 0pt;line-height: 107%;text-align: left;">//Get network index for end device support poll complete handler uint8_t nwkIndex = emberGetCallbackNetwork();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">}</p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"/></li><li><p class="s5" style="padding-top: 8pt;padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark7">Multi-Network Application Framework APIs</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The application framework provides a set of APIs for dealing with network context. These APIs are used in the application framework code to perform network context switching as described above. Notice that in all the code provided by the application framework, net- work context switching is performed using the APIs in the following table.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 8pt;padding-left: 80pt;text-indent: 0pt;text-align: center;">Table 4.1.  Multi-Network Application Framework APIs</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">API</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Description</p></td></tr><tr style="height:51pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EmberStatus emberAfPushNetworkIndex(uint8_t index)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 3pt;text-indent: 0pt;text-align: left;">Sets the current network to that of the given index and adds it to the stack of networks maintained by the framework. Every call to this API must be paired with a subsequent call to <span class="s9">emberAfPopNetworkIndex()</span>.</p></td></tr><tr style="height:51pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EmberStatus emberAfPushCallbackNetworkIndex(void)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 7pt;text-indent: 0pt;text-align: left;">Sets the current network to the callback network and adds it to the stack of networks maintained by the framework. Every call to this API must be paired with a subsequent call to <span class="s9">emberAfPopNetworkIndex()</span>.</p></td></tr><tr style="height:51pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EmberStatus emberAfPushEndpointNetworkIndex(uint8_t endpoint)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 3pt;text-indent: 0pt;text-align: left;">Sets the current network to that of the given endpoint and adds it to the stack of networks maintained by the framework. Every call to this API must be paired with a subsequent call to <span class="s9">emberAfPopNetworkIndex()</span>.</p></td></tr><tr style="height:84pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">EmberStatus emberAfPopNetworkIndex(void)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 6pt;text-indent: 0pt;text-align: left;">Removes the topmost network from the stack of net- works maintained by the framework and sets the cur- rent network to the new topmost network. Every call to this API must be paired with a prior call to <span class="s9">emberAfPushNetworkIndex()</span>, <span class="s9">emberAfPushCallbackNetworkIndex()</span>, or <span class="s9">emberAfPushEndPointNetworkIndex()</span>.</p></td></tr><tr style="height:30pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">uint8_t emberAfPrimaryEndpointForNetworkIndex(uint8_t index)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 5pt;text-indent: 0pt;text-align: left;">Returns the primary endpoint of the given network in- dex or 0xFF if no endpoints belong to the network.</p></td></tr><tr style="height:40pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">uint8_t emberAfPrimaryEndpointForCurrentNetworkIndex(void)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 11pt;text-indent: 0pt;text-align: left;">Returns the primary endpoint of the current network index or 0xFF if no endpoints belong to the current network.</p></td></tr><tr style="height:30pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">uint8_t emberAfNetworkIndexFromEndpoint(uint8_t endpoint)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 23pt;text-indent: 0pt;text-align: left;">Returns the network index of a given endpoint or 0xFF if the endpoint does not exist.</p></td></tr><tr style="height:40pt"><td style="width:319pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">uint8_t emberAfNetworkIndexFromEndpointIndex(uint8_t index)</p></td><td style="width:221pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 9pt;text-indent: 0pt;text-align: left;">Returns the network index of the endpoint corre- sponding to the passed index or 0xFF if no endpoint is currently stored at the passed index.</p></td></tr></table><p class="s4" style="padding-bottom: 3pt;text-indent: 0pt;text-align: right;">Non-Volatile Storage Tokens</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="713" height="0" alt="image" src="an724-multi-network/Image_009.png"/></span></p></li></ol></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark8">Non-Volatile Storage Tokens</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Network-related tokens are duplicated for each participating network. Tokens that pertain to a network may be accessed using the standard APIs after setting the application network context. The tokens that have been duplicated are summarized in the following ta- ble.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 80pt;text-indent: 0pt;text-align: center;">Table 5.1.  Tokens that are duplicated for each participating network</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Node data (node ID, node type, PAN ID, extended PAN ID, tx power, channel, profile)</p></td></tr><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network key and network key sequence number</p></td></tr><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network alternate key and key sequence number</p></td></tr><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network security frame counter</p></td></tr><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Trust center info (TC mode, TC EUI64 and TC link key)</p></td></tr><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network management info (active channels, manager node ID and update ID)</p></td></tr><tr style="height:19pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Parent info (parent node ID and parent EUI64)</p></td></tr><tr style="height:30pt"><td style="width:542pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;padding-right: 16pt;text-indent: 0pt;text-align: left;">Child table (nodeID, EUI64 and information flags) – This is only duplicated for nodes that are coordinators on both participating net- works.</p></td></tr></table><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Tokens that are not network-related are stored only once per node. These tokens return the same value regardless of the application network index context.</p></li><li><h3 style="padding-top: 7pt;padding-left: 39pt;text-indent: -15pt;text-align: left;"><a name="bookmark9">Multi-Network Timing Considerations</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l8"><li><p class="s5" style="padding-left: 41pt;text-indent: -17pt;text-align: left;"><a name="bookmark10">Leaving the Always-On Network</a></p></li></ol></li></ol><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">If the node participates in an always-on network as coordinator or router, it is important that the application does not poll and/or send data too frequently on the sleepy network(s). Every poll on the sleepy network(s) results in a temporary absence from the always-on network, which directly affects the throughput of the always-on network. This section provides the results of experimental measure- ments performed on Silicon Labs devices. This information will help the application designer to avoid throughput degradation on the always-on network. As we will show later in this section, a certain threshold in terms of “away time” from the always-on network should not be exceeded in order to maintain the throughput on the always-on network at an acceptable level.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The following table provides the average time a multi-network node spends during a complete network switch, and of typical polling and data-sending transactions of a sleepy end device. Data packets exchanged during the tests determining average time were frames 127 bytes long, or the highest size allowed by the 802.15.4 physical layer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 80pt;text-indent: 0pt;text-align: center;">Table 6.1.  Polling Sequences Average Time</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:340pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Event sequence</p></td><td style="width:200pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Average time</p></td></tr><tr style="height:19pt"><td style="width:340pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Network switch</p></td><td style="width:200pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">420 μs</p></td></tr><tr style="height:19pt"><td style="width:340pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">POLL + NO DATA</p></td><td style="width:200pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">2.26 ms</p></td></tr><tr style="height:19pt"><td style="width:340pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">POLL + DATA</p></td><td style="width:200pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">8.02 ms</p></td></tr><tr style="height:19pt"><td style="width:340pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">DATA + POLL + NO DATA</p></td><td style="width:200pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">8.82 ms</p></td></tr><tr style="height:19pt"><td style="width:340pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">DATA + POLL + DATA</p></td><td style="width:200pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">14.52 ms</p></td></tr></table><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">A complete network switch, which involves retuning the radio on a different channel with different transmission power, takes about 420 μs. During the network switch, the node will not be able to receive or transmit on any network.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">It takes on average about 2.25 ms for a sleepy end device to poll a parent that does not have data to transmit to the child, while it takes about 8 ms to poll the parent and receive a data packet from the parent.</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Similarly, it takes about 8.8 ms to send data to the parent and then poll the parent, without receiving a data packet. Finally, it takes about 14.5 ms to send data to the parent, poll for data, and receive a data packet from the parent.</p><p class="s5" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">For each polling transaction, add the network switch time twice to the overall transaction time (the first switch to the sleepy net- work and second switch to the always on network).</span></p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark3" style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">To estimate how the throughput of the always-on network degrades as the traffic on the sleepy network increases, we deployed a three-node network as shown in </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Figure 2.1 Implementation Examples on page 3</span>, where the multi-network node is the coordinator of an HA network (Network A) and is joined as sleepy end device to an SE network (Network B).</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Traffic was sent continuously on Network A so that maximum throughput is always achieved. Traffic on Network B was exchanged at different rates. All the data packets exchanged in these tests were encrypted at both network and APS layers and had an 82-byte pay- load (the maximum achievable payload with network and APS encryption for a single ZigBee fragment).</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Figure 6.1 Throughput of the Always-On Network on page 10 </span>illustrates how the maximum achievable throughput on Network A de- grades as the traffic on Network B increases. All the values are expressed as a fraction of the maximum throughput achieved when no traffic is exchanged on Network B (about 53.5 packets per second).</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The interval between SED network activity in the following figure indicates how often the multi-network node leaves the always-on net- work to perform a data transaction on the sleepy network. In an SED data transaction, the multi-network node polls, the coordinator sends a data packet, and the multi-network node sends an APS acknowledgment to the coordinator.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 100pt;text-indent: 0pt;text-align: left;"><span><img width="517" height="348" alt="image" src="an724-multi-network/Image_010.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 80pt;text-indent: 0pt;text-align: center;"><a name="bookmark11">Figure 6.1.  Throughput of the Always-On Network</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;">We found the following results:</p><ul id="l9"><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">By leaving the always-on network every 5 seconds, a multi-network node achieves a throughput of 99.8%,</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">By leaving the always-on network every 2 seconds a multi-network node achieves a throughput of 99.0%,</p></li><li><p style="padding-top: 3pt;padding-left: 36pt;text-indent: -9pt;text-align: left;">By leaving the always-on network every quarter of a second the throughput drops to about 91%.</p></li></ul><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Notice that these tests represent an average scenario where traffic is non-bursty, that is, every two subsequent data transactions on the sleepy network are well spaced. Therefore, the multi-network node is always able to go back to the always-on network after one data transaction on the sleepy network. Other tests have showed that heavy bursty outgoing traffic on the sleepy network can lead a multi- network node to spend longer time intervals on the sleepy network, which in turn can further reduce the throughput on the always-on network. For instance, exchanging the same amount of traffic as one data transaction every quarter of a second in a bursty fashion would further reduce the throughput to about 86.4%.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">To summarize, traffic on the sleepy network directly affects the throughput of the always-on network. However, both the rate of such traffic and also its distribution in time are important. The application designer should take into account these results when defining the type and the amount of traffic that will be exchanged on the sleepy network.</p><p class="s5" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">The application designer should keep the length of a single interval of time away from the always-on network as short as possi- ble, by spacing polls and data sends on the sleepy network(s).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">The multi-network application designer has full control of how long and how often a multi-network node leaves the always-on network for the sleepy network. A single network sleepy end device automatically polls again for data if the incoming packet from the parent has</p><p style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">the frame pending bit set. However, if a multi-network node is also participating in an always-on network, the automatic poll is delayed by 100 ms.</p><p class="s5" style="padding-top: 6pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Note: <span class="p">A multi-network node that participates in an always-on network and a sleepy network is guaranteed to switch back to the always- on network after one poll on the sleepy network. If the frame pending bit of the incoming packet is set, the node will poll again after 100 ms.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Some special operations can occasionally occur on the sleepy network that can cause a multi-network node to stay on the sleepy net- work for a prolonged time interval. We measured how throughput on the always-on network is affected during these special operations. Please refer to the following table for more details.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 80pt;text-indent: 0pt;text-align: center;">Table 6.2.  Throughput of the Always-On Network During Special Operations on the Sleepy Network</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:24pt" cellspacing="0"><tr style="height:19pt"><td style="width:338pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Special operation on the sleepy network</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 21pt;padding-right: 21pt;text-indent: 0pt;text-align: center;">Average time</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#797777"><p class="s6" style="padding-top: 3pt;padding-left: 24pt;padding-right: 24pt;text-indent: 0pt;text-align: center;">Throughput</p></td></tr><tr style="height:19pt"><td style="width:338pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Join (HA)</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 21pt;padding-right: 21pt;text-indent: 0pt;text-align: center;">0.63s</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 24pt;padding-right: 24pt;text-indent: 0pt;text-align: center;">95.9%</p></td></tr><tr style="height:19pt"><td style="width:338pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Find network + Join (HA)</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 21pt;padding-right: 21pt;text-indent: 0pt;text-align: center;">1.81s</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 24pt;padding-right: 24pt;text-indent: 0pt;text-align: center;">16.2%</p></td></tr><tr style="height:19pt"><td style="width:338pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Join + Registration (SE)</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 21pt;padding-right: 21pt;text-indent: 0pt;text-align: center;">29.4s</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 24pt;padding-right: 24pt;text-indent: 0pt;text-align: center;">94.7%</p></td></tr><tr style="height:19pt"><td style="width:338pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">Find network + Join + registration (SE)</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 21pt;padding-right: 21pt;text-indent: 0pt;text-align: center;">31.0s</p></td><td style="width:101pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s7" style="padding-top: 3pt;padding-left: 24pt;padding-right: 24pt;text-indent: 0pt;text-align: center;">88.7%</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Smart. Connected. Energy-Friendly.</h4><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s11" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Products</p><p style="text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/products" class="s12">www.silabs.com/products</a></p><p class="s11" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Quality</p><p style="text-indent: 0pt;text-align: center;"><a href="http://www.silabs.com/quality" class="s12">www.silabs.com/quality</a></p><p class="s11" style="text-indent: 0pt;line-height: 9pt;text-align: center;">Support and Community</p><p class="s13" style="text-indent: 0pt;text-align: center;">community.silabs.com</p><p style="padding-left: 64pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">		</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="767" height="695" alt="image" src="an724-multi-network/Image_011.png"/></span></p><p class="s14" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s15" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each specific device, and &quot;Typical&quot; parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes without further notice to the product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included information. Without prior notification, Silicon Labs may update product firmware during the manufacturing process for security or reliability reasons. Such changes will not alter the specifications or the performance of the product. Silicon Labs shall have no liability for the consequences of use of the information supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required, or Life Support Systems without the specific written consent of Silicon Labs. A &quot;Life Support System&quot; is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s14" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Trademark Information</p><p class="s15" style="padding-left: 5pt;text-indent: 0pt;text-align: justify;">Silicon Laboratories Inc.®, Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, ClockBuilder®, CMEMS®, DSPLL®, EFM®, EFM32®, EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, &quot;the world’s most energy friendly microcontrollers&quot;, Ember®, EZLink®, EZRadio®, EZRadioPRO®, Gecko®, Gecko OS, Gecko OS Studio, ISOmodem®, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress® , Zentri, the Zentri logo and Zentri DMS, Z- Wave®, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="152" height="75" alt="image" src="an724-multi-network/Image_012.png"/></span></p><p class="s14" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s14" style="padding-left: 168pt;text-indent: 0pt;text-align: left;">USA</p><p style="padding-top: 5pt;padding-left: 168pt;text-indent: 0pt;text-align: left;"><h2 href="http://www.silabs.com/">http://www.silabs.com</h2></p></body></html>
