<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>UG103.17: Wi-Fi® Coexistence Fundamentals</title><meta name="author" content="Silicon Labs"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 24pt; }
 .s1 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .p, p { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; margin:0pt; }
 .s4 { color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s5 { color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 9pt; }
 .s6 { color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s7 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 h4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 .a, a { color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s8 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s9 { color: #00AF50; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s10 { color: #F00; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s12 { color: #2E5395; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s13 { color: #F9E906; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s14 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s15 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s17 { color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s18 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s19 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s20 { color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 h2 { color: #FFF; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 20pt; }
 .s21 { color: #FFF; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s22 { color: #4C4D4F; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s23 { color: #424242; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s24 { color: #424242; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s25 { color: #4C4D4F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s26 { color: #4C4D4F; font-family:"Arial Black", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s28 { color: #4C4D4F; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s30 { color: #0086DD; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s31 { color: #4C4D4F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 2pt; }
 h3 { color: #FB1725; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 li {display: block; }
 #l2 {padding-left: 0pt; }
 #l2> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l3 {padding-left: 0pt;counter-reset: e1 1; }
 #l3> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l4 {padding-left: 0pt;counter-reset: e1 2; }
 #l4> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l5 {padding-left: 0pt;counter-reset: e2 1; }
 #l5> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l6 {padding-left: 0pt;counter-reset: e3 1; }
 #l6> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l8 {padding-left: 0pt; }
 #l8> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l9 {padding-left: 0pt; }
 #l9> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l10 {padding-left: 0pt; }
 #l10> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l11 {padding-left: 0pt; }
 #l11> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l13 {padding-left: 0pt; }
 #l13> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l14 {padding-left: 0pt; }
 #l14> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l15 {padding-left: 0pt;counter-reset: e1 3; }
 #l15> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l15> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l16 {padding-left: 0pt;counter-reset: e2 1; }
 #l16> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l16> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l17 {padding-left: 0pt;counter-reset: e3 1; }
 #l17> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l17> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l18 {padding-left: 0pt;counter-reset: e3 1; }
 #l18> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l18> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l19 {padding-left: 0pt;counter-reset: e1 1; }
 #l19> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l19> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l20 {padding-left: 0pt;counter-reset: e2 4; }
 #l20> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l20> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l21 {padding-left: 0pt;counter-reset: e3 1; }
 #l21> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l21> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l22 {padding-left: 0pt;counter-reset: e1 1; }
 #l22> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l22> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l23 {padding-left: 0pt;counter-reset: e2 5; }
 #l23> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l23> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l24 {padding-left: 0pt; }
 #l24> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l25 {padding-left: 0pt; }
 #l25> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l26 {padding-left: 0pt;counter-reset: e1 1; }
 #l26> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l26> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l27 {padding-left: 0pt;counter-reset: e2 1; }
 #l27> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l27> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l28 {padding-left: 0pt; }
 #l28> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l29 {padding-left: 0pt;counter-reset: e1 1; }
 #l29> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l29> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l30 {padding-left: 0pt;counter-reset: e2 1; }
 #l30> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l30> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l31 {padding-left: 0pt;counter-reset: e3 1; }
 #l31> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l31> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l32 {padding-left: 0pt;counter-reset: e1 1; }
 #l32> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l32> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l33 {padding-left: 0pt;counter-reset: e2 1; }
 #l33> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l33> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l34 {padding-left: 0pt;counter-reset: e3 4; }
 #l34> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l34> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l35 {padding-left: 0pt; }
 #l35> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l36 {padding-left: 0pt; }
 #l36> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l37 {padding-left: 0pt;counter-reset: e1 1; }
 #l37> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l37> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l38 {padding-left: 0pt;counter-reset: e2 2; }
 #l38> li>*:first-child:before {counter-increment: e2; content: counter(e1, decimal)"."counter(e2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l38> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 #l39 {padding-left: 0pt;counter-reset: e3 1; }
 #l39> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l39> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l40 {padding-left: 0pt;counter-reset: e4 1; }
 #l40> li>*:first-child:before {counter-increment: e4; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)"."counter(e4, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l40> li:first-child>*:first-child:before {counter-increment: e4 0;  }
 #l41 {padding-left: 0pt;counter-reset: f1 4; }
 #l41> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l41> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 #l42 {padding-left: 0pt;counter-reset: f2 2; }
 #l42> li>*:first-child:before {counter-increment: f2; content: counter(f1, decimal)"."counter(f2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l42> li:first-child>*:first-child:before {counter-increment: f2 0;  }
 #l43 {padding-left: 0pt;counter-reset: f3 4; }
 #l43> li>*:first-child:before {counter-increment: f3; content: counter(f1, decimal)"."counter(f2, decimal)"."counter(f3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l43> li:first-child>*:first-child:before {counter-increment: f3 0;  }
 #l44 {padding-left: 0pt;counter-reset: e3 1; }
 #l44> li>*:first-child:before {counter-increment: e3; content: counter(e1, decimal)"."counter(e2, decimal)"."counter(e3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l44> li:first-child>*:first-child:before {counter-increment: e3 0;  }
 #l45 {padding-left: 0pt;counter-reset: g1 4; }
 #l45> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l45> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l46 {padding-left: 0pt;counter-reset: g2 3; }
 #l46> li>*:first-child:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l46> li:first-child>*:first-child:before {counter-increment: g2 0;  }
 #l47 {padding-left: 0pt;counter-reset: g3 3; }
 #l47> li>*:first-child:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l47> li:first-child>*:first-child:before {counter-increment: g3 0;  }
 #l48 {padding-left: 0pt;counter-reset: g1 4; }
 #l48> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l48> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 #l49 {padding-left: 0pt;counter-reset: g2 3; }
 #l49> li>*:first-child:before {counter-increment: g2; content: counter(g1, decimal)"."counter(g2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l49> li:first-child>*:first-child:before {counter-increment: g2 0;  }
 #l50 {padding-left: 0pt;counter-reset: g3 4; }
 #l50> li>*:first-child:before {counter-increment: g3; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l50> li:first-child>*:first-child:before {counter-increment: g3 0;  }
 #l51 {padding-left: 0pt;counter-reset: g4 1; }
 #l51> li>*:first-child:before {counter-increment: g4; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)"."counter(g4, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l51> li:first-child>*:first-child:before {counter-increment: g4 0;  }
 #l52 {padding-left: 0pt;counter-reset: g4 1; }
 #l52> li>*:first-child:before {counter-increment: g4; content: counter(g1, decimal)"."counter(g2, decimal)"."counter(g3, decimal)"."counter(g4, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l52> li:first-child>*:first-child:before {counter-increment: g4 0;  }
 #l53 {padding-left: 0pt;counter-reset: h1 4; }
 #l53> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l53> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 #l54 {padding-left: 0pt;counter-reset: h2 4; }
 #l54> li>*:first-child:before {counter-increment: h2; content: counter(h1, decimal)"."counter(h2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l54> li:first-child>*:first-child:before {counter-increment: h2 0;  }
 #l55 {padding-left: 0pt;counter-reset: h3 1; }
 #l55> li>*:first-child:before {counter-increment: h3; content: counter(h1, decimal)"."counter(h2, decimal)"."counter(h3, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l55> li:first-child>*:first-child:before {counter-increment: h3 0;  }
 #l56 {padding-left: 0pt;counter-reset: h4 1; }
 #l56> li>*:first-child:before {counter-increment: h4; content: counter(h1, decimal)"."counter(h2, decimal)"."counter(h3, decimal)"."counter(h4, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l56> li:first-child>*:first-child:before {counter-increment: h4 0;  }
 #l57 {padding-left: 0pt;counter-reset: h1 4; }
 #l57> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l57> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 #l58 {padding-left: 0pt;counter-reset: h2 4; }
 #l58> li>*:first-child:before {counter-increment: h2; content: counter(h1, decimal)"."counter(h2, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l58> li:first-child>*:first-child:before {counter-increment: h2 0;  }
 #l59 {padding-left: 0pt;counter-reset: h3 1; }
 #l59> li>*:first-child:before {counter-increment: h3; content: counter(h1, decimal)"."counter(h2, decimal)"."counter(h3, decimal)" "; color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 #l59> li:first-child>*:first-child:before {counter-increment: h3 0;  }
 #l60 {padding-left: 0pt;counter-reset: h4 2; }
 #l60> li>*:first-child:before {counter-increment: h4; content: counter(h1, decimal)"."counter(h2, decimal)"."counter(h3, decimal)"."counter(h4, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l60> li:first-child>*:first-child:before {counter-increment: h4 0;  }
 #l61 {padding-left: 0pt; }
 #l61> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l62 {padding-left: 0pt; }
 #l62> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l63 {padding-left: 0pt; }
 #l63> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l64 {padding-left: 0pt; }
 #l64> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l65 {padding-left: 0pt; }
 #l65> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l66 {padding-left: 0pt;counter-reset: e1 5; }
 #l66> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l66> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l67 {padding-left: 0pt;counter-reset: i1 1; }
 #l67> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l67> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l68 {padding-left: 0pt; }
 #l68> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l69 {padding-left: 0pt;counter-reset: i1 1; }
 #l69> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l69> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l70 {padding-left: 0pt;counter-reset: i2 1; }
 #l70> li>*:first-child:before {counter-increment: i2; content: counter(i1, decimal)"."counter(i2, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 #l70> li:first-child>*:first-child:before {counter-increment: i2 0;  }
 #l71 {padding-left: 0pt; }
 #l71> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l72 {padding-left: 0pt; }
 #l72> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l73 {padding-left: 0pt; }
 #l73> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l74 {padding-left: 0pt; }
 #l74> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l75 {padding-left: 0pt; }
 #l75> li>*:first-child:before {content: " "; color: black; font-family:Symbol, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 #l76 {padding-left: 0pt;counter-reset: e1 6; }
 #l76> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)" "; color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 11pt; }
 #l76> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="127" height="62" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-top: 11pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">UG103.17: Wi-Fi® Coexistence Fundamentals</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 21pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="724" height="1" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="208" height="1" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s1" style="padding-top: 4pt;padding-bottom: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">KEY POINTS</p><p style="padding-left: 10pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="208" height="1" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li><p class="s2" style="padding-left: 20pt;text-indent: -7pt;text-align: left;">Wi-Fi impact on Bluetooth, Zigbee, and OpenThread (802.15.4) radios</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Improving unmanaged coexistence</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Improving managed coexistence</p></li><li><p class="s2" style="padding-top: 3pt;padding-left: 20pt;text-indent: -7pt;text-align: left;">Summary points for Wi-Fi and Bluetooth and Wi-Fi and 802.15.4 coexistence</p></li></ul><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-top: 17pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">This document describes methods to improve coexistence of 2.4 GHz IEEE 802.11b/g/n Wi-Fi and other 2.4 GHz radios such as Bluetooth®, Bluetooth Mesh, Bluetooth Low Energy, and IEEE 802.15.4-based radios such as Zigbee® and OpenThread. These techniques are applicable to the EFR32MGxx and EFR32BGxx families.</p><p style="padding-top: 9pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Silicon Labs’ Fundamentals series covers topics that project managers, application de- signers, and developers should understand before beginning to work on an embedded networking solution using Silicon Labs chips, networking stacks such as EmberZNet PRO or Silicon Labs Bluetooth®, and associated development tools. The documents can be used as a starting place for anyone needing an introduction to developing wireless net- working applications, or who is new to the Silicon Labs development environment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">For additional details about the implementation of managed coexistence for EFR32 de- vices refer to the following application notes:</p><ul id="l2"><li><p class="s4" style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">AN1128: Bluetooth® Coexistence with Wi-Fi®</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">AN1017: Zigbee® and OpenThread Coexistence with Wi-Fi®</p></li><li><p class="s4" style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">AN1243: Timing and Test Data for EFR32 Coexistence with Wi-Fi (<span class="p">available under non-disclosure from Silicon Labs Sales).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">For evaluating the Silicon Labs EFR32 software coexistence solution, order EFR32MG Wireless SoC Starter Kit (WSTK) #SLWSTK6000B and Coexistence Backplane EVB (#SLWSTK-COEXBP). Detailed instructions for using the Starter Kit and Backplane EVB are found in <i>UG350: Silicon Labs Coexistence Development Kit (SLWSTK-COEXBP)</i><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s7" target="_blank">. To see a demonstration of Wi-Fi coexistence, access links for ordering the WSTK and EVB, and to download additional coexistence documentation, visit the </a><span style=" color: #00F; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 9pt;">Silicon Labs Wi-Fi Coex-</span><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s17" target="_blank"> </a><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s5" target="_blank">istence Learning Center</a><a href="https://www.silabs.com/products/wireless/learning-center/wi-fi-coexistence" class="s7" target="_blank">.</a></p><ol id="l3"><li><h4 style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: justify;"><a name="bookmark0">Introduction</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">The 2.4 GHz Industrial, Scientific and Medical (ISM) band supports Wi-Fi, Bluetooth, and 802.15.4. The simultaneous and co-located operation of these different 2.4 GHz radio standards can degrade performance of one or more of the radios. To improve interference robustness, each of the 2.4 GHz ISM radio standards support some level of collision avoidance and/or message retry capability. At low data throughput rates, low power levels, and/or sufficient physical separation, these 2.4 GHz ISM standards can co-exist without signifi- cant performance impacts. However, recent customer trends are making coexistence more difficult:</p></li></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: justify;">Increased Wi-Fi transmit power level for “extended range.”</p><p style="padding-top: 8pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">+30 dBm Wi-Fi Access Points are now common.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: justify;">Increased Wi-Fi throughput.</p><p style="padding-top: 8pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">Depending on achievable Signal-to-Noise Ratio (SNR), high throughput requirements for file transfers and/or video streaming may result in high Wi-Fi duty cycle within the 2.4 GHz ISM band.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Integrating Wi-Fi, Bluetooth, and 802.15.4 into the same device for gateway functionality.</p><p style="padding-top: 8pt;padding-left: 37pt;text-indent: 0pt;text-align: left;">This is required by Home Automation and Security applications and provides easier end-node commissioning.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">This document note includes three sections:</p></li><li><p style="padding-top: 8pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark5" class="s7">Section </a><a href="#bookmark5" class="a">2 Wi-Fi Impact on Bluetooth and 802.15.4 Radios</a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;"> </span>provides general information on Bluetooth and 802.15.4 channel mapping.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark21" class="s7">Section </a><a href="#bookmark21" class="a">3 </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Unmanaged Coexistence </span>describes design considerations to improve coexistence without direct interaction between Blue- tooth, 802.15.4, and Wi-Fi radios.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark57" class="s7">Section </a><a href="#bookmark57" class="a">4 </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Managed Coexistence </span>describes the Silicon Labs Packet Traffic Arbitration (PTA) support to coordinate 2.4 GHz RF traffic for co-located Bluetooth, 802.15.4, and Wi-Fi radios. PTA support is available for the EFR32MGx only.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 59pt;text-indent: -36pt;text-align: justify;">Note: <span class="p">Zigbee and Thread devices (802.15.4) operate at less than +20 dBm transmit power level. With normal network activity, Zigbee/Thread solutions have a relatively low RF duty cycle and Bluetooth solutions implement Adaptive Frequency Hopping (AFH). Silicon Labs’ testing of Bluetooth blocked by Zigbee/Thread shows low impact on Bluetooth with AFH enabled and normal Zigbee/Thread network activity. However, if 100% RF duty cycle, Zigbee/Thread can degrade co-located Bluetooth performance.</span></p><ol id="l4"><li><h4 style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark1">Wi-Fi Impact on Bluetooth and 802.15.4 Radios</a><a name="bookmark5">&zwnj;</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Worldwide, Wi-Fi supports up to 14 overlapping 20/22 MHz bandwidth channels across the 2.4 GHz ISM band with transmit power levels up to +30 dBm. Bluetooth supports 40 non-overlapping channels at 2 MHz spacing with transmit powers up to +20 dBm (Bluetooth Core Specification v5.0). IEEE 802.15.4 supports 16 non-overlapping 2 MHz bandwidth channels at 5 MHz spacing with transmit powers up to</p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">+20 dBm. The Bluetooth and 802.15.4 channel mappings are shown in the following figure, where yellow highlighted channels are the three Bluetooth advertising (ADV) channels.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;"><span><img width="620" height="241" alt="Wi-Fi, Bluetooth, and 802.15.4 Channel Mapping (World-Wide) " title="Wi-Fi, Bluetooth, and 802.15.4 Channel Mapping (World-Wide) " src="ug103-17-wi-fi-coexistence-fundamentals/Image_005.gif"/></span></p><p class="s8" style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: center;"><a name="bookmark6">Figure 2-1. Wi-Fi, Bluetooth, and 802.15.4 Channel Mapping (World-Wide)</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Actual channels available vary by country. For example, in the USA, only Wi-Fi channels 1 through 11 are available. Bluetooth channels 0 through 39 are available worldwide and Zigbee channels 11 through 26 are available, although channels 25 and 26 require reduced transmit power levels to meet FCC requirements (North America only).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l5"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark2">Impact of a 100% Duty-Cycled Wi-Fi</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Silicon Labs completed testing to understand the effects of Wi-Fi on Bluetooth and 802.15.4 radios. The following subsections summarize the key findings and results from this testing.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l6"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark3">Bluetooth</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">To better understand the effects of Wi-Fi on Bluetooth, Silicon Labs measured the impact of a 100% duty-cycled 802.11n (MCS3, 20 MHz bandwidth) blocker transmitting at various power levels while receiving a Bluetooth 1Mbps 37-byte payload message transmitted at power level sufficient to achieve 0.1% BER (receive sensitivity). The results for co-channel, adjacent channel, and “far-away” channels are shown in the following figure. All 802.11n and Bluetooth power levels are referenced to the Silicon Labs EFR32MG21 RF input. The test application was developed using the Silicon Labs Bluetooth 2.11.0 or later stack with the soc-dtm sample application running on the EFR32 DUT (Device Under Test) and a test script to control the DUT and RF test equipment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="722" height="520" alt="Bluetooth Low Energy Receive Sensitivity with 100% Duty-Cycled 802.11n (MCS3/20 MHz) Wi-Fi Blocker " title="Bluetooth Low Energy Receive Sensitivity with 100% Duty-Cycled 802.11n (MCS3/20 MHz) Wi-Fi Blocker " src="ug103-17-wi-fi-coexistence-fundamentals/Image_006.jpg"/></span></p><p class="s8" style="padding-top: 5pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">Figure 2-2. Bluetooth Low Energy Receive Sensitivity with 100% Duty-Cycled 802.11n (MCS3/20 MHz) Wi-Fi Blocker</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">From the figure above, the key observations about the impact of Wi-Fi (channel 1, MCS3/20 MHz) on Bluetooth are:</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Co-Channel (Bluetooth overlapping Wi-Fi):</p></li></ol></li></ol></li></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">For Bluetooth RF channels 0 through 10, EFR32MG21 can receive a Bluetooth 1Mbps signal at 4 dB weaker than aggregate Wi-Fi transmit power (100% duty cycle).</p><ul id="l7"><li><p style="padding-top: 3pt;padding-left: 55pt;text-indent: -14pt;text-align: left;">This receive sensitivity limitation impacts both co-located and remote, not co-located, Bluetooth radios.</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Adjacent Channel (Bluetooth within one Wi-Fi bandwidth):</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At Bluetooth RF channel 11, EFR32MG21 can receive a -90 dBm Bluetooth 1Mbps with -40 dBm or weaker Wi-Fi transmit power (100% duty cycle).</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">“Far-Away” Channel (Bluetooth beyond one Wi-Fi bandwidth):</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At Bluetooth RF channels 19 through 39, EFR32MG21 can receive a -96 dBm Bluetooth 1Mbps signal with -40 dBm or weaker Wi-Fi transmit power (100% duty cycle).</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">In a real-world environment, Wi-Fi is typically not 100% duty cycle and only approaches 100% duty cycle during file transfers or video stream in low Wi-Fi SNR conditions. As seen in the previous figure, the EFR32xGxx receive sensitivity varies as the Wi-Fi blocker turns ON/OFF. The net result is the ability to see weaker signals when Wi-Fi is OFF, but not when strong Wi-Fi is ON (actively transmitting).</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The following figure illustrates the receive range of a node (blue node) near a strong Wi-Fi transmitter. Relative to the blue Bluetooth node, the area inside the green circle represents the receive range when Wi-Fi is ON. The area between the green and yellow circles represents the receive range when Wi-Fi is OFF. From this figure:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">The green node is always receivable by the blue node.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">The yellow node is only receivable by the blue node when Wi-Fi is OFF.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">The red node is never receivable by the blue node.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="384" height="363" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_007.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;">EFR32 Bluetooth</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;">EFR32 Bluetooth Device</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;">EFR32 Bluetooth</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;">Bluetooth Device</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 10pt;text-indent: 0pt;text-align: left;">Bluetooth Device</p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">The yellow and red nodes are always receivable by the green node.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="22" height="22" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_008.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;text-align: left;">Bluetooth Device</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 9pt;padding-left: 76pt;text-indent: 0pt;text-align: center;"><a name="bookmark7">Figure 2-3. EFR32 Receiver Desensitized when Wi-Fi Transmitting</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: left;">Depending on each Bluetooth device’s TX level, RX sensitivity vs. blocker, channel, and relative attenuation and Wi-Fi TX level and duty cycle, the impact of strong Wi-Fi turning ON/OFF will vary. Based on the figure above, the following example assumes:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Wi-Fi co-located with Blue device</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Bluetooth channel is “far-away” (RF channel 39) from Wi-Fi channel (channel 1), indicating minimum Bluetooth RX sensitivity vs. Wi- Fi RX levels:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 116pt;text-indent: 0pt;text-align: left;"><span><img width="473" height="101" alt="Bluetooth channel is 峟ar-away?from Wi-Fi channel  " title="Bluetooth channel is 峟ar-away?from Wi-Fi channel  " src="ug103-17-wi-fi-coexistence-fundamentals/Image_009.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 37pt;text-indent: -14pt;text-align: left;">Typical radio TX levels:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 115pt;text-indent: 0pt;text-align: left;"><span><img width="473" height="41" alt="Typical radio TX levels " title="Typical radio TX levels " src="ug103-17-wi-fi-coexistence-fundamentals/Image_010.gif"/></span></p></li><li><p style="padding-top: 7pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Attenuation between radios</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 116pt;text-indent: 0pt;text-align: left;"><span><img width="473" height="141" alt="Attenuation between radios " title="Attenuation between radios " src="ug103-17-wi-fi-coexistence-fundamentals/Image_011.gif"/></span></p></li><li><p style="padding-top: 9pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Bluetooth device RX <span class="s9">success</span>/<span class="s10">fail </span>with Wi-Fi <b>OFF</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 115pt;text-indent: 0pt;text-align: left;"><span><img width="473" height="121" alt="Bluetooth device RX success/fail with Wi-Fi OFF " title="Bluetooth device RX success/fail with Wi-Fi OFF " src="ug103-17-wi-fi-coexistence-fundamentals/Image_012.gif"/></span></p></li><li><p style="padding-top: 7pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Bluetooth device RX <span class="s9">success</span>/<span class="s10">fail </span>with Wi-Fi <b>ON</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 116pt;text-indent: 0pt;text-align: left;"><span><img width="474" height="127" alt="Bluetooth device RX success/fail with Wi-Fi ON " title="Bluetooth device RX success/fail with Wi-Fi ON " src="ug103-17-wi-fi-coexistence-fundamentals/Image_013.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="#bookmark7" class="s7">For </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Figure 2-3 </span>using the example assumptions, all radio communication is maintained between Wi-Fi ON/OFF <u>except</u>:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Blue device receives yellow device when Wi-Fi ON, but not Wi-Fi OFF.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Green device receives red device when Wi-Fi ON, but not Wi-Fi OFF.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">If devices are Bluetooth devices (point-to-point), blue device communication with:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Green device is not impacted by Wi-Fi TX.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Yellow device is erratic as Wi-Fi TX goes ON/OFF.</p><ul id="l8"><li><p style="padding-top: 3pt;padding-left: 55pt;text-indent: -14pt;text-align: left;">For high-duty cycle Wi-Fi TX, connection can become unstable as multiple connection intervals fail.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Red device is not possible.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">If devices are Bluetooth mesh devices (mesh network), blue device communication with:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Green device is not impacted by Wi-Fi TX.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Yellow device shows erratic communication as Wi-Fi TX goes ON/OFF.</p><ul id="l9"><li><p style="padding-top: 3pt;padding-left: 55pt;text-indent: -14pt;text-align: left;">For high-duty cycle Wi-Fi TX, communication would require a relay to forward/repeat missed RX messages from yellow device to blue device.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -37pt;text-align: right;">Red device is not directly possible, and a relay is required to forward messages between blue device and red device.</p><ul id="l10"><li><p style="padding-top: 3pt;padding-left: 55pt;text-indent: -55pt;text-align: right;">If green device is relay, communication with red device shows erratic communication as Wi-Fi TX goes ON/OFF.</p></li><li><p style="padding-left: 55pt;text-indent: -14pt;text-align: left;">If yellow device is relay, communication with red device is not impacted by Wi-Fi TX.</p><p class="s8" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;"><a name="bookmark4">2.1.2 802.15.4</a><a name="bookmark8">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">To better understand the effects of Wi-Fi on 802.15.4 radios, Silicon Labs measured the impact of a 100% duty-cycled 802.11n (MCS3, 20 MHz bandwidth) blocker transmitting at various power levels while receiving an 802.15.4 message transmitted at power level sufficient to achieve 1% PER (receive sensitivity). The following figure shows the results for co-channel, adjacent channel, and “far-away” channel. All 802.11n and 802.15.4 power levels are referenced to the Silicon Labs’ EFR32MG21 RF input. The test application was developed using Silicon Labs’ EmberZNet PRO (Zigbee) stack with NodeTest running on the EFR32 DUT (Device Under Test) and a test script to control the DUT and RF test equipment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 96pt;text-indent: 0pt;text-align: left;"><span><img width="524" height="379" alt="802.15.4 Receive Sensitivity with 100% Duty Cycled 802.11n (MCS3/20 MHz) Wi-Fi Blocker " title="802.15.4 Receive Sensitivity with 100% Duty Cycled 802.11n (MCS3/20 MHz) Wi-Fi Blocker " src="ug103-17-wi-fi-coexistence-fundamentals/Image_014.jpg"/></span></p><p class="s8" style="padding-top: 6pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 2-4. 802.15.4 Receive Sensitivity with 100% Duty Cycled 802.11n (MCS3/20 MHz) Wi-Fi Blocker</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">These are the key observations about the impact of Wi-Fi on 802.15.4 from the figure above.</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Co-Channel (Zigbee overlapping Wi-Fi):</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At channel 12, Zigbee can receive an 802.15.4 signal down to 9 dBm weaker than aggregate Wi-Fi transmit power (100% duty cycle).</p><ul id="l11"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">This receive sensitivity limitation impacts both co-located and remote, not co-located, 802.15.4 radios.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At channel 12, Zigbee with and without LNA (Low Noise Amplifier) can receive an 802.15.4 signal down to 9 dB weaker than aggregate Wi-Fi transmit power (100% duty cycle).</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">802.15.4 transmits can also be blocked by Wi-Fi transmit power tripping the 802.15.4 -75 dBm CCA (Clear Channel Assessment) threshold.</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Adjacent Channel (Zigbee within one Wi-Fi bandwidth):</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At channel 15, Zigbee can receive a -87 dBm 802.15.4 signal with -30 dBm or weaker Wi-Fi transmit power (100% duty cycle).</p><ul id="l12"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Maximum receive sensitivity is attained at -38 dBm or weaker Wi-Fi transmit power (100% duty cycle).</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At channel 15, Zigbee without LNA can receive a -87 dBm 802.15.4 signal with -30 dBm or weaker Wi-Fi transmit power (100% duty cycle); -34 dBm or weaker with LNA enabled.</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">“Far-Away” Channel (Zigbee beyond one Wi-Fi bandwidth):</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">At channels 17 through 26, Zigbee can receive a -96 dBm 802.15.4 signal with -30 dBm or weaker Wi-Fi transmit power (100% duty cycle).</p><ul id="l13"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Maximum receive sensitivity is attained at -40 dBm or weaker Wi-Fi transmit power (100% duty cycle).</p></li></ul></li><li><p style="padding-left: 37pt;text-indent: -14pt;text-align: left;">At channels 17 through 26, Zigbee without LNA can receive a -96 dBm 802.15.4 signal with -30 dBm or weaker 100% Wi-Fi transmit power (100% duty cycle); -34 dBm or weaker with LNA enabled.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">In a real-world environment, Wi-Fi is typically not 100% duty cycle and only approaches 100% duty cycle during file transfers or video stream in low Wi-Fi SNR (Signal to Noise Ratio) conditions. As seen in the figure above, the EFR32xGxx receive sensitivity varies as the Wi-Fi blocker turns ON/OFF. The net result is the ability to see weaker signals when Wi-Fi is OFF, but not when strong Wi-Fi is ON (actively transmitting).</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The following figure illustrates the receive range of a node (blue node) near a strong Wi-Fi transmitter. Relative to the blue 802.15.4 node, the area inside the green circle represents the receive range when Wi-Fi is ON. The area between the green and yellow circles represents the receive range when Wi-Fi is OFF. From this figure:</p><ul id="l14"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">The green node is always receivable by the blue node.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">The yellow node is only receivable by the blue node when Wi-Fi is OFF.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">The red node is never receivable by the blue node.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="326" height="304" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_015.png"/></span></p><p class="s8" style="padding-top: 7pt;padding-left: 13pt;text-indent: 0pt;text-align: center;">EFR32MGx</p><p class="s8" style="padding-left: 13pt;text-indent: 0pt;text-align: center;">Receive Range with Wi-Fi ON</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">802.15.4 Node</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 6pt;padding-left: 13pt;text-indent: 0pt;text-align: center;">EFR32MGx</p><p class="s8" style="padding-left: 13pt;text-indent: 0pt;text-align: center;">Receive Range with Wi-Fi ON</p><p style="text-indent: 0pt;text-align: left;"/><p class="s13" style="padding-top: 5pt;padding-left: 21pt;text-indent: 4pt;text-align: left;">802.15.4 Node Only Receivable</p><p class="s13" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">Wi-Fi OFF</p><p style="text-indent: 0pt;text-align: left;"/><p class="s9" style="padding-top: 7pt;padding-left: 14pt;text-indent: 10pt;text-align: left;">802.15.4 Node Always Receivable</p><p class="s9" style="padding-left: 20pt;text-indent: 0pt;text-align: left;">Wi-Fi ON or OFF</p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">The yellow and red nodes are always receivable by the green node.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="22" height="19" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_016.png"/></span></p><p class="s10" style="padding-top: 7pt;padding-left: 17pt;text-indent: 7pt;text-align: left;">802.15.4 Node Never Receivable Wi-Fi ON or OFF</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 2-5. EFR32MGx Receiver Desensitized when Wi-Fi Transmitting</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">Depending on each node’s type (Coordinator, Router, or End Device) and the Wi-Fi duty cycle, the impact of strong Wi-Fi turning ON/OFF will vary.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In a Zigbee network:</p></li><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Coordinator: Tasked with network creation, the control of network parameters, and basic maintenance, in addition to performing an application function, such as aggregating data or serving as a central control point or gateway.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Router: In addition to running an application function, a Router can receive and retransmit data from other nodes.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">End Device: Typically, a battery-powered device (Sleepy End Device or SED) running an application function and able to talk to a single parent node (either the Coordinator or a Router). End Devices cannot relay data from other nodes.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">In an OpenThread network:</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Border Router: Provides network node connectivity to other devices in external networks (for example, Internet access).</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Router: In addition to running an application function, a Router can receive and retransmit data from other nodes and provide join and security capability. When routing function is not needed by network, a Router can downgrade to a Router-Eligible End Device (REED).</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">REED: In addition to running an application function, a REED can receive and retransmit data from other nodes. When additional routers needed by network, a REED can upgrade to a Router.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">SED: Typically, a battery-powered device running an application function and able to talk to a single parent node (either a Border Router, Router, or REED). SEDs cannot relay data from other nodes.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Two Zigbee cases are considered below, but many other cases are possible.</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Case 1: Zigbee Coordinator near strong Wi-Fi plus three end-nodes</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">For this case, the figure above is composed of:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Coordinator: Blue node</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">End Devices: Green, Yellow, and Red nodes</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In this simple network, each end device attempts to join the network formed by the coordinator. However, the red node is outside of receive range and cannot join. With Wi-Fi OFF, both the green and yellow nodes successfully join the network and have no issues sending messages to the Coordinator. Regardless of Wi-Fi ON/OFF duty cycle, the green node remains successful sending messages to the Coordinator.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">With Wi-Fi ON/OFF at low-duty cycle, some messages from the yellow node are periodically blocked, but Zigbee retry mechanisms are effective in getting the messages to the coordinator. However, with Wi-Fi ON/OFF at high-duty cycle, many messages from the yellow node are blocked and Zigbee retry mechanisms may be exhausted. Even when retry mechanisms are successful, the message latency increases. If the yellow node is a battery-powered Sleepy End Device, it must remain active longer to execute retries, reducing battery life.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Case 2: Zigbee Coordinator near strong Wi-Fi, Router within always receive range, plus two end-nodes</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">For this case, the figure above is composed of:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Coordinator: Blue node</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Router: Green node</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">End Devices: Yellow and Red nodes</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In this simple network, the green Router forms a route directly to the Coordinator, maintained regardless of Wi-Fi ON/OFF duty cycle. With Wi-Fi OFF, the yellow node forms a route directly to the blue Coordinator at a lower route cost than a route via the green Router. The red node cannot be received by the Coordinator and its messages are also routed through the Router to the Coordinator.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">With Wi-Fi OFF, the green Router, the yellow node, and the red node (via the green Router) have no issues sending messages to the Coordinator. Regardless of Wi-Fi ON/OFF duty cycle, the green Router and the red node (via the green Router) remain successful sending messages to the Coordinator. With Wi-Fi ON/OFF at low-duty cycle, some messages from the yellow node are periodically blocked, but Zigbee retry mechanisms are effective in getting the messages to the Coordinator.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">With Wi-Fi ON/OFF at high-duty cycle, many messages from the yellow node are blocked and Zigbee retry mechanisms may be ex- hausted. If Wi-Fi ON/OFF stays at high-duty cycle for enough time, the network responds by restructuring the yellow node to route messages to the Coordinator via the Router. However, this route rediscover takes time and messages may be lost. If Wi-Fi ON/OFF remains high-duty cycle, the yellow node messages will continue to go through the Router, which forwards messages to the Coordinator.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">However, when Wi-Fi ON/OFF returns to low-duty cycle, the network will, due to lower route cost, return to the original structure with the yellow node sending messages directly to the Coordinator.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Under conditions with Wi-Fi ON/OFF switching between low and high duty cycles, the network may switch back and forth between these two route states. During these switching events, messages from the yellow end-node to the Coordinator are lost.</p><ol id="l15"><li><h4 style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark9">Unmanaged Coexistence</a><a name="bookmark21">&zwnj;</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">The unmanaged coexistence recommendations that follow provide guidance on how to maximize the EFR32MGxx/<span class="s2">EFR32BGxx </span>message success with strong nearby Wi-Fi.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l16"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark10">Implement Frequency Separation</a><a name="bookmark22">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">You can minimize the blocking effect of high-power Wi-Fi on other 2.4 GHz radios by moving the Wi-Fi to one end of the pass band. This impacts fewer Bluetooth channels and allows 802.15.4 channels to move to the other end of the pass band where Wi-Fi will have minimal blocking effect.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l17"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark11">Bluetooth</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark6" class="s7">From </a><a href="#bookmark6" class="a">Figure 2-1</a>, Bluetooth co-channel operation with Wi-Fi has the most impact on Bluetooth communication. For Bluetooth devices (point-to-point) and Bluetooth mesh devices using Generic Attribute Profile (GATT) bearer communication, at least one ADV channel is minimally blocked and supports establishing a connection via Advertising, Scanning, and Initiating link-layer states. While establishing a connection, the Bluetooth connection master specifies the channel map, but the connection master can also update the channel map during connection. However, the Bluetooth connection slave must follow the channel map provided by master.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">If EFR32 becomes the connection master, the Bluetooth channel map can be specified via:</p><p class="s14" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">sl_status_t sl_bt_gap_set_data_channel_classification (uint8 channel_map_len, const uint8* chan- nel_map_data)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: justify;">This command can be used to specify a channel classification for data channels. This classification persists until overwritten with a subsequent command or until the system is reset.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><span class="s15">channel_map </span>is 5 bytes and contains 37 1-bit fields. The <i>n</i>th such field (in the range 0 to 36) contains the value for the link layer channel index <i>n</i>:</p><p style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">0: Channel <i>n </i>is bad.</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">1: Channel <i>n </i>is unknown.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">The most significant bits are reserved and shall be set to 0 for future use. At least two channels shall be marked as unknown.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: justify;"><a name="bookmark12">For Bluetooth mesh devices using Advertising bearer communication, at least one ADV channel is minimally blocked and supports es- tablishing communication via Advertising and Scanning.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">3.1.2 802.15.4</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark8" class="s7">From the observations in section </a><a href="#bookmark8" class="a">2.1.2 802.15.4</a>, co-channel operation of 802.15.4 with 100% duty cycle Wi-Fi blocks most of the 802.15.4 messages and must be avoided. Also, EFR32MGxx tolerates up to 20 dB stronger Wi-Fi signal in “far-away” channel case than in adjacent channel case. The 802.15.4 network performance is improved by maximizing the frequency separation between the Wi-Fi network and the 802.15.4 network.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">If the Wi-Fi and 802.15.4 radios are implemented with a common host (MCU controlling both radios), then the host should attempt to maximize the frequency separation. For Wi-Fi networks, the Access Point (AP) establishes the initial channel and, in auto channel con- figuration, is free to move the network to another channel using the Channel Switch Announcement (CSA), introduced in 802.11h, to schedule the channel change.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">For OpenThread networks, frequency separation implementation depends on the application layer. For Zigbee networks, the Coordinator establishes the initial channel.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark13">Operate Wi-Fi with 20 MHz Bandwidth</a><a name="bookmark23">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Because Wi-Fi 802.11n uses OFDM (<span style=" color: #212121;">Orthogonal Frequency-Division Multiplexing) </span>sub-carriers, third-order distortion products from these sub-carriers extend one bandwidth on each side of the Wi-Fi channel. 802.11n can operate in 20 MHz or 40 MHz modes. If operated in 40 MHz mode, 40 MHz of the 80 MHz ISM band is consumed by the Wi-Fi channel. However, an additional 40 MHz on each side can be affected by third-order distortion products. These third-order products can block the Bluetooth and 802.15.4 receiver and is the primary reason adjacent channel performance is up to 20 dB worse than “far-away” channel performance.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">In proposing 40 MHz mode for 802.11n, the Wi-Fi standard anticipated potential issues with other 2.4 GHz ISM devices when Wi-Fi operated in 40 MHz mode. During association, any Wi-Fi station can set the <b>Forty MHz Intolerant </b>bit in the HT Capabilities Information. This bit informs the Wi-Fi access point that other 2.4 GHz ISM devices are present, forcing the entire Wi-Fi network to 20 MHz mode.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l18"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark14">Bluetooth</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">If the Wi-Fi and Bluetooth radios are implemented with a common host, then the host should have the Wi-Fi radio set the 40 MHz Intolerant bit during association to force the Wi-Fi to 20 MHz mode, increasing the number of channels available to Bluetooth and improving the Bluetooth performance.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">If the application requires Wi-Fi to operate in 40 MHz mode, frequency separation can be maximized by placing Wi-Fi channel at upper or lower end of 2.4 MHz ISM band, minimizing the adjacent channels.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 22pt;text-indent: 0pt;text-align: left;"><a name="bookmark15">3.2.2 802.15.4</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: justify;">If the Wi-Fi and 802.15.4 radios are implemented with a common host, then the host should have the Wi-Fi radio set the Forty MHz Intolerant bit during association to force the Wi-Fi to 20 MHz mode, improving the 802.15.4 performance.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">If the application requires Wi-Fi to operate in 40 MHz mode, frequency separation must be maximized by placing Wi-Fi channels and</p><p style="padding-left: 22pt;text-indent: 0pt;text-align: left;">802.15.4 channel at opposite ends of the 2.4 GHz ISM band.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">From Silicon Labs’ managed coexistence testing, 802.15.4 performance with 40 MHz Wi-Fi, for the same Wi-Fi RF duty cycle, is compa- rable to 802.15.4 performance with 20 MHz Wi-Fi. While 802.15.4 performance with 100% Wi-Fi RF duty cycle is inherently impaired, 40 MHz Wi-Fi, for the same target Wi-Fi data rate, has a lower RF duty cycle than 20 MHz Wi-Fi, providing the 802.15.4 radio more frequent and longer time gaps for successful transmits and receives.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark16">Increase Antenna Isolation</a><a name="bookmark24">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: left;"><a href="#bookmark5" class="s7">From the observations in section </a><a href="#bookmark5" class="a">2 Wi-Fi Impact on Bluetooth and 802.15.4 Radios</a>, minimizing the Wi-Fi energy seen by the EFR32 RF input improves the EFR32 receive range. For example, in the “far-away” channel case for Zigbee (Wi-Fi channel 1 and Zigbee channel</p><p style="padding-left: 22pt;text-indent: 0pt;text-align: left;">25) with 100% Wi-Fi duty cycle, a -96 dBm 802.15.4 message can be received when the average Wi-Fi energy at EFR32MGxx input is - 30 dBm or less. If the Wi-Fi average transmit power level is +10 dBm, 40 dB or more antenna isolation between the Wi-Fi transmitter and</p><p style="padding-left: 22pt;text-indent: 0pt;text-align: left;">802.15.4 RF input is required to always receive a -96 dBm 802.15.4 signal, Wi-Fi ON or OFF.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Increased antenna isolation can be achieved by:</p></li></ol></li></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Increasing the distance between antennas. In open-space, far-field, power received is proportional to 1/R2, where R is the distance between antennas.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Taking advantage of antenna directionality. A monopole antenna provides a null along the axis of the antenna, which can be directed toward the Wi-Fi antenna(s).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l19"><ol id="l20"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark17">Implement Protocol and Stack Retry Mechanisms</a><a name="bookmark25">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: left;"><a name="bookmark18">You can maximize the use of built-in protocol MAC and stack retry mechanisms to minimize missed messages in the presence of high- power Wi-Fi.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l21"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;">Bluetooth</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Bluetooth (point-to-point) messages requires responses. If a response is not received within programmable time, the application can re- send the message up to a programmable limit.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Bluetooth mesh (mesh network) messages are sent via ADV payloads and responses are received during SCAN. Bluetooth mesh spec- ifies:</p></li></ol></li></ol></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Optional relay nodes, which after a programmable time-out with no responses, can retransmit the original message for a programma- ble number of hops.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Originator, after a programmable time-out with no response, can retransmit the original message for a programmable number of time- outs.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Both mechanisms improve Bluetooth mesh message success but should be used with caution. More relays nodes, shorter time-outs, and more retries may improve an individual message’s success, but these mechanisms can stress the mesh network by flooding too many identical messages. See AN1137: Bluetooth® Mesh Network Performance for details on these considerations.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a name="bookmark19">3.4.2 802.15.4</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The 802.15.4 specification requires retries at the MAC (Media Access Control) layer, which are implemented in Silicon Labs’ EmberZNet PRO stack. To further improve message delivery robustness, Silicon Labs EmberZNet PRO stacks also implements NWK (Zigbee net- work layer) retries, wrapping the MAC retries. The user application can also take advantage of APS (Zigbee Application Support (APS) Sub-Layer) retries, wrapping the NWK retries. More information on the retry mechanisms can be found at:</p></li><li><p class="s6" style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: justify;"><a href="https://www.silabs.com/documents/public/user-guides/ug103-02-appdevfundamentals-zigbee.pdf" class="s5" target="_blank">https://www.silabs.com/documents/public/user-guides/ug103-02-appdevfundamentals-zigbee.pdf</a> <span style=" color: #000;">(section 4.4)</span></p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: justify;"><a href="https://www.silabs.com/community/wireless/zigbee-and-thread/knowledge-base.entry.html/2012/06/29/how_does_the_emberzn-po1M" class="s5" target="_blank">https://www.silabs.com/community/wireless/zigbee-and-thread/knowledge-base.entry.html/2012/06/29/how_does_the_emberzn- po1M</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">These retry mechanisms are effective at improving message delivery. However, under high interference conditions, message latency increases.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a name="bookmark20">For OpenThread networks, 802.15.4 retries at the MAC layer still apply. However, other message and retry mechanisms depend on the application layer.</a><a name="bookmark26">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l22"><ol id="l23"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: justify;">Remove FEM (or Operate FEM LNA in Bypass)</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">EFR32xGxx can deliver nearly +20 dBm transmit power and has excellent receiver sensitivity without an external FEM (Front End Mod- ule). However, an external FEM can increase transmit power to +20 dBm for increased range (in regions where this is permitted, for example, the Americas). The additional FEM LNA receive gain also improves sensitivity. However, this additional gain also degrades the EFR32xGx linearity performance in the presence of strong Wi-Fi.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">For best receive sensitivity in the presence of strong Wi-Fi blockers, either eliminate the FEM or operate the FEM LNA in bypass mode. This recommendation is a trade-off as receive sensitivity without Wi-Fi blockers is improved with FEM LNA gain enabled.</p></li></ol><li><h4 style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark27">Managed Coexistence</a><a name="bookmark57">&zwnj;</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;">The market trends of higher Wi-Fi transmit power, higher Wi-Fi throughput, and integration of Wi-Fi and Bluetooth radios into the same device has the following impacts:</p></li></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Advantages:</p><ul id="l24"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Host can implement frequency separation between Wi-Fi, Bluetooth, 802.15.4.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Co-located Wi-Fi radio can force Wi-Fi network to operate with 20 MHz bandwidth.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Co-located Wi-Fi, Bluetooth, and 802.15.4 radios can communicate pending and/or in-progress activity on 2.4 GHz ISM transmits and receives.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Disadvantages:</p><ul id="l25"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Higher Wi-Fi transmit power requires greater antenna isolation.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Higher Wi-Fi throughput results in higher Wi-Fi duty cycle.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Antenna isolation is usually limited by the size of the product (only 15-20 dB isolation is not unusual).</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Assuming frequency separation achieves the “far-away” channel case and Wi-Fi only uses 20 MHz bandwidth, a +20 dBm Wi-Fi transmit power level at 100% duty cycle requires 50 dB antenna isolation to receive -92 dBm Bluetooth or 45 dB antenna isolation to receive -80 dBm 802.15.4 messages. This is generally not achievable in small devices with co-located Wi-Fi and Bluetooth or 802.15.4.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Managed Coexistence takes advantage of communication between the co-located Wi-Fi, Bluetooth, and 802.15.4 radios to coordinate each radio’s access to the 2.4 GHz ISM band for transmit and receive. For the EFR32, Silicon Labs has implemented a coordination scheme compatible with Wi-Fi devices supporting PTA. This PTA-based coordination allows the EFR32 to signal the Wi-Fi device when receiving a message or wanting to transmit a message. When the Wi-Fi device is made aware of the EFR32 requiring the 2.4 GHz ISM band, any Wi-Fi transmit can be delayed, improving Bluetooth or 802.15.4 message reliability.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 59pt;text-indent: -36pt;text-align: left;">Note: <span class="p">EFR32 Bluetooth and Bluetooth Mesh coexistence is supported in Bluetooth 2.13.x and Bluetooth Mesh 2.10.x. Not all coexist- ence support features in Bluetooth 2.13.x and Bluetooth Mesh 2.10.x are present in earlier versions.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l26"><ol id="l27"><li><p class="s8" style="padding-top: 8pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark28">PTA Support Options</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">PTA is described in IEEE 802.15.2 (2003) Clause 6 and is a recommendation, not a standard. 802.15.2 originally addressed coexistence between 802.11b (Wi-Fi) and 802.15.1 (Bluetooth Classic) and does not describe an exact hardware configuration. However, 802.15.2 recommends that the PTA implementation consider the following:</p></li></ol></ol></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">TX REQUEST from 802.11b to PTA and TX REQUEST from 802.15.1 to PTA</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">TX CONFIRM from PTA to 802.11b and TX CONFIRM from PTA to 802.15.1</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">STATUS information from both radios:</p><ul id="l28"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Radio state [TX, RX, or idle]</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Current and future TX/RX frequencies</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Future expectation of a TX/RX start and duration</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Packet type</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Priority (Fixed, Randomized, or QoS based)</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The following figure describes how 802.15.2 considers radio state, transmit/receive, and frequencies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;"><span><img width="709" height="271" alt="IEEE 802.15.2 2.4 GHz ISM Co-Located Radio Interference Possibilities " title="IEEE 802.15.2 2.4 GHz ISM Co-Located Radio Interference Possibilities " src="ug103-17-wi-fi-coexistence-fundamentals/Image_017.gif"/></span></p><p class="s8" style="padding-top: 7pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-1. IEEE 802.15.2 2.4 GHz ISM Co-Located Radio Interference Possibilities</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><a href="#bookmark21" class="s7">From the figure above, the frequency separation recommendations from section </a><a href="#bookmark21" class="a">3 </a><span style=" color: #049; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt;">Unmanaged Coexistence </span>remain required for managed coexistence:</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">802.15.2 “In-Band” is equivalent to Co-Channel operation, which showed significant Wi-Fi impact on co-channel Bluetooth or 802.15.4.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">802.15.2 “Out-of-Band” covers both Adjacent and “Far-Away” Channel operation, which showed ~20 dB improvement in “Far-Away” Channel vs. Adjacent Channel (802.15.4).</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">As such, for Managed Coexistence, Silicon Labs recommends continuing to apply the unmanaged coexistence recommendations in these sections:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark22" class="a">3.1 Implement Frequency </a><a href="#bookmark22">Separation</a></p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark23" class="a">3.2 Operate Wi-Fi with 20 MHz </a><a href="#bookmark23">Bandwidth</a></p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark24" class="a">3.3 Increase Antenna </a><a href="#bookmark24">Isolation</a></p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark25" class="a">3.4 Implement Protocol and Stack Retry </a><a href="#bookmark25">Mechanisms</a></p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;"><a href="#bookmark26" class="a">3.5 Remove FEM (or Operate FEM LNA in </a><a href="#bookmark26">Bypass)</a></p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">In reviewing existing PTA implementations, Silicon Labs finds the PTA master implementation has been integrated into many Wi-Fi devices, but not all Wi-Fi devices support a PTA interface. Although describing typical PTA implementations is sometimes referred to in the industry as Wi-fi/Bluetooth, 802.15.4 can be used interchangeably with Bluetooth for sections 4.1.1 to 4.1.4 when applied to EFR32. The following figure shows the most common Wi-Fi/PTA implementations supporting Bluetooth.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 84pt;text-indent: 0pt;text-align: left;"><span><img width="555" height="234" alt="Typical Wi-Fi/Bluetooth PTA Implementations " title="Typical Wi-Fi/Bluetooth PTA Implementations " src="ug103-17-wi-fi-coexistence-fundamentals/Image_018.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-2. Typical Wi-Fi/Bluetooth PTA Implementations</p><ol id="l29"><ol id="l30"><ol id="l31"><li><p class="s8" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark29">1-Wire PTA</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In 1-Wire PTA, the Wi-Fi/PTA device asserts a GRANT signal when Wi-Fi is not busy transmitting or receiving. When GRANT is asserted, the Bluetooth radio is allowed to transmit or receive. This mode does not allow the external radio to request the 2.4 GHz ISM and is not recommended.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">An alternate 1-Wire implementation is a REQUEST signal from Bluetooth to Wi-Fi/PTA, where Bluetooth asserts REQUEST whenever it needs the 2.4 GHz ISM band and expects Wi-Fi to always yield. This mode works very well for Bluetooth, but high priority Wi-Fi traffic can be compromised which impacts Wi-Fi performance.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark30">2-Wire PTA</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 106%;text-align: justify;">In 2-Wire, the REQUEST is added with the GRANT signal, allowing the Bluetooth radio to request the 2.4 GHz ISM band. The Wi-Fi/PTA device internally controls the prioritization between Bluetooth and Wi-Fi, and on a conflict, the PTA can choose to either GRANT Bluetooth or Wi-Fi.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark31">3-Wire PTA</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In 3-Wire, the PRIORITY signal is added, allowing the Bluetooth radio to signify a high- or low-priority message is either being received or transmitted. The Wi-Fi/PTA device compares this external priority request against the internal Wi-Fi priority, which may be high/low or high/mid/low and can choose to either GRANT Bluetooth or Wi-Fi.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">PRIORITY can be implemented as static or directional (enhanced) priority.</p></li></ol></ol></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Static: PRIORITY is either high or low during REQUEST asserted for the transmit or receive operation.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional: PRIORITY is either high or low for a typically 20µs duration after REQUEST asserted, but switches to low during receive operation and high during transmit operation.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">For platforms, such as Wi-Fi data routers that can achieve high Wi-Fi duty cycles, as well as IoT hubs that stream Bluetooth classic audio, implementing PRIORITY is highly recommended as it provides the Wi-Fi/PTA device with insight on the EFR32 REQUEST. PRIORITY is also configurable, both at compile time and at runtime, to address various product optimization requirements. However, PRIORITY may not be necessary for platforms that do not experience high Wi-Fi duty cycles nor support Bluetooth audio streaming, freeing a GPIO pin on the EFR32 and SoC. Low RF duty cycle protocols such as 802.15.4 are even more likely to not require PRIORITY in these conditions.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l32"><ol id="l33"><ol id="l34"><li><p class="s8" style="padding-left: 58pt;text-indent: -36pt;text-align: left;"><a name="bookmark32">4-Wire PTA</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">In 4-Wire PTA, the FREQ signal is added, allowing the Bluetooth radio to signify an “in-band” or “out-of-band” message is either being received or transmitted. Silicon Labs recommends maximizing frequency separation, making the FREQ signal mute. For this reason, Silicon Labs’ EFR32 does not support the FREQ signal and, for any 4-wire Wi-Fi/PTA with a FREQ input, Silicon Labs therefore recom- mends asserting the FREQ input to the Wi-Fi/PTA.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Additional details about the implementation of managed coexistence and test results are available in an expanded version of this appli- cation note, <i>AN1243: Timing and Test Data for EFR32 Coexistence with Wi-Fi</i>, available under non-disclosure from Silicon Labs Sales.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 59pt;text-indent: -36pt;text-align: left;"><a name="bookmark33">Multiple EFR32s Connected to Wi-Fi/PTA</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The 802.15.2 recommendation only addresses a single 802.11b radio connected to a single 802.15.1 radio. However, market trends are requiring multiple co-located 2.4 GHz ISM radios to operate with a Wi-Fi/PTA device only designed for one external radio. Silicon Labs has addressed this requirement by enhancing the REQUEST signal with the “shared” REQUEST feature. For 802.15.4 radios only, the Silicon Labs EFR32 PRIORITY can also be configured as “shared” to support additional multi-EFR32 radio configurations.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">The “shared” REQUEST and “shared” PRIORITY features have the following characteristics:</p></li></ol></ol></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Operate REQUEST and PRIORITY in open-drain or open-source (an external 1 kΩ ±5% pull-up for open-drain or pull-down for open source is required).</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Before asserting REQUEST, test REQUEST to determine if another EFR32 has already asserted REQUEST.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">If not already asserted, assert REQUEST.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">If already asserted:</p><ul id="l35"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Wait for REQUEST to deassert.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Delay random time (programmable).</p></li><li><p style="padding-top: 7pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Re-test REQUEST.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">If not already asserted, assert REQUEST.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">If already asserted:</p><ul id="l36"><li><p style="padding-left: 73pt;text-indent: -18pt;text-align: left;">Then another radio has secured REQUEST.</p></li><li><p style="padding-left: 73pt;text-indent: -18pt;text-align: left;">Return to wait for REQUEST to deassert.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">With these enhanced REQUEST and PRIORITY features, multiple EFR32s implement a PTA interface, which to the Wi-Fi/PTA device appears to be a single external radio.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: left;">An example of three EFR32 radios using 2-Wire PTA interfaced to one Wi-Fi/PTA interface using 2-Wire PTA is shown in the following figure.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 168pt;text-indent: 0pt;text-align: left;"><span><img width="325" height="284" alt="Three EFR32s Supporting Single Wi-Fi 2-Wire PTA Interface " title="Three EFR32s Supporting Single Wi-Fi 2-Wire PTA Interface " src="ug103-17-wi-fi-coexistence-fundamentals/Image_019.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 76pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Figure 4-3. Three EFR32s Supporting Single Wi-Fi 2-Wire PTA Interface</p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 10pt;text-align: center;">(REQUEST pull-up or pull-down not shown)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: left;">With these enhanced REQUEST features and “shared” PRIORITY, an example of three EFR32 radios using 3-Wire PTA interfaced to one Wi-Fi/PTA interface using 3-Wire PTA is shown in the following figure.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 167pt;text-indent: 0pt;text-align: left;"><span><img width="328" height="282" alt="Three EFR32s Supporting Single Wi-Fi/PTA 3-Wire PTA Interface " title="Three EFR32s Supporting Single Wi-Fi/PTA 3-Wire PTA Interface " src="ug103-17-wi-fi-coexistence-fundamentals/Image_020.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 76pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Figure 4-4. Three EFR32s Supporting Single Wi-Fi/PTA 3-Wire PTA Interface</p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 10pt;text-align: center;">(REQUEST and PRIORITY pull-ups or pull-downs not shown)</p><ol id="l37"><ol id="l38"><li><p class="s8" style="padding-top: 7pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark34">Wi-Fi/PTA Considerations</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">From Silicon Labs’ testing, Wi-Fi/PTA implementations vary. Best results are attained when the Wi-Fi/PTA implementation has the fol- lowing characteristics.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l39"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark35">Wi-Fi/PTA Supports Wi-Fi TX Pre-emption</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Wi-Fi RF duty cycle varies based on the Modulation and Coding Scheme (MCS) index, guard interval, bandwidth, and target data rate. Wi-Fi signal strength and SNR vary with distance and objects/walls between AP and STA, particularly with mobile Wi-Fi devices. When Wi-Fi signal strength and SNR drop, the MCS index is lowered to modulations able to operate at the lower SNR. However, lowering the MSC index also lowers the maximum data rate, and the Wi-Fi RF duty cycle increases as the AP and STA attempt to maintain the target data rate.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">After REQUEST asserted, Wi-Fi/PTA devices not supporting Wi-Fi TX pre-emption delay GRANT to EFR32 until the end of the in-progress packet. At MCS0 with 20MHz bandwidth and large aggregated Wi-Fi packets, this delay can be as long as 16ms. This delay is much longer than the typical REQUEST_WINDOW (Bluetooth) or ~200µs REQUEST to end of CCA, and much longer than the maximum received 802.15.4 packet. (802.15.4). As such, the lack of Wi-Fi TX pre-emption during high Wi-Fi RF duty cycle increases retries, in- creases end-node battery consumption, and increases message loss.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">After REQUEST asserted, Wi-Fi/PTA devices supporting TX pre-emption stop the Wi-Fi transmit, ramp down the Wi-Fi PA (within-gate delays up to tens of µs), and quickly GRANT the 2.4GHz band to the radio. The short the time from REQUEST to quiet Wi-Fi and GRANT improves message success on first attempt, which decreases retries, decreases end-node battery consumption, and decreases message loss.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Wi-Fi TX pre-emption impacts Wi-Fi performance as in-progress Wi-Fi TX packets are aborted and corrupted. In response to a corrupted packet, most Wi-Fi devices assume SNR or interferer and temporarily lower the MCS index to maintain connection but recover to optimum MSC index as subsequent messages are successful. However, Bluetooth and 802.15.4 networks are low duty cycle and the infrequent Wi-Fi TX pre-emption events have a low impact on Wi-Fi performance.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark36">Wi-Fi/PTA Prevents Wi-Fi Transmit when GRANT Asserted</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Some Wi-Fi/PTA devices have been optimized to work with classic Bluetooth devices and have also been optimized to continue Wi-Fi TX events for a short time after asserting GRANT. This works only for that particular Wi-Fi/PTA and classic Bluetooth combination, as the minimum time from REQUEST asserted to Bluetooth TX start was used to determine how long Wi-Fi TX can continue after GRANT asserted. For EFR32 Bluetooth receives, the Wi-Fi/PTA device must stop all Wi-Fi TX when GRANT asserted and/or the EFR32 REQUEST_WINDOW must be increased to equal or exceed the Wi-Fi/PTA continued TX event.</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Some Wi-Fi/PTA devices also attempt Wi-Fi TX based on the FREQ feature described in the 4-Wire PTA. If the FREQ feature is set by GPIO pin (or Wi-Fi/PTA internal register) to different frequencies, Wi-Fi/PTA will assert GRANT, but continue to Wi-Fi transmit. Given co- located Wi-Fi and Bluetooth radios with insufficient antenna isolation, the FREQ feature must be set to always blocking, FREQ GPIO pin (or Wi-Fi/PTA internal register) held asserted.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark37">Wi-Fi/PTA and Application Implements Reasonable Prioritization</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Wi-Fi TX pre-emption impacts Wi-Fi performance as in-progress Wi-Fi TX packets are aborted and corrupted. In response to a corrupted packet, most Wi-Fi devices assume SNR or interferer and temporarily lower the MCS index to maintain connection but recover to optimum MSC index as subsequent messages are successful. However, Bluetooth and 802.15.4 networks are low duty cycle and the infrequent Wi-Fi TX pre-emption events have a low impact on Wi-Fi performance.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l40"><li><p class="s4" style="padding-left: 59pt;text-indent: -36pt;text-align: left;"><a name="bookmark38">Bluetooth</a></p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The Bluetooth connection interval and window are fixed. If co-located Bluetooth misses too many connection intervals, the connection is dropped and must be re-established. Frequent drops are unacceptable to end-users. Silicon Labs has implemented priority levels and priority escalation within EFR32. When EFR32 Bluetooth asserts high PRIORITY, the Wi-Fi/PTA devices should GRANT to EFR32, except for only highest priority Wi-Fi traffic.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a name="bookmark39">4.2.3.2 802.15.4</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">802.15.4 RX packets are asynchronous and missing a packet ensures retries, increased message latency, and decreased end-node battery life. As such, 802.15.4 RX priority should be set as high as possible for the application.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">802.15.4 TX packets, originating from the co-located Wi-Fi/802.15.4 may have more discretion, as these devices are typically wall pow- ered. However, 802.15.4 transmits showing high latency can result in an unsatisfactory user experience. As such, 802.15.4 TX should also be set as high as possible for the application.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l41"><ol id="l42"><ol id="l43"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark40">Wi-Fi/PTA Implements Aggregation</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">Ensure aggregation is enabled on the Wi-Fi/PTA device. During suitable conditions, aggregation combines multiple smaller packets into fewer larger packets, reducing total packet overhead. As such, aggregation aids Wi-Fi, Bluetooth, and 802.15.4 performance as Wi-Fi TX idle periods combine into larger idle periods for freer RF airtime and improved 802.15.4 PREAMBLE/SYNCH and Bluetooth mesh recep- tion.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark41">Wi-Fi/PTA Supports Directional PRIORITY</a></p><p style="padding-top: 7pt;padding-left: 36pt;text-indent: 0pt;text-align: justify;">Directional PRIORITY is a common feature that can be enabled on Wi-Fi/PTA devices and is recommended due to the additional radio state information provided by the Bluetooth radio which allows the possibility for concurrent Wi-Fi and Bluetooth reception when utilizing channel separation as well as concurrent Wi-Fi and Bluetooth transmission, also when utilizing channel separation. In this way, implementing Pulsed Directional PRIORITY maximizes Wi-Fi and Bluetooth throughput.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark42">TX PRIORITY Escalation (802.15.4)</a></p></li></ol></ol></ol><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">To improve Wi-Fi performance with 802.15.4 coexistence, it is possible to start all 802.15.4 TX messages at low priority. However, to avoid blocking, all 802.15.4 TX messages during busy Wi-Fi, TX PRIORITY Escalation will escalate TX to high priority after a program- mable number of CCA/GRANT or MAC failures. Then, after a successful TX message, de-escalate TX back to low priority.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li></ol></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark43">PWM for High Duty Cycle Wi-Fi</a><a name="bookmark58">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 106%;text-align: justify;">PWM is a feature where the EFR32 reserves a timed slot for REQUEST. This is important in high duty-cycle Wi-Fi because planned EFR32 TX and RX, allows Wi-Fi to be more amenable to GRANT airtime when it is expected. Note that GRANT is not guaranteed; Wi-Fi still makes the decision based on its discretion.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l44"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark44">Bluetooth</a></p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">100% Passive SCAN and Bluetooth mesh have no knowledge of when an incoming packet will arrive. As the co-located Wi-Fi TX RF duty cycle increases, the Wi-Fi TX idle periods become smaller and there are fewer idle periods allowing Passive SCAN or Bluetooth mesh receives. As such, the probability of a packet arriving during an acceptably large Wi-Fi TX idle period decreases significantly.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The PWM feature implements regular PTA REQUESTs to interrupt the high Wi-Fi RF duty cycle and ensure adequate windows for receives. However, this feature does degrade Wi-Fi performance. Additionally, the exact PWM period and duty cycle must be carefully selected to not alias PWM period with Wi-Fi beacons to avoid collapsing the Wi-Fi network.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 59pt;text-indent: -36pt;text-align: justify;">Note<span class="p">: Ensure aggregation is enabled on Wi-Fi/PTA device. During suitable conditions, aggregation combines multiple smaller packets into fewer larger packets which reduces the total packet overhead. As such, aggregation aids Passive SCAN and Bluetooth mesh ADV-Bearer packet detection as Wi-Fi TX idle periods combine into larger idle periods.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;"><a name="bookmark45">4.3.2 802.15.4</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">802.15.4 radios have no knowledge of when an incoming packet will arrive and must capture the 802.15.4 PREAMBLE/SYNCH (160µs duration) to detect an incoming packet. As the co-located Wi-Fi TX RF duty cycle increases, the Wi-Fi TX idle periods become smaller and there are fewer idle periods exceeding 160µs. As such, the probability of a 160µs PREAMBLE/SYNCH arriving during an acceptably large Wi-Fi TX idle period decreases significantly.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The PWM feature implements regular PTA REQUESTs to interrupt the high Wi-Fi RF duty cycle and ensure adequate windows for PREAMBLE/SYNCH detection. However, this feature does degrade Wi-Fi performance. Additionally, the exact PWM period and duty cycle must be carefully selected to not alias PWM period with Wi-Fi beacons to avoid collapsing the Wi-Fi network.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-top: 4pt;padding-left: 59pt;text-indent: -36pt;text-align: justify;">Note<span class="p">: Ensure aggregation is enabled on Wi-Fi/PTA device. During suitable conditions, aggregation combines multiple smaller packets into fewer larger packets which reduces the total packet overhead. As such, aggregation aids 802.15.4 packet detection as Wi- Fi TX idle periods combine into larger idle periods for improved PREAMBLE/SYNCH detection.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l45"><ol id="l46"><ol id="l47"><li><p class="s8" style="padding-top: 8pt;padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark46">Background</a><a name="bookmark59">&zwnj;</a></p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The following figure is a 15.485ms capture of a Wi-Fi TX Active signal while Wi-Fi is transmitting iperf TCP at maximum throughput. Within this waveform, there are multiple Wi-Fi TX idle periods of which the first group of idle periods is expanded.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 66pt;text-indent: 0pt;text-align: left;"><span><img width="613" height="127" alt="High-Duty Cycle Wi-Fi TX Active " title="High-Duty Cycle Wi-Fi TX Active " src="ug103-17-wi-fi-coexistence-fundamentals/Image_021.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 76pt;text-indent: 0pt;text-align: center;">Figure 4-5. High-Duty Cycle Wi-Fi TX Active</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">From the first group, only the 0.306ms idle period is sufficient for packet receive (Bluetooth) or PREAMBLE/SYNCH detection (802.15.4) with a 0.146ms detection window (0.306ms–0.160ms). The following table lists all Wi-Fi TX idle period durations in the above 15.485ms capture.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 77pt;text-indent: 0pt;text-align: center;">Table 4-1. High-Duty Cycle Wi-Fi TX Active Durations</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:183.57pt" cellspacing="0"><tr style="height:27pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s18" style="padding-top: 2pt;padding-left: 21pt;text-indent: 0pt;text-align: left;">Wi-Fi TX</p><p class="s18" style="padding-top: 1pt;padding-left: 21pt;text-indent: 0pt;text-align: left;">Idle (ms)</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#808080"><p class="s18" style="padding-left: 27pt;padding-right: 26pt;text-indent: 2pt;line-height: 12pt;text-align: left;">Detection Window (Idle–0.160ms) (ms)</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.306</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.146</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.113</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.061</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.246</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.086</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.077</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.260</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.100</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.061</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.065</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.016</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.065</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.016</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.065</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.016</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.245</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.085</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.105</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.098</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.016</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.000</p></td></tr><tr style="height:15pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 27pt;padding-right: 26pt;text-indent: 0pt;text-align: center;">0.171</p></td><td style="width:140pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s19" style="padding-top: 2pt;padding-left: 57pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">0.011</p></td></tr></table><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;line-height: 107%;text-align: justify;">The sum of all Wi-Fi TX Idle periods is 2.002ms. This Wi-Fi TX Activity indicates 87.1% duty cycle [(15.485–2.002) / 15.485 x 100%], but this calculation does not include the additional Wi-Fi RX activity.</p><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: justify;">The sum of all Detection Windows is 0.428ms, providing only 2.8% probability of receiving the packet [0.428 / 15.485 x 100%]. But again, this calculation does not include Wi-Fi RX Activity. With only 2.8% probability of packet reception and a target 1% or less BT Mesh message loss, 165 retries are required [CEILING(LOG(1%)/LOG(100%–2.8%)]. This large number of required retries is far beyond the</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Bluetooth mesh network retries and, even if retries are extended, the message latency becomes impractical. Large retries also quickly degrade lifetime for battery power end-nodes.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">To resolve this issue, Bluetooth or 802.15.4 radios need more RF airtime to listen for incoming packets without being blocked by co- located Wi-Fi TX. Two options are possible:</p></li></ol></ol></ol></li></ol></li></ol></ol></li></ul></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Co-located Wi-Fi device enforces a maximum allowed Wi-Fi TX RF duty cycle.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Co-located Bluetooth or 802.15.4 radio asserts REQUEST at high PRIORITY to force regular quiet Wi-Fi TX.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Silicon Labs has not found option #1 to be reliable over various Wi-Fi/PTA devices. Silicon Labs has developed a PWM extension feature to support option #2. This PWM feature can be applied to any use case where EFR32 incoming Bluetooth Passive SCAN, Bluetooth mesh, or 802.15.4 packet receive is impaired by a co-located, controllable, external device. This includes, but is not limited to, the following use cases:</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">High duty-cycle co-located Wi-Fi TX</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Bluetooth or 802.15.4 co-channel with Wi-Fi</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">External T/R switch requiring Bluetooth or 802.15.4 to share a single antenna with Wi-Fi</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l48"><ol id="l49"><ol id="l50"><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark47">PWM Feature Description</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The PWM feature does not require any additional GPIOs for single EFR32 designs. However, multi -EFR32 designs require an additional GPIO to be available for each EFR32.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l51"><li><p class="s4" style="padding-left: 58pt;text-indent: -36pt;text-align: left;"><a name="bookmark48">Bluetooth</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The PWM feature is used to periodically stop co-located Wi-Fi TX activity to ensure sufficient idle TX time windows to receive Blue-tooth packets during Passive SCAN and Bluetooth mesh ADV-Bearer receive.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;"><a href="#bookmark58" class="s7">The optimum PWM period and duty cycle can vary based on Bluetooth operation and Wi-Fi activity. If Wi-Fi activity is low, PWM could be disabled and fall back to normal PTA activity as described in section </a><a href="#bookmark58" class="a">4.3 </a>PWM for High Duty Cycle Wi-Fi. During very high Wi-Fi duty cycle for Bluetooth mesh ADC-Bearer, a PWM programmed to 39ms period and &gt;44% duty is effective in reducing message loss to less than 1%. As noted, Wi-Fi throughput is impacted and, under 39ms/&gt;44% condition, the high duty cycle Wi-Fi TX throughput noted above dropped ~50%.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 22pt;text-indent: 0pt;text-align: justify;"><a name="bookmark49">4.3.4.2 802.15.4</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 106%;text-align: justify;"><a href="#bookmark59" class="s7">Under the same Wi-Fi TX Active throughput conditions as in section </a><a href="#bookmark59" class="a">4.3.3 Background</a>, the following figure shows the REQUEST||PWM (shown as REQUEST||TIMER1) signal interrupting the Wi-Fi TX with a 19.5 ms period and 20% duty cycle, sufficient to allow 802.15.4 RX with &lt; 1% message loss.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 59pt;text-indent: 0pt;text-align: left;"><span><img width="624" height="226" alt="EFR32 RX Success with PWM during High-Duty Cycle Wi-Fi TX " title="EFR32 RX Success with PWM during High-Duty Cycle Wi-Fi TX " src="ug103-17-wi-fi-coexistence-fundamentals/Image_022.jpg"/></span></p><p class="s8" style="padding-top: 6pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-6. EFR32 RX Success with PWM during High-Duty Cycle Wi-Fi TX</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">The green arrows show cases where the PREAMBLE/SYNCH was detected during a high PWM cycle, driving REQUEST||PWM high. This high PWM cycle stopped Wi-Fi TX Activity to allow detection of incoming 802.15.4 PRERAMBLE/SYNCH. As also seen, the REQUEST||PWM cycle is longer than all other cycles due to assertion of normal PTA REQUEST signal OR’ed with PWM cycle.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The red boxes are cases where the remote 802.15.4 radio executed packet transmits that were not detectable due to Wi-Fi TX Activity and packets’ PREAMBLE/SYNCH not aligning with the PWM cycle.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Optimum PWM period and duty cycle can vary based on 802.15.4 operation and Wi-Fi activity. If Wi-Fi activity is low, PWM could be disabled and fall back to normal PTA activity as described earlier. During very high Wi-Fi duty cycle for unicast 802.15.4 traffic, a PWM programmed to 19.5 ms period and 20% duty is effective in reducing message loss to less than 1% with APS retries disabled. As noted, Wi-Fi throughput is impacted and, under 19.5 ms/20% condition, the high duty cycle Wi-Fi TX throughput noted above dropped ~20% (~270 Mbps without PWM to ~220 Mbps with PWM).</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">During very high Wi-Fi duty cycle for broadcast 802.15.4 traffic without ACKs (for example, as occurs during network join sequence), a higher PWM duty cycle is required (e.g., 19.5 ms period and 80% duty cycle). This higher duty cycle can be disruptive to Wi-Fi but is only needed during expected broadcast message activity. This higher duty cycle can be reduced as soon as broadcast activity (for example, device join) completes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li><p class="s8" style="padding-left: 51pt;text-indent: -28pt;text-align: left;"><a name="bookmark50">PWM Implementation</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The optimum PWM implementation varies with single-EFR32 vs. multi-EFR32 applications. This implementation difference is primarily due to the REQUEST sharing feature used in multi-EFR32 applications. However, if addressed during circuit board design, this difference is easily resolved.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l52"><li><p class="s4" style="padding-left: 58pt;text-indent: -36pt;text-align: left;"><a name="bookmark51">Bluetooth</a></p></li></ol></li></ol></ol></ol><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Use of an BGAPI or CLI command are needed to allow the host application to control the PWM period, duty cycle, and priority. For more formation, see <i>AN1128: Bluetooth® Low Energy Coexistence with Wi-Fi</i>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 22pt;text-indent: 0pt;text-align: justify;"><a name="bookmark52">4.3.5.2 802.15.4</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 107%;text-align: justify;">Use of an API or coexistence CLI command are needed to allow the host application to control the PWM period, duty cycle, and priority. For more formation, see <i>AN1017: Zigbee® and OpenThread Coexistence with Wi-Fi</i>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 22pt;text-indent: 0pt;text-align: left;"><a name="bookmark53">4.3.5.3 Multi-EFR32 Radio with PWM</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">For multi-EFR32 radio applications not implementing PWM, the Shared REQUEST signal is used to arbitrate which EFR32 radio has access to the 2.4 GHz ISM band when GRANT is asserted from the Wi-Fi/PTA. If the PWM signal were to be applied to the shared REQUEST pin, other EFR32 radios would interpret the REQUEST as busy when it might just be forcing Wi-Fi TX idle to allow any of the IoT radios to detect an incoming packet. Instead, the Shared REQUEST feature is accommodated by separating the Shared REQUEST signal from the REQUEST||PWM signal resulting in a separate non-Wi-Fi/PTA signal connection between the EFR32 devices for Shared REQUEST.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The PWM enabled Wi-Fi/PTA connections between the Wi-Fi and Zigbee, OpenThread, and BLE EFR32 radios are the same as the multi-EFR32 radio with typical 3-Wire PTA schema. Only one radio, selected at run time, controls the PWM and ORs the PWM signal in software with its own REQUEST (arbitrated by the Shared REQUEST signal). The other EFR32 radios must also implement PWM in Hardware Configurator to provide their REQUEST to the PTA interface, (also arbitrated by Shared REQUEST). Each EFR32 radio’s REQUEST||PWM GPIO is set to open-drain/open-source, allowing a hardware OR function of any EFR32 radio’s REQUEST with REQUEST||PWM.</p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;line-height: 106%;text-align: justify;">If the radio driving REQUEST||PWM needs to go off-line (for example, for a firmware update), its PWM outputs can be halted and another EFR32 radio’s PWM outputs can then be activated for continued PWM operation. In the following figure, the Zigbee radio implements the PWM feature and the Thread radio or the Bluetooth radio provide PWM backup.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 138pt;text-indent: 0pt;text-align: left;"><span><img width="416" height="385" alt="Three EFR32s Supporting PWM and Wi-Fi/PTA with Single 3-Wire PTA Interface  " title="Three EFR32s Supporting PWM and Wi-Fi/PTA with Single 3-Wire PTA Interface  " src="ug103-17-wi-fi-coexistence-fundamentals/Image_023.jpg"/></span></p><p class="s8" style="padding-top: 6pt;padding-left: 76pt;text-indent: 0pt;line-height: 10pt;text-align: center;">Figure 4-7. Three EFR32s Supporting PWM and Wi-Fi/PTA with Single 3-Wire PTA Interface</p><p style="padding-left: 77pt;text-indent: 0pt;line-height: 10pt;text-align: center;">(REQUEST and PRIORITY pull-ups and pull-downs not shown)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 22pt;text-indent: 0pt;text-align: left;"><a name="bookmark54">4.4 Directional PRIORITY</a></p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Directional PRIORITY provides radio state information on the same signal line as PRIORITY by a timed pulse indicating a priority trans- action, followed by a radio state indicating to the Wi-Fi part that the EFR32 is transmitting or receiving. PRIORITY signal options must be configured for implementing Directional PRIORITY.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">Directional PRIORITY requires the use of a Timer and either four PRS channels (EFR32xG2x) or five PRS channels (EFR32xG1x). When Directional PRIORITY is enabled, the designer will need to verify the Timer and PRS channels selected for Directional PRIORITY are not used by the protocol SDK stack, plugins or custom application code.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">RACPAEN and REQUEST is either one PRS channel which inverts ORs in one operation (EFR32xG2x) or two separate PRS channels (EFR32xG1x).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l53"><ol id="l54"><ol id="l55"><ol id="l56"><li><p class="s4" style="padding-left: 58pt;text-indent: -36pt;text-align: left;"><a name="bookmark55">Single-EFR32 PTA with Directional PRIORITY</a></p><p style="padding-top: 7pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">The following figures show the GPIO, Radio, and Timer signals for Single-EFR32 PTA with and without SDK PWM and with Directional PRIORITY.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 75pt;text-indent: 0pt;text-align: left;"><span><img width="584" height="228" alt="Single-EFR32 PTA with SDK PWM, with Directional PRIORITY " title="Single-EFR32 PTA with SDK PWM, with Directional PRIORITY " src="ug103-17-wi-fi-coexistence-fundamentals/Image_024.jpg"/></span></p><p class="s8" style="padding-top: 4pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-8. Single-EFR32 PTA with SDK PWM, with Directional PRIORITY</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;"><span><img width="584" height="228" alt="Single-EFR32 PTA without SDK PWM, with Directional PRIORITY " title="Single-EFR32 PTA without SDK PWM, with Directional PRIORITY " src="ug103-17-wi-fi-coexistence-fundamentals/Image_025.jpg"/></span></p><p class="s8" style="padding-top: 4pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-9. Single-EFR32 PTA without SDK PWM, with Directional PRIORITY</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">Directional PRIORITY</p></li></ol></ol></ol></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 Directional Priority output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO connects to Wi-Fi PTA.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Requires active high Static PRIORITY and active high REQUEST</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Static PRIORITY</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">The active high PRIORITY is not assigned to a GPIO.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Not connected to any external circuit.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">REQUEST</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Compared in Pulse Width Timer.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO connects to Wi-Fi PTA.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">GRANT</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA input.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO connects to Wi-Fi PTA.</p><p class="s8" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">RACPAEN</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 radio transmit PA enable output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p><p class="s8" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Pulse Width</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 Timer compared with REQUEST GPIO.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l57"><ol id="l58"><ol id="l59"><ol id="l60"><li><p class="s4" style="padding-left: 58pt;text-indent: -36pt;text-align: left;"><a name="bookmark56">Multi-EFR32 PTA with Directional PRIORITY</a></p></li></ol></ol></ol></ol><p style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">The following figure shows the GPIO, Radio, and Timer signals for Multi-EFR32 PTA with SDK PWM and Directional PRIORITY.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;"><span><img width="720" height="470" alt="Multi-EFR32 PTA with SDK PWM and Directional PRIORITY " title="Multi-EFR32 PTA with SDK PWM and Directional PRIORITY " src="ug103-17-wi-fi-coexistence-fundamentals/Image_026.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">Shared REQUEST</p><p class="s8" style="padding-top: 3pt;padding-left: 82pt;text-indent: -59pt;text-align: left;">Figure 4-10. Multi-EFR32 PTA with SDK PWM and Directional PRIORITY (1K 5% pull-ups and pull-downs not shown)</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA input / output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO connects to all EFR32s for PTA bus arbitration between EFR32s</p><ul id="l61"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Configured as open source / drain.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">The active high Shared REQUEST is open-source and an external 1 kΩ ±5% pull-down is required.</p><p class="s8" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">Directional PRIORITY</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 Directional Priority output</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO Connects to Wi-Fi PTA and all EFR32s</p><ul id="l62"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -51pt;text-align: right;">Configured as open source / drain.</p><ul id="l63"><li><p style="padding-top: 8pt;padding-left: 76pt;text-indent: -18pt;text-align: left;">The active high Directional PRIORITY is open-source and an external 1 kΩ ±5% pull-down is required.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Static PRIORITY</p></li></ul></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">The active high PRIORITY is not assigned to a GPIO.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -37pt;text-align: right;">Not connected to any external circuit.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">PWM REQUEST</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO Connects to Wi-Fi PTA and all EFR32s.</p><ul id="l64"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -51pt;text-align: right;">Configured as open source / drain.</p><ul id="l65"><li><p style="padding-top: 8pt;padding-left: 76pt;text-indent: -18pt;text-align: left;">If active high, PWM REQUEST is open-source and an external 1 kΩ ±5% pull-down is required.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Compared with Pulse Width in EFR32 Timer.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">GRANT</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 PTA input.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">GPIO connects to Wi-Fi PTA and all EFR32s.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">RACPAEN</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 Radio transmit PA enable output.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Pulse Width</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">EFR32 Timer compared with PWM REQUEST GPIO.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Directional PRIORITY input.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="726" height="412" alt="EFR32xG1x Directional PRIORITY Logic Diagram " title="EFR32xG1x Directional PRIORITY Logic Diagram " src="ug103-17-wi-fi-coexistence-fundamentals/Image_027.jpg"/></span></p><p class="s8" style="padding-top: 7pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-11. EFR32xG1x Directional PRIORITY Logic Diagram</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="726" height="415" alt="EFR32xG2x Directional PRIORITY Logic Diagram " title="EFR32xG2x Directional PRIORITY Logic Diagram " src="ug103-17-wi-fi-coexistence-fundamentals/Image_028.jpg"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 77pt;text-indent: 0pt;text-align: center;">Figure 4-12. EFR32xG2x Directional PRIORITY Logic Diagram</p><ol id="l66"><li><h4 style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark60">Conclusions</a></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: justify;">Co-located, strong Wi-Fi can have a substantial impact on Bluetooth and 802.15.4 performance. It can be improved by using the following unmanaged coexistence techniques:</p><ol id="l67"><li><p style="padding-top: 6pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark22" class="a">Implement Frequency </a><a href="#bookmark22">Separation</a></p></li><li><p style="padding-top: 6pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark23" class="a">Operate Wi-Fi with 20 MHz </a><a href="#bookmark23">Bandwidth</a></p></li><li><p style="padding-top: 6pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark24" class="a">Increase Antenna </a><a href="#bookmark24">Isolation</a></p></li><li><p style="padding-top: 6pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark25" class="a">Implement Protocol and Stack Retry </a><a href="#bookmark25">Mechanisms</a></p></li><li><p style="padding-top: 6pt;padding-left: 41pt;text-indent: -18pt;text-align: left;"><a href="#bookmark26" class="a">Remove FEM (or Operate FEM </a><a href="#bookmark26">LNA in Bypass)</a></p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: justify;">With market trends toward higher Wi-Fi TX power, higher Wi-Fi throughput, and integration of Wi-Fi, Bluetooth, and other radios, into the same device, unmanaged techniques alone may prove insufficient, so a managed coexistence solution is required. Even with a managed coexistence solution, all unmanaged coexistence recommendations are still necessary.</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Silicon Labs recommends the following managed coexistence strategies:</p></li></ol></li></ol></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Wi-Fi/PTA devices providing 802.15.4-derived Packet Traffic Arbitration.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Silicon Labs’ EFR32 PTA solution:</p><ul id="l68"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Implement one to four GPIOs as a combination of REQUEST, GRANT, PRIORITY, and RHO (two additional GPIOs are required to implement the PWM with High-Duty Cycle Wi-Fi feature for multi-EFR32 configurations).</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Supports both single-EFR32 and multi-EFR32 configurations with single Wi-Fi/PTA interface.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Silicon Labs’ coexistence library and coexistence-hal-config.h #define settings to configure EFR32 PTA support for available GPIO pins and for compatibility with the chosen Wi-Fi/PTA device.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;"><span class="s20">	</span>Silicon Labs’ API, supporting run-time PTA reconfiguration. For more information, see <i>AN1017: Zigbee® and OpenThread Coex- istence with Wi-Fi® </i>or <i>AN1128: Bluetooth® Coexistence with Wi-Fi®</i>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l69"><ol id="l70"><li><p class="s8" style="padding-left: 58pt;text-indent: -36pt;text-align: left;"><a name="bookmark61">Bluetooth</a></p></li></ol></ol><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Wi-Fi/Bluetooth coexistence test results show substantial Bluetooth performance improvements when PTA is utilized:</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Connection stability</p><ul id="l71"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Prevent user frustration with unstable product function as Wi-Fi throughput varies.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Substantially reduced message failure with associated throughput improvement:</p><ul id="l72"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Improves end-node battery life.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Reduces message latency.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;"><a name="bookmark62">Bluetooth remains operational, even during high Wi-Fi duty cycles.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">5.2 802.15.4</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Wi-Fi/802.15.4 coexistence test results show substantial 802.15.4 performance improvements when PTA is utilized:</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Improved device join success:</p><ul id="l73"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">However, device join utilizes broadcast messages, which are not retried.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">If possible, device join success can be further improved by temporarily reducing Wi-Fi traffic during devices joining 802.15.4 network.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Substantially reduced MAC retries:</p><ul id="l74"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">Reduces message latency.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Improves end-node battery life.</p></li><li><p style="padding-left: 51pt;text-indent: -14pt;text-align: left;">Frequency separation remains important, as best managed coexistence performance is for “far-away” channels.</p></li></ul></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Substantially reduced message failure:</p><ul id="l75"><li><p style="padding-top: 3pt;padding-left: 51pt;text-indent: -14pt;text-align: left;">802.15.4 network remains operational, even during high Wi-Fi duty cycles.</p><ol id="l76"><li><h4 style="padding-top: 7pt;padding-left: 40pt;text-indent: -18pt;text-align: left;"><a name="bookmark63">Document Revision History</a></h4></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">Revision 0.2</p><p style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">March 2021</p></li></ul></li><li><p style="padding-top: 6pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Section 2.1.1: Updated mentions of EFR32MG21 part number and Silicon Labs Bluetooth version. Updated Figure 2-2 and associated commentary on the chart.</p></li><li><p style="padding-top: 3pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Section 2.12: Updated mentions of EFR32MG21 part number. Updated Figure 2-4 and associated commentary on the chart.</p><p class="s8" style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">Revision 0.1</p><p style="padding-top: 8pt;padding-left: 22pt;text-indent: 0pt;text-align: left;">December 2020</p></li><li><p style="padding-top: 6pt;padding-left: 37pt;text-indent: -14pt;text-align: left;">Initial release</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 36pt;text-indent: 0pt;text-align: left;">Simplicity Studio</h2><p class="s21" style="padding-top: 14pt;padding-left: 36pt;text-indent: 0pt;line-height: 122%;text-align: left;">One-click access to MCU and wireless tools, documentation, software, source code libraries &amp; more. Available for Windows, Mac and Linux!</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="768" height="432" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_029.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:63.94pt" cellspacing="0"><tr style="height:99pt"><td style="width:98pt" bgcolor="#231F20"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 15pt;text-indent: 0pt;text-align: left;"><span><img width="66" height="66" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_030.png"/></span></p><p style="padding-top: 10pt;padding-left: 1pt;padding-right: 19pt;text-indent: 0pt;text-align: center;"><a href="https://www.silabs.com/solutions/iot" class="s22">IoT Portfolio</a></p><p style="padding-top: 1pt;padding-left: 1pt;padding-right: 19pt;text-indent: 0pt;line-height: 8pt;text-align: center;"><a href="http://www.silabs.com/IoT" class="s23">www.silabs.com/IoT</a></p></td><td style="width:126pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;text-align: center;"><a href="https://www.silabs.com/simplicity" class="s22">SW/HW</a></p><p style="padding-top: 1pt;padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;line-height: 8pt;text-align: center;"><a href="http://www.silabs.com/simplicity" class="s23">www.silabs.com/simplicity</a></p></td><td style="width:126pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;text-align: center;"><a href="https://www.silabs.com/about-us/corporate-responsibility/commitment-to-quality" class="s22">Quality</a></p><p style="padding-top: 1pt;padding-left: 18pt;padding-right: 8pt;text-indent: 0pt;line-height: 8pt;text-align: center;"><a href="http://www.silabs.com/quality" class="s23">www.silabs.com/quality</a></p></td><td style="width:126pt"><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 12pt;text-indent: 0pt;text-align: left;"><a href="https://www.silabs.com/community" class="s22" target="_blank">Support &amp; Community</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 8pt;text-align: left;"><a href="http://www.silabs.com/community" class="s23">www.silabs.com/community</a></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="131" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_031.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="131" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_032.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="131" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_033.png"/></span></p><p class="s24" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Disclaimer</p><p class="s25" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software imple- menters using or intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each <span class="s26">specific device, and “Typical” parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes without further notice to the product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included information. Without prior notification, Silicon Labs may update product firmware during the manufacturing process for security or reliability reasons. Such changes will not alter the specifications or the performance of the product. Silicon Labs shall have no liability for the consequences of use of the infor</span>- mation supplied in this document. This document does not imply or expressly grant any license to design or fabricate any integrated circuits. The products are not designed or <span class="s26">authorized to be used within any FDA Class III devices, applications for which FDA premarket approval is required or Life Support Systems without the specific written consent of Silicon Labs. A “Life Support System” is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used </span>in weapons of mass destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons. Silicon Labs disclaims <span class="s26">all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of a Silicon Labs product in such unauthorized applications. </span><b>Note: This content may contain offensive terminology that is now obsolete. Silicon Labs is replacing these terms with inclusive language wherever possible. For more </b><span class="s28">information, visit </span><a href="https://www.silabs.com/about-us/inclusive-lexicon-project" class="s30" target="_blank">www.silabs.com/about-us/inclusive-lexicon-project</a></p><p class="s28" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Trademark Information</p><p class="s31" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 117%;text-align: justify;"><span class="s25">Silicon Laboratories Inc.</span>®<span class="s25">, Silicon Laboratories</span>®<span class="s25">, Silicon Labs</span>®<span class="s25">, SiLabs</span>® <span class="s25">and the Silicon Labs logo</span>®<span class="s25">, Bluegiga</span>®<span class="s25">, Bluegiga Logo</span>®<span class="s25">, Clockbuilder</span>®<span class="s25">, CMEMS</span>®<span class="s25">, DSPLL</span>®<span class="s25">, EFM</span>®<span class="s25">, EFM32</span>®<span class="s25">, EFR, Ember</span>®<span class="s26">, Energy Micro, Energy Micro logo and combinations thereof, “the world’s most energy friendly microcontrollers”, Ember</span>®<span class="s25">, EZLink</span>®<span class="s25">, EZRadio</span>®<span class="s25">, EZRadioPRO</span>®<span class="s25">, Gecko</span>®<span class="s25">, Gecko OS, Gecko OS Studio, ISOmodem</span>®<span class="s25">, Precision32</span>®<span class="s25">, ProSLIC</span>®<span class="s25">, Simplicity Studio</span>®<span class="s25">, SiPHY</span>®<span class="s25">, Telegesis, the Telegesis Logo</span>®<span class="s25">, USBXpress</span>® <span class="s25">, Zentri, the Zentri logo and Zentri DMS, Z-Wave</span>®<span class="s25">, and others are trademarks or registered trademarks of Silicon Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Hold- ings. Keil is a registered trademark of ARM Limited. Wi-Fi is a registered trademark of the Wi-Fi Alliance. All other products or brand names mentioned herein are trademarks of their respective holders.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="148" height="73" alt="image" src="ug103-17-wi-fi-coexistence-fundamentals/Image_034.png"/></span></p><p class="s28" style="padding-top: 5pt;padding-left: 149pt;text-indent: 0pt;text-align: left;">Silicon Laboratories Inc. 400 West Cesar Chavez Austin, TX 78701</p><p class="s28" style="padding-left: 149pt;text-indent: 0pt;line-height: 8pt;text-align: left;">USA</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 149pt;text-indent: 0pt;text-align: left;"><h3 href="http://www.silabs.com/">www.silabs.com</h3></p></body></html>
